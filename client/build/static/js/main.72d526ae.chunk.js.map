{"version":3,"sources":["views/EditorLib/components/common/ColorPicker.js","views/EditorLib/components/imagemap/properties/StyleProperty.js","views/EditorLib/components/imagemap/properties/AnimationProperty.js","views/EditorLib/components/common/Scrollbar.js","views/EditorLib/components/canvas/objects/Gif.ts","views/EditorLib/components/canvas/objects/Arrow.ts","views/EditorLib/components/canvas/utils/ObjectUtil.ts","views/EditorLib/components/canvas/objects/Chart.ts","views/EditorLib/components/canvas/objects/Element.ts","views/EditorLib/components/canvas/objects/Iframe.ts","views/EditorLib/components/canvas/objects/Video.ts","views/EditorLib/components/canvas/objects/Port.ts","views/EditorLib/components/canvas/objects/Node.ts","views/EditorLib/components/canvas/objects/Link.ts","views/EditorLib/components/canvas/objects/CurvedLink.ts","views/EditorLib/components/canvas/objects/OrthogonalLink.ts","views/EditorLib/components/canvas/objects/Line.ts","views/EditorLib/components/canvas/CanvasObject.ts","views/EditorLib/components/canvas/handlers/Handler.ts","views/EditorLib/components/canvas/handlers/ImageHandler.ts","views/EditorLib/components/canvas/handlers/ChartHandler.ts","views/EditorLib/components/canvas/handlers/ElementHandler.ts","views/EditorLib/components/canvas/handlers/CropHandler.ts","views/EditorLib/components/canvas/handlers/AnimationHandler.ts","views/EditorLib/components/canvas/handlers/ContextmenuHandler.ts","views/EditorLib/components/canvas/handlers/TooltipHandler.ts","views/EditorLib/components/canvas/handlers/TransactionHandler.ts","views/EditorLib/components/canvas/handlers/ZoomHandler.ts","views/EditorLib/components/canvas/handlers/WorkareaHandler.ts","views/EditorLib/components/canvas/handlers/InteractionHandler.ts","views/EditorLib/components/canvas/handlers/GridHandler.ts","views/EditorLib/components/canvas/handlers/PortHandler.ts","views/EditorLib/components/canvas/handlers/LinkHandler.ts","views/EditorLib/components/canvas/handlers/NodeHandler.ts","views/EditorLib/components/canvas/handlers/AlignmentHandler.ts","views/EditorLib/components/canvas/handlers/GuidelineHandler.ts","views/EditorLib/components/canvas/handlers/EventHandler.ts","views/EditorLib/components/canvas/handlers/DrawingHandler.ts","views/EditorLib/components/canvas/handlers/ShortcutHandler.ts","views/EditorLib/components/canvas/Canvas.tsx","views/EditorLib/components/icon/IconChooser.js","views/EditorLib/components/imagemap/properties/MarkerProperty.js","views/EditorLib/components/imagemap/properties/GeneralProperty.js","views/EditorLib/components/imagemap/properties/TooltipProperty.js","views/EditorLib/components/imagemap/properties/ImageProperty.js","views/EditorLib/components/font/fonts.js","views/EditorLib/components/imagemap/properties/TextProperty.js","views/EditorLib/components/imagemap/properties/MapProperty.js","views/EditorLib/components/imagemap/properties/LinkProperty.js","views/EditorLib/components/imagemap/properties/VideoProperty.js","views/EditorLib/components/ace/AcePreview.js","views/EditorLib/components/ace/AceEditor.js","views/EditorLib/components/ace/AceModal.js","views/EditorLib/components/imagemap/properties/ElementProperty.js","views/EditorLib/components/imagemap/properties/IframeProperty.js","views/EditorLib/components/imagemap/properties/ShadowProperty.js","views/EditorLib/components/common/EditTable.js","views/EditorLib/components/imagemap/properties/UserProperty.js","views/EditorLib/components/imagemap/properties/TriggerProperty.js","views/EditorLib/components/imagemap/properties/ImageFilterProperty.js","views/EditorLib/components/common/ChartModal.js","views/EditorLib/components/imagemap/properties/ChartProperty.js","views/EditorLib/components/imagemap/properties/PropertyDefinition.js","polyfill.js","reducers/commonReducer.js","reducers/imgUploadReducer.js","reducers/dataExtractReducer.js","reducers/tplTreeReducer.js","reducers/index.js","reducers/authReducer.js","views/EditorLib/i18n/i18nClient.js","App.js","serviceWorker.js","index.js","views/EditorLib/components/common/FileUpload.js","views/EditorLib/components/common/UrlModal.js","actions/type.js","views/EditorLib/components/icon/Icon.js","views/EditorLib/components/common/Container.js","views/EditorLib/components/flex/FlexBox.js","views/EditorLib/components/flex/FlexItem.js","views/EditorLib/components/flex/index.js","views/EditorLib/components/common/CodeModal.js","views/EditorLib/components/imagemap/ImageMapList.js","views/EditorLib/components/imagemap/properties/NodeProperties.js","views/EditorLib/components/imagemap/properties/MapProperties.js","actions/authActions.js","conf.js","actions/commonActions.js","actions/imgUploadActions.js","actions/extractDataActions.js","actions/templateTreeActions.js","actions/index.js","views/EditorLib/components/common/InputJson.js","views/EditorLib/components/common/InputScript.js","views/EditorLib/components/common/InputTemplate.js","views/EditorLib/components/common/InputHtml.js","views/EditorLib/components/common/SVGModal.js","views/EditorLib/components/common/index.js","views/EditorLib/components/imagemap/ImageMapFooterToolbar.js","views/EditorLib/components/common/CommonButton.js","views/EditorLib/components/imagemap/ImageMapTitle.js","views/EditorLib/components/imagemap/ImageMapPreview.js","views/EditorLib/components/imagemap/properties/DataSourceProperty.js","views/EditorLib/components/imagemap/datasources/DataSourceModal.js","views/EditorLib/components/imagemap/datasources/DataSourceList.js","views/EditorLib/components/imagemap/datasources/DataSources.js","views/EditorLib/components/exception/UnsafetyWordException.js","views/EditorLib/components/exception/NoExistWordException.js","views/EditorLib/components/sandbox/SandBox.js","views/EditorLib/components/imagemap/animations/AnimationList.js","views/EditorLib/components/imagemap/animations/AnimationModal.js","views/EditorLib/components/imagemap/animations/Animations.js","views/EditorLib/components/imagemap/styles/StyleList.js","views/EditorLib/components/imagemap/styles/StyleModal.js","views/EditorLib/components/imagemap/styles/Styles.js","views/EditorLib/components/imagemap/ImageMapHeaderToolbar.js","views/EditorLib/components/imagemap/ImageMapEditor.js","views/EditorLib/components/imagemap/ImageMapItems.js","views/EditorLib/components/imagemap/ImageMapConfigurations.js","views/EditorLib/components/imagemap/ImageFields.js"],"names":["ColorPicker","handlers","onChange","color","newColor","props","valueType","rgb","r","g","b","a","setState","state","value","getBackgroundColor","nextProps","this","trigger","placement","content","style","background","shape","Component","defaultProps","render","canvasRef","form","data","getFieldDecorator","Fragment","Item","label","i18n","t","colon","initialValue","fill","rules","type","min","max","opacity","step","stroke","strokeWidth","showSearch","width","Array","from","length","v","k","Option","key","gutter","md","lg","rx","ry","animation","span","valuePropName","autoplay","size","loop","delay","duration","getComponentType","block","onClick","handler","animationHandler","play","id","name","marginRight","pause","stop","bounce","offset","shake","scale","angle","Scrollbar","renderTrack","className","renderTrackVertical","children","Gif","fabric","util","createClass","Object","superType","gifCanvas","isStarted","initialize","options","callSuper","document","createElement","drawFrame","ctx","frame","height","drawImage","buffer","_render","window","gifler","frames","_c","fromObject","callback","Arrow","Line","points","x1","x2","y1","y2","save","xDiff","yDiff","Math","atan2","translate","rotate","beginPath","moveTo","lineTo","closePath","fillStyle","restore","toObject","obj","propertiesToInclude","properties","object","extend","reduce","prev","property","assign","get","Chart","Rect","hasRotatingPoint","chartOption","set","setSource","source","setChartOptionStr","setChartOption","chartOptionStr","distroyChart","createChart","instance","echarts","element","setOption","xAxis","yAxis","series","dispose","container","editable","scaleX","scaleY","zoom","canvas","getZoom","left","calcCoords","tl","x","top","y","padLeft","padTop","makeElement","getElementById","appendChild","initialCode","html","css","js","Element","code","setCode","styleEl","innerHTML","scriptEl","head","Iframe","src","setSrc","iframeElement","wrapElement","Video","File","file","setFile","reader","FileReader","onload","player","result","readAsDataURL","muted","videoElement","preload","controls","MediaElementPlayer","pauseOtherPlayers","videoWidth","videoHeight","success","_mediaeElement","_originalNode","setPlayerSize","Port","enabled","nodeId","NODE_COLORS","TRIGGER","border","LOGIC","DATA","ACTION","OUT_PORT_TYPE","Node","i18next","Group","text","icon","IText","fontFamily","fontWeight","fontSize","test","substring","concat","Text","rect","errorFlag","visible","errors","node","option","uuid","originX","originY","hasControls","description","configuration","nodeClazz","descriptor","borderColor","borderScaleFactor","dblclick","deletable","cloneable","fromPort","toPort","defaultPortOption","hasBorders","selectable","lockScalingX","lockScalingY","originFill","hoverFill","errorFill","hoverCursor","links","toPortOption","fromPortOption","createToPort","inEnabled","createFromPort","outPortType","broadcastPort","staticPort","dynamicPort","singlePort","portOption","outPorts","map","outPort","i","leftDiff","_portOption","setErrors","duplicate","FromPort","ToPort","Link","fromNode","toNode","coords","lockRotation","perPixelTargetFind","lockMovementX","lockMovementY","setPort","_toNode","push","setPortEnabled","port","forEach","link","index","fromPortIndex","outputCount","CurvedLink","strokeStyle","fp","sp","bezierCurveTo","OrthogonalLink","lineJoin","CanvasObject","group","create","objects","textbox","Textbox","triangle","Triangle","circle","Circle","image","Image","crossOrigin","polygon","Polygon","line","arrow","chart","iframe","video","gif","curvedLink","orthogonalLink","Handler","workarea","interactionMode","minZoom","maxZoom","workareaOption","canvasOption","gridOption","fabricObjects","defaultOption","guidelineOption","zoomEnabled","activeSelection","keyEvent","onAdd","onContext","onTooltip","onZoom","onDblClick","onModified","onSelect","onRemove","onTransaction","onInteraction","imageHandler","chartHandler","elementHandler","cropHandler","contextmenuHandler","tooltipHandler","zoomHandler","workareaHandler","interactionHandler","transactionHandler","gridHandler","portHandler","linkHandler","nodeHandler","alignmentHandler","guidelineHandler","eventHandler","drawingHandler","shortcutHandler","objectMap","activeLine","activeShape","prevTarget","target","pointArray","lineArray","isCut","isRequsetAnimFrame","requestFrame","clipboard","init","initCallback","initHandler","_options","ImageHandler","ChartHandler","ElementHandler","CropHandler","AnimationHandler","ContextmenuHandler","TooltipHandler","ZoomHandler","WorkareaHandler","InteractionHandler","TransactionHandler","GridHandler","PortHandler","LinkHandler","NodeHandler","AlignmentHandler","GuidelineHandler","EventHandler","DrawingHandler","ShortcutHandler","getObjects","filter","activeObject","getActiveObject","setCoords","requestRenderAll","display","el","findById","setScaleOrAngle","setSize","setPosition","setObject","keys","setByObject","renderAll","setById","findObject","setByPartial","setShadow","setImage","loadImage","setImageById","setVisible","centerObject","centered","viewportTransform","add","loaded","transaction","layout","createdObj","newOption","addSVG","addImage","addGroup","groupOption","on","mousedown","mousedblclick","some","startRequestAnimFrame","stopRequestAnimFrame","iconButton","highlightingNode","active","child","filters","otherOption","createFilters","Promise","resolve","getSVGElements","groupSVGElements","loadType","loadSVGFromString","svg","loadSVGFromURL","remove","discardActiveObject","removeById","activeObjects","_objects","removeOriginById","findOriginByIdWithIndex","splice","grid","clone","clonedObj","evented","forEachObject","setActiveObject","duplicateById","cloned","cut","copy","copyToClipboard","textarea","body","select","execCommand","removeChild","wrapperEl","focus","linkTarget","fromNodeIndex","fromPortId","findIndex","compObj","toNodeIndex","iconName","JSON","stringify","paste","padding","linkObjects","linkObject","fromNodeId","toNodeId","toPortId","ActiveSelection","newClipboard","url","setPatternFill","repeat","setElement","find","warning","findOriginById","console","warn","selectById","selectAll","filteredObjects","locked","originScaleToResize","workareaWidth","workareaHeight","scaleToResize","importJSON","json","parse","prevLeft","prevTop","setBackgroundColor","backgroundColor","bind","workareaExist","setTimeout","canvasWidth","getWidth","canvasHeight","getHeight","leftRatio","topRatio","diffLeft","diffTop","setZoom","exportJSON","toJSON","toGroup","toActiveSelection","bringForward","bringToFront","sendBackwards","sendToBack","clear","includeWorkarea","ids","curr","removeByIds","requestAnimFrame","cancelAnimationFrame","clearTimeout","saveImage","targetObject","dataUrl","format","quality","toDataURL","anchorEl","href","download","click","saveCanvasImage","FILTER_TYPES","SHARPEN_MATRIX","EMBOSS_MATRIX","createFilter","filterType","other","toLowerCase","Grayscale","Invert","Sepia","Brightness","brightness","Contrast","Saturation","Noise","noise","Pixelate","Convolute","matrix","BlendColor","BlendImage","Resize","Tint","Mask","channel","mask","Multiply","Sepia2","isEqual","applyFilterByType","apply","imageObj","ft","applyFilters","applyFilter","applyFilterValue","prop","setOptions","applyGrayscale","grayscale","mode","undefined","applyInvert","invert","applySepia","sepia","applyBrightness","applyContrast","contrast","applySaturation","saturation","applyNoise","applyPixelate","pixelate","blocksize","applySharpen","sharpen","applyEmboss","emboss","applyBlendColor","blend","applyBlendImage","blendImage","applyResize","resize","applyTint","tint","applyMask","applyMultiply","multiply","applySepia2","sepia2","applyGradientTransparency","gradientTransparency","GradientTransparency","applyColorMatrix","colorMatrix","ColorMatrix","applyRemoveWhite","removeWhite","RemoveWhite","getBoundingRect","setPositionByOrigin","transform","cropRect","cropObject","validType","start","finish","croppedImg","cancel","opt","original","corner","cropLeft","cropTop","cropWidth","cropHeight","cropScaleX","cropScaleY","round","diffRightRatio","diffBottomRatio","diffTopRatio","diffLeftRatio","moving","movedTop","anime","restart","getAnimation","initAnimation","originOpacity","originTop","originLeft","originScaleX","originScaleY","originAngle","originStroke","origniStroke","targets","direction","begin","update","e","animations","currentValue","complete","easing","elasticity","contextmenuEl","show","debounce","hasChildNodes","firstChild","contextmenu","ReactDOM","classList","clientX","clientY","hide","tooltipEl","tooltip","clientHeight","calcOffset","_offset","objWidthDiff","objHeightDiff","calcLeft","calcTop","clientWidth","offsetWidth","_target","redos","undos","canvasJSON","error","undo","throttle","pop","replay","redo","renderOnAddRemove","enlivenObjects","targetIndex","insertAt","zoomToPoint","point","zoomRatio","zoomOneToOne","center","getCenter","setViewportTransform","Point","zoomToFit","zoomIn","zoomOut","defaultWorkareaOption","isElement","mergedWorkareaOption","setLayout","_element","isFixed","isResponsive","isFullscreen","objScaleX","objScaleY","objWidth","objHeight","setResponsiveImage","onFinish","imageFromUrl","fromURL","img","selection","defaultCursor","ret","grab","drawing","isDrawingMode","delta","movementX","movementY","relativePan","gridLength","lineOptions","distance","fhorizontal","shorizontal","fvertical","svertical","snapToGrid","class","toCoords","fromCoords","topDiff","recreate","ports","removeWithUpdate","op","np","isDrawing","isConnected","generate","isDuplicate","isSameNode","removeFrom","portLink","removeTo","removeAll","validate","getNodePath","nodes","selectByPath","path","targetObjects","fromIndex","toIndex","animating","blur","deselect","highlightingByPath","nonTargetObjects","lastObject","highlightingLink","maxBlur","minBlur","onComplete","shadow","animate","ease","easeInOutQuad","activeObjectLeft","right","verticalLines","horizontalLines","aligningLineOffset","aligningLineMargin","aligningLineWidth","aligningLineColor","getSelectionContext","drawVerticalLine","drawLine","drawHorizontalLine","lineWidth","isInRange","v1","v2","len","movingGuidelines","canvasObjects","activeObjectCenter","getCenterPoint","activeObjectTop","activeObjectBoundingRect","activeObjectHeight","activeObjectWidth","horizontalInTheRange","verticalInTheRange","_currentTransform","objectCenter","objectLeft","objectTop","objectBoundingRect","objectHeight","objectWidth","scalingGuidelines","keyCode","panning","attachEventListener","modified","scaling","scaled","moved","rotating","rotated","mousewheel","mousemove","mouseup","beforeRender","afterRender","mouseout","tabIndex","addEventListener","keydown","keyup","onmousedown","detachEventListener","off","removeEventListener","parentId","_opt","arrowmoving","event","deltaY","preventDefault","stopPropagation","altKey","addPoint","pointer","getPointer","shiftKey","clearContext","nextWidth","nextHeight","setWidth","setHeight","diffWidth","diffHeight","deltaPoint","diffScaleX","diffScaleY","newScaleX","newScaleY","activeElement","clipboardData","types","clipboardType","textPlain","getData","isArray","isW","isEscape","isQ","isDelete","isArrow","isCtrlA","isCtrlC","isCtrlV","isCtrlX","isCtrlZ","isCtrlY","isPlus","isMinus","isO","isP","findTarget","_e","absolutePointer","radius","position","activeShapePoints","polyPoint","objectCaching","orthogonal","curve","esc","del","includes","move","ctrlKey","all","defaultCanvasOption","preserveObjectStacking","defaultKeyboardEvent","defaultPropertiesToInclude","Canvas","React","createRef","resizeObserver","createObserver","ResizeObserver","entries","contentRect","observe","current","cancelObserver","disconnect","responsive","mergedPropertiesToInclude","union","mergedCanvasOption","prevProps","currentWidth","currentHeight","prevWidth","prevHeight","ref","IconChooser","onOk","onCancel","modalHandlers","onHide","onShow","onClickIcon","onSearch","textSearch","getPrefix","prefix","getIcons","lowerCase","icons","search","terms","term","Icon","styles","filteredIcons","filteredIconsLength","title","placeholder","bodyStyle","margin","overflowY","ic","metadata","required","message","parseInt","imageLoadType","Button","arg","FileUpload","accept","UrlModal","fonts","default","google","Fonts","font","OptGroup","toUpperCase","sortBy","f","CheckableTag","fontStyle","linethrough","underline","textAlign","lineHeight","charSpacing","videoLoadType","AcePreview","iframeRender","contentDocument","script","c","defaultStyle","AceEditor","onChangeHTML","htmlAnnotations","htmlRef","editor","getSession","getAnnotations","onChangeCSS","cssAnnotations","cssRef","onChangeJS","jsAnnotations","jsRef","onValidateHTML","annotations","setAnnotations","getCodes","destroy","isHTML","isCSS","isJS","isPreview","theme","defaultValue","editorProps","$blockScrolling","notification","config","AceModal","aceRef","wordBreak","enabeld","offsetX","offsetY","EditTable","userProperty","tempKey","originKey","tempValue","validateStatus","help","getDataSource","onChangeKey","p","handleAdd","handleEdit","handleDelete","handleClear","columns","dataIndex","record","flexDirection","justifyContent","pagination","pageSize","dataSource","hasFeedback","gamma","disabled","rotation","CodeModal","tempChartOption","codeLabel","minWidth","ChartModal","component","MapProperty","ImageProperty","general","GeneralProperty","ShadowProperty","marker","MarkerProperty","LinkProperty","TooltipProperty","StyleProperty","AnimationProperty","TriggerProperty","UserProperty","TextProperty","ImageFilterProperty","VideoProperty","ElementProperty","IframeProperty","ChartProperty","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","prototype","Event","INITIAL_STATE","sider_collapsed","hasError","extractTemplate","activeAsideTab","selectedTemplate","editorInstance","mainMenuId","aimvCanvasRef","asideAppShowed","fileList","currentImg","exData","birthday","nation","nohome1","streethome1","wardhome1","districthome1","cityhome1","phonenumber","loading","nlpFlag","treeData","selected","expanded","isTemplate","tmlVisible","modalAction","selectedLabel","selectedTemplateId","combineReducers","auth","action","FETCH_USER","payload","common","CMD_SET_SIDER_COLLAPSED","SET_EDITOR_INSTANCE","SET_MAIN_MENU_ID","SET_CANVAS_REF","SET_AIMV_CANVAS_REF","SET_ACTIVE_ASIDE_TAB","SET_SELECTED_TEMPLATE","GET_EXTRACT_TEMPLATE","CMD_SET_HAS_ERR","err","CMN_TOGGLE_SIDER","TOGGLE_ASDIDE_APP","formReducer","imgUpload","LIST_IMG","IMG_UPLOAD","uid","status","dataExtract","SET_LOADING","SET_NLP_FLAG","SET_CURRENT_IMG","RESET_FORM","EXTRACT_DATA","NAME","BIRTHDAY","NATION","NOHOME1","STREETHOME1","WARDHOME1","DISTRICTHOME1","CITYHOME1","PHONENUMBER","SET_NAME","SET_BIRTHDAY","SET_NATION","SET_NOHOME1","SET_STREETHOME1","SET_WARDHOME1","SET_DISTRICTHOME1","SET_CITYHOME1","SET_PHONENUMBER","tplTree","LOAD_TEMPLTE_TREE","APPEND_EXPANDED","SET_EXPANDED","SET_TEMPLATE_MODAL_VISIBLE","SET_MODAL_ACTION","SET_UPDATING","SET_SELECTED","istemplate","templateId","use","LanguageDetector","load","whitelist","nonExplicitWhitelist","lngs","fallbackLng","interpolation","escapeValue","react","wait","nsMode","defaultNS","resources","en","translation","ko","translationKo","DefaultLayout","lazy","Login","Register","Page404","Page500","App","Suspense","fallback","ImageMapEditor","exact","Boolean","location","hostname","match","store","createStore","reducers","composeWithDevTools","applyMiddleware","reduxThunk","locale","enUS","navigator","serviceWorker","ready","then","registration","unregister","Dragger","Upload","limit","multiple","info","indexOf","newFileList","slice","beforeUpload","tempUrl","getIconHtml","iconClassName","iconStyle","innerIcon","innerColor","innerSize","innerClassName","startsWith","substr","iconHtml","innerIconHtml","Container","leftSider","rightSider","spinning","overflowX","minHeight","FlexBox","classProps","FlexItem","tempCode","ImageMapList","renderActions","idCropping","flex","alignItems","renderItem","selectedItem","Panel","Collapse","NodeProperties","resetFields","bordered","PropertyDefinition","header","showArrow","fontSie","Form","onValuesChange","changedValues","allValues","MapProperties","fetchUser","dispatch","axios","res","api_url","api_token","getExtractTemplate","headers","Authorization","setAimvCanvasRef","setCanvasRef","setMainMenuId","setEditorInstance","toggleSider","toggleAsideApp","setHasError","setSelectedTemplate","setActiveAsideTab","setSiderCollapsed","uploadImg","formData","method","post","imgId","listImg","imgs","delImg","delete","setLoading","resetForm","reset","setCurrentImg","current_img","setNLPFlag","nlp_f","extractData","template_id","image_id","nlp","edata","data_type","evalue","change","loadTplTree","resetTForm","removeTemplateFolder","_id","addNewTemplate","isLeaf","tree","setUpdating","setModalAction","setExpanded","appendExpanded","setTplModalVisible","setSelected","isselected","res1","image_source","area","template_config_fields","field","log","InputJson","debouncedValidate","onValidate","annotation","Error","row","column","readOnly","InputScript","dsiabled","InputTemplate","newLineMode","keyBinding","addKeyboardHandler","hashId","keyString","command","showLineNumbers","maxLines","SVGModal","handleChangeSvgType","handleOk","validateFields","values","Blob","handleCancel","closable","InputHtml","ImageMapFooterToolbar","waitForCanvasRender","events","forceUpdate","preview","onChangePreview","zoomValue","toFixed","borderBottomLeftRadius","borderTopLeftRadius","tooltipTitle","borderBottomRightRadius","borderTopRightRadius","checked","CommonButton","tooltipPlacement","wrapperClassName","wrapperStyle","iconAnimation","ImageMapTitle","flexWrap","String","ImageMapPreview","previewClassName","classnames","overvlow","DataSourceModal","waitForContainerRender","containerRef","validateTitle","DataSourceProperty","DataSourceList","dataSources","onEdit","onDelete","actions","Meta","avatar","DataSources","modalRef","onChangeDataSources","onValid","onClear","UnsafetyWordException","NoExistWordException","excludeWords","includeWords","parameters","SandBox","newCode","toString","word","Function","verify","AnimationList","AnimationModal","initialAnimation","Animations","onChangeAnimations","fields","StyleList","StyleModal","strokeDashArray","Styles","onChangeStyles","ImageMapHeaderToolbar","isCropping","marginLeft","strokeUniform","resource","dashboard","template","effect","progress","editing","descriptors","canvasHandlers","changeEditing","changedKey","changedValue","onChangeWokarea","unicode","uni","fromCodePoint","filterKey","filterValue","compiled","compile","random","count","open","layerX","layerY","SubMenu","transformList","item","newItem","itemsRef","onProgress","onImport","files","showLoading","onprogress","lengthComputable","total","onloadend","onerror","readAsText","onUpload","inputEl","hidden","onchange","onDownload","exportDatas","encodeURIComponent","onSaveImage","shortcutHandlers","okText","cancelText","onConfirm","titleContent","connect"],"mappings":"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","file":"static/js/main.72d526ae.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Popover, Button } from \"antd\";\r\nimport { SketchPicker } from \"react-color\";\r\n\r\nclass ColorPicker extends Component {\r\n  static propTypes = {\r\n    valueType: PropTypes.oneOf([\"string\", \"object\"])\r\n  };\r\n\r\n  static defaultProps = {\r\n    valueType: \"string\"\r\n  };\r\n\r\n  handlers = {\r\n    onChange: color => {\r\n      const { onChange, valueType } = this.props;\r\n      let newColor;\r\n      if (valueType === \"string\") {\r\n        newColor = `rgba(${color.rgb.r},${color.rgb.g},${color.rgb.b},${color.rgb.a})`;\r\n      } else {\r\n        newColor = color.rgb;\r\n      }\r\n      this.setState(\r\n        {\r\n          color: newColor\r\n        },\r\n        () => {\r\n          onChange(newColor);\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  state = {\r\n    color: this.props.value || \"rgba(255, 255, 255, 1)\"\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      color: nextProps.value || this.state.color\r\n    });\r\n  }\r\n\r\n  getBackgroundColor = color => {\r\n    if (typeof color === \"string\") {\r\n      return color;\r\n    }\r\n    return `rgba(${color.r},${color.g},${color.b},${color.a})`;\r\n  };\r\n\r\n  render() {\r\n    const { color } = this.state;\r\n    const { onChange } = this.handlers;\r\n    return (\r\n      <Popover\r\n        trigger=\"click\"\r\n        placement=\"bottom\"\r\n        content={<SketchPicker color={color} onChange={onChange} />}\r\n      >\r\n        <Button\r\n          style={{ background: this.getBackgroundColor(color) }}\r\n          shape=\"circle\"\r\n        />\r\n      </Popover>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ColorPicker;\r\n","import React from \"react\";\r\nimport { Form, Slider, Select, InputNumber, Col, Row } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport ColorPicker from \"../../common/ColorPicker\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={i18n.t(\"imagemap.style.fill-color\")} colon={false}>\r\n          {getFieldDecorator(\"fill\", {\r\n            initialValue: data.fill || \"rgba(0, 0, 0, 1)\"\r\n          })(<ColorPicker />)}\r\n        </Form.Item>\r\n        <Form.Item label={i18n.t(\"common.opacity\")} colon={false}>\r\n          {getFieldDecorator(\"opacity\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 0,\r\n                max: 1\r\n              }\r\n            ],\r\n            initialValue: data.opacity || 1\r\n          })(<Slider min={0} max={1} step={0.1} />)}\r\n        </Form.Item>\r\n        <Form.Item label={i18n.t(\"imagemap.style.stroke-color\")} colon={false}>\r\n          {getFieldDecorator(\"stroke\", {\r\n            initialValue: data.stroke || \"rgba(255, 255, 255, 0)\"\r\n          })(<ColorPicker />)}\r\n        </Form.Item>\r\n        <Form.Item label={i18n.t(\"imagemap.style.stroke-width\")} colon={false}>\r\n          {getFieldDecorator(\"strokeWidth\", {\r\n            initialValue: data.strokeWidth || 1\r\n          })(\r\n            <Select showSearch style={{ width: \"100%\" }}>\r\n              {Array.from({ length: 12 }, (v, k) => {\r\n                const value = k + 1;\r\n                return (\r\n                  <Select.Option key={value} value={value}>\r\n                    {value}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        {data.type === \"rect\" ? (\r\n          <Row gutter={8}>\r\n            <Col md={24} lg={12}>\r\n              <Form.Item label={i18n.t(\"imagemap.style.rx\")} colon={false}>\r\n                {getFieldDecorator(\"rx\", {\r\n                  initialValue: data.rx || 0\r\n                })(<InputNumber min={0} />)}\r\n              </Form.Item>\r\n            </Col>\r\n            <Col md={24} lg={12}>\r\n              <Form.Item label={i18n.t(\"imagemap.style.ry\")} colon={false}>\r\n                {getFieldDecorator(\"ry\", {\r\n                  initialValue: data.ry || 0\r\n                })(<InputNumber min={0} />)}\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Select,\r\n  Switch,\r\n  Slider,\r\n  InputNumber\r\n} from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport ColorPicker from \"../../common/ColorPicker\";\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const type = data.animation.type || \"none\";\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item\r\n          label={i18n.t(\"imagemap.animation.animation-type\")}\r\n          colon={false}\r\n        >\r\n          {getFieldDecorator(\"animation.type\", {\r\n            initialValue: type\r\n          })(\r\n            <Select>\r\n              <Select.Option value=\"none\">\r\n                {i18n.t(\"imagemap.animation.none\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"fade\">\r\n                {i18n.t(\"imagemap.animation.fade\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"bounce\">\r\n                {i18n.t(\"imagemap.animation.bounce\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"shake\">\r\n                {i18n.t(\"imagemap.animation.shake\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"scaling\">\r\n                {i18n.t(\"imagemap.animation.scaling\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"rotation\">\r\n                {i18n.t(\"imagemap.animation.rotation\")}\r\n              </Select.Option>\r\n              <Select.Option value=\"flash\">\r\n                {i18n.t(\"imagemap.animation.flash\")}\r\n              </Select.Option>\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        {type === \"none\" ? null : (\r\n          <React.Fragment>\r\n            <Row>\r\n              <Col span={12}>\r\n                <Form.Item\r\n                  label={i18n.t(\"imagemap.animation.auto-play\")}\r\n                  colon={false}\r\n                >\r\n                  {getFieldDecorator(\"animation.autoplay\", {\r\n                    rules: [\r\n                      {\r\n                        type: \"boolean\"\r\n                      }\r\n                    ],\r\n                    valuePropName: \"checked\",\r\n                    initialValue: data.animation.autoplay\r\n                  })(<Switch size=\"small\" />)}\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={12}>\r\n                <Form.Item label={i18n.t(\"common.loop\")} colon={false}>\r\n                  {getFieldDecorator(\"animation.loop\", {\r\n                    rules: [\r\n                      {\r\n                        type: \"boolean\"\r\n                      }\r\n                    ],\r\n                    valuePropName: \"checked\",\r\n                    initialValue: data.animation.loop\r\n                  })(<Switch size=\"small\" />)}\r\n                </Form.Item>\r\n              </Col>\r\n            </Row>\r\n            {type !== \"shake\" ? (\r\n              <Row>\r\n                <Col span={12}>\r\n                  <Form.Item label={i18n.t(\"common.delay\")} colon={false}>\r\n                    {getFieldDecorator(\"animation.delay\", {\r\n                      rules: [\r\n                        {\r\n                          type: \"number\",\r\n                          min: 100,\r\n                          max: 5000\r\n                        }\r\n                      ],\r\n                      initialValue: data.animation.delay\r\n                    })(<Slider min={100} max={5000} step={100} />)}\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Form.Item label={i18n.t(\"common.duration\")} colon={false}>\r\n                    {getFieldDecorator(\"animation.duration\", {\r\n                      rules: [\r\n                        {\r\n                          type: \"number\",\r\n                          min: 100,\r\n                          max: 5000\r\n                        }\r\n                      ],\r\n                      initialValue: data.animation.duration\r\n                    })(<Slider min={100} max={5000} step={100} />)}\r\n                  </Form.Item>\r\n                </Col>\r\n              </Row>\r\n            ) : null}\r\n            {this.getComponentType(type, data, getFieldDecorator)}\r\n            <Form.Item\r\n              label={i18n.t(\"imagemap.animation.playback\")}\r\n              colon={false}\r\n            >\r\n              <Row>\r\n                <Col span={8}>\r\n                  <Button\r\n                    block\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.play(data.id);\r\n                    }}\r\n                  >\r\n                    <Icon name=\"play\" style={{ marginRight: 8 }} />\r\n                    {i18n.t(\"action.start\")}\r\n                  </Button>\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    block\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.pause(data.id);\r\n                    }}\r\n                  >\r\n                    <Icon name=\"pause\" style={{ marginRight: 8 }} />\r\n                    {i18n.t(\"action.pause\")}\r\n                  </Button>\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    block\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.stop(data.id);\r\n                    }}\r\n                  >\r\n                    <Icon name=\"stop\" style={{ marginRight: 8 }} />\r\n                    {i18n.t(\"action.stop\")}\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Form.Item>\r\n          </React.Fragment>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  },\r\n  getComponentType(type, data, getFieldDecorator) {\r\n    let component;\r\n    if (type === \"fade\") {\r\n      component = (\r\n        <Form.Item label={i18n.t(\"common.opacity\")} colon={false}>\r\n          {getFieldDecorator(\"animation.opacity\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 0,\r\n                max: 1\r\n              }\r\n            ],\r\n            initialValue: data.animation.opacity || 0\r\n          })(<Slider min={0} max={1} step={0.1} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"bounce\") {\r\n      component = (\r\n        <React.Fragment>\r\n          <Form.Item\r\n            label={i18n.t(\"imagemap.animation.bounce-type\")}\r\n            colon={false}\r\n          >\r\n            {getFieldDecorator(\"animation.bounce\", {\r\n              initialValue: data.animation.bounce || \"hotizontal\"\r\n            })(\r\n              <Select>\r\n                <Select.Option value=\"hotizontal\">Horizontal</Select.Option>\r\n                <Select.Option value=\"vertical\">Vertical</Select.Option>\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item label={i18n.t(\"common.offset\")} colon={false}>\r\n            {getFieldDecorator(\"animation.offset\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\",\r\n                  min: 1,\r\n                  max: 10\r\n                }\r\n              ],\r\n              initialValue: data.animation.offset || 1\r\n            })(<Slider min={1} max={10} step={1} />)}\r\n          </Form.Item>\r\n        </React.Fragment>\r\n      );\r\n    } else if (type === \"shake\") {\r\n      component = (\r\n        <React.Fragment>\r\n          <Form.Item\r\n            label={i18n.t(\"imagemap.animation.shake-type\")}\r\n            colon={false}\r\n          >\r\n            {getFieldDecorator(\"animation.shake\", {\r\n              initialValue: data.animation.shake || \"hotizontal\"\r\n            })(\r\n              <Select>\r\n                <Select.Option value=\"hotizontal\">\r\n                  {i18n.t(\"common.horizontal\")}\r\n                </Select.Option>\r\n                <Select.Option value=\"vertical\">\r\n                  {i18n.t(\"common.vertical\")}\r\n                </Select.Option>\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item label={i18n.t(\"common.offset\")} colon={false}>\r\n            {getFieldDecorator(\"animation.offset\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\",\r\n                  min: 1,\r\n                  max: 10\r\n                }\r\n              ],\r\n              initialValue: data.animation.offset || 1\r\n            })(<Slider min={1} max={10} step={1} />)}\r\n          </Form.Item>\r\n        </React.Fragment>\r\n      );\r\n    } else if (type === \"scaling\") {\r\n      component = (\r\n        <Form.Item label={i18n.t(\"imagemap.animation.scaling\")} colon={false}>\r\n          {getFieldDecorator(\"animation.scale\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 1,\r\n                max: 5\r\n              }\r\n            ],\r\n            initialValue: data.animation.scale || 1\r\n          })(<Slider min={1} max={5} step={0.1} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"rotation\") {\r\n      component = (\r\n        <Form.Item label={i18n.t(\"common.angle\")} colon={false}>\r\n          {getFieldDecorator(\"animation.angle\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 0,\r\n                max: 360\r\n              }\r\n            ],\r\n            initialValue: data.animation.angle || data.angle\r\n          })(<Slider min={0} max={360} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"flash\") {\r\n      component = (\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item\r\n              label={i18n.t(\"imagemap.style.fill-color\")}\r\n              colon={false}\r\n            >\r\n              {getFieldDecorator(\"animation.fill\", {\r\n                initialValue: data.animation.fill || data.fill\r\n              })(<ColorPicker />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item\r\n              label={i18n.t(\"imagemap.style.stroke-color\")}\r\n              colon={false}\r\n            >\r\n              {getFieldDecorator(\"animation.stroke\", {\r\n                initialValue: data.animation.stroke || data.stroke\r\n              })(<ColorPicker />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    } else {\r\n      component = (\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.value\")} colon={false}>\r\n              {getFieldDecorator(\"animation.value\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    min: 1,\r\n                    max: 10\r\n                  }\r\n                ],\r\n                initialValue: data.animation.value || 1\r\n              })(<InputNumber min={1} max={10} />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n    return component;\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\n\r\nclass Scrollbar extends Component {\r\n  renderTrack = props => <div {...props} className=\"rde-track-vertical\" />;\r\n\r\n  render() {\r\n    return (\r\n      <Scrollbars renderTrackVertical={this.renderTrack}>\r\n        {this.props.children}\r\n      </Scrollbars>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Scrollbar;\r\n","import { fabric } from \"fabric\";\r\nimport \"gifler\";\r\n\r\nconst Gif = fabric.util.createClass(fabric.Object, {\r\n  type: \"gif\",\r\n  superType: \"image\",\r\n  gifCanvas: null,\r\n  isStarted: false,\r\n  initialize(options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n    this.gifCanvas = document.createElement(\"canvas\");\r\n  },\r\n  drawFrame(ctx: CanvasRenderingContext2D, frame: any) {\r\n    // update canvas size\r\n    this.gifCanvas.width = frame.width;\r\n    this.gifCanvas.height = frame.height;\r\n    // update canvas that we are using for fabric.js\r\n    ctx.drawImage(\r\n      frame.buffer,\r\n      -frame.width / 2,\r\n      -frame.height / 2,\r\n      frame.width,\r\n      frame.height\r\n    );\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    if (!this.isStarted) {\r\n      this.isStarted = true;\r\n      window\r\n        .gifler(\"./images/sample/earth.gif\")\r\n        .frames(this.gifCanvas, (_c: CanvasRenderingContext2D, frame: any) => {\r\n          this.isStarted = true;\r\n          this.drawFrame(ctx, frame);\r\n        });\r\n    }\r\n  }\r\n});\r\n\r\nGif.fromObject = (options: any, callback: (obj: any) => any) => {\r\n  return callback(new Gif(options));\r\n};\r\n\r\nwindow.fabric.Gif = Gif;\r\n\r\nexport default Gif;\r\n","import { fabric } from \"fabric\";\r\n\r\nconst Arrow = fabric.util.createClass(fabric.Line, {\r\n  type: \"arrow\",\r\n  superType: \"drawing\",\r\n  initialize(points: any, options: any) {\r\n    if (!points) {\r\n      const { x1, x2, y1, y2 } = options;\r\n      points = [x1, y1, x2, y2];\r\n    }\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", points, options);\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    ctx.save();\r\n    const xDiff = this.x2 - this.x1;\r\n    const yDiff = this.y2 - this.y1;\r\n    const angle = Math.atan2(yDiff, xDiff);\r\n    ctx.translate((this.x2 - this.x1) / 2, (this.y2 - this.y1) / 2);\r\n    ctx.rotate(angle);\r\n    ctx.beginPath();\r\n    // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n    ctx.moveTo(5, 0);\r\n    ctx.lineTo(-5, 5);\r\n    ctx.lineTo(-5, -5);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.stroke;\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n});\r\n\r\nArrow.fromObject = (options: any, callback: any) => {\r\n  const { x1, x2, y1, y2 } = options;\r\n  return callback(new Arrow([x1, y1, x2, y2], options));\r\n};\r\n\r\nwindow.fabric.Arrow = Arrow;\r\n\r\nexport default Arrow;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { IFilter } from \"../handlers/ImageHandler\";\r\n\r\nexport type AnimationType =\r\n  | \"fade\"\r\n  | \"bounce\"\r\n  | \"shake\"\r\n  | \"scaling\"\r\n  | \"rotation\"\r\n  | \"flash\"\r\n  | \"none\";\r\n\r\nexport interface AnimationProperty {\r\n  delay?: number;\r\n  duration?: number;\r\n  autoplay?: boolean;\r\n  loop?: boolean | number;\r\n  type: AnimationType;\r\n  offset?: number;\r\n  opacity?: number;\r\n  bounce?: \"vertical\" | \"horizontal\";\r\n  shake?: \"vertical\" | \"horizontal\";\r\n  scale?: number;\r\n  angle?: number;\r\n  fill?: string | fabric.Pattern;\r\n  stroke?: string;\r\n}\r\n\r\nexport interface LinkProperty {\r\n  enabled?: boolean;\r\n  type?: \"resource\" | \"alarm\";\r\n  state?: \"new\" | \"tab\";\r\n  dashboard?: any;\r\n}\r\n\r\nexport interface TooltipProperty {\r\n  enabled?: boolean;\r\n  type?: \"resource\" | \"alarm\";\r\n  template?: string;\r\n}\r\n\r\nexport interface TriggerProperty {\r\n  enabled?: boolean;\r\n  type?: \"resource\" | \"alarm\";\r\n  script?: string;\r\n  effect?: \"style\" | \"animation\";\r\n}\r\n\r\nexport interface FabricCanvasOption {\r\n  wrapperEl?: HTMLElement;\r\n}\r\n\r\nexport type FabricCanvas<T extends any = fabric.Canvas> = T &\r\n  FabricCanvasOption;\r\n\r\nexport type FabricObjectOption<T extends any = fabric.IObjectOptions> = T & {\r\n  /**\r\n   * Object id\r\n   * @type {string}\r\n   */\r\n  id?: string;\r\n  /**\r\n   * Parent object id\r\n   * @type {string}\r\n   */\r\n  parentId?: string;\r\n  /**\r\n   * Original opacity\r\n   * @type {number}\r\n   */\r\n  originOpacity?: number;\r\n  /**\r\n   * Original top position\r\n   * @type {number}\r\n   */\r\n  originTop?: number;\r\n  /**\r\n   * Original left position\r\n   * @type {number}\r\n   */\r\n  originLeft?: number;\r\n  /**\r\n   * Original scale X\r\n   * @type {number}\r\n   */\r\n  originScaleX?: number;\r\n  /**\r\n   * Original scale Y\r\n   * @type {number}\r\n   */\r\n  originScaleY?: number;\r\n  /**\r\n   * Original angle\r\n   * @type {number}\r\n   */\r\n  originAngle?: number;\r\n  /**\r\n   * Original fill color\r\n   * @type {(string | fabric.Pattern)}\r\n   */\r\n  originFill?: string | fabric.Pattern;\r\n  /**\r\n   * Original stroke color\r\n   * @type {string}\r\n   */\r\n  originStroke?: string;\r\n  /**\r\n   * Object editable\r\n   * @type {boolean}\r\n   */\r\n  editable?: boolean;\r\n  /**\r\n   * Object Super type\r\n   * @type {string}\r\n   */\r\n  superType?: string;\r\n  /**\r\n   * @description\r\n   * @type {string}\r\n   */\r\n  description?: string;\r\n  /**\r\n   * Animation property\r\n   * @type {AnimationProperty}\r\n   */\r\n  animation?: AnimationProperty;\r\n  /**\r\n   * Anime instance\r\n   * @type {anime.AnimeInstance}\r\n   */\r\n  anime?: anime.AnimeInstance;\r\n  /**\r\n   * Trigger property\r\n   * @type {TriggerProperty}\r\n   */\r\n  trigger?: TriggerProperty;\r\n  /**\r\n   * Tooltip property\r\n   * @type {TooltipProperty}\r\n   */\r\n  tooltip?: TooltipProperty;\r\n  /**\r\n   * Link property\r\n   * @type {LinkProperty}\r\n   */\r\n  link?: LinkProperty;\r\n  /**\r\n   * Is running animation\r\n   * @type {boolean}\r\n   */\r\n  animating?: boolean;\r\n  /**\r\n   * Object class\r\n   * @type {string}\r\n   */\r\n  class?: string;\r\n  /**\r\n   * Is possible delete\r\n   * @type {boolean}\r\n   */\r\n  deletable?: boolean;\r\n  /**\r\n   * Is enable double click\r\n   * @type {boolean}\r\n   */\r\n  dblclick?: boolean;\r\n  /**\r\n   * Is possible clone\r\n   * @type {boolean}\r\n   */\r\n  cloneable?: boolean;\r\n  /**\r\n   * Is locked object\r\n   * @type {boolean}\r\n   */\r\n  locked?: boolean;\r\n  [key: string]: any;\r\n};\r\n\r\nexport type FabricObject<T extends any = fabric.Object> = T &\r\n  FabricObjectOption;\r\n\r\nexport type FabricGroup = FabricObject<fabric.Group> & {\r\n  /**\r\n   * Object that config group\r\n   * @type {FabricObject[]}\r\n   */\r\n  objects?: FabricObject[];\r\n};\r\n\r\nexport type FabricImage = FabricObject &\r\n  Omit<fabric.Image, \"filters\"> & {\r\n    /**\r\n     * Image URL\r\n     * @type {string}\r\n     */\r\n    src?: string;\r\n    /**\r\n     * Image File or Blob\r\n     * @type {File}\r\n     */\r\n    file?: File;\r\n    /**\r\n     * Image Filter\r\n     * @type {IFilter[]}\r\n     */\r\n    filters?: IFilter[];\r\n  };\r\n\r\nexport interface FabricElement extends FabricObject<fabric.Rect> {\r\n  /**\r\n   * Wrapped Element\r\n   * @type {HTMLDivElement}\r\n   */\r\n  container: HTMLDivElement;\r\n  /**\r\n   * Target Element\r\n   * @type {HTMLDivElement}\r\n   */\r\n  element: HTMLDivElement;\r\n  /**\r\n   * Source of Element Object\r\n   */\r\n  setSource: (source: any) => void;\r\n}\r\n\r\nexport type WorkareaLayout = \"fixed\" | \"responsive\" | \"fullscreen\";\r\n\r\nexport interface WorkareaOption {\r\n  /**\r\n   * Image URL\r\n   * @type {string}\r\n   */\r\n  src?: string;\r\n  /**\r\n   * Image File or Blbo\r\n   * @type {File}\r\n   */\r\n  file?: File;\r\n  /**\r\n   * Workarea Width\r\n   * @type {number}\r\n   */\r\n  width?: number;\r\n  /**\r\n   * Workarea Height\r\n   * @type {number}\r\n   */\r\n  height?: number;\r\n  /**\r\n   * Workarea Background Color\r\n   * @type {string}\r\n   */\r\n  backgroundColor?: string;\r\n  /**\r\n   * Workarea Layout Type\r\n   * @type {WorkareaLayout}\r\n   */\r\n  layout?: WorkareaLayout;\r\n}\r\n\r\nexport type WorkareaObject = FabricImage & {\r\n  /**\r\n   * Workarea Layout Type\r\n   * @type {WorkareaLayout}\r\n   */\r\n  layout?: WorkareaLayout;\r\n  /**\r\n   * Workarea Image Element\r\n   * @type {HTMLImageElement}\r\n   */\r\n  _element?: HTMLImageElement;\r\n  /**\r\n   * Whether exist the element\r\n   * @type {boolean}\r\n   */\r\n  isElement?: boolean;\r\n  /**\r\n   * Stored width in workarea\r\n   * @type {number}\r\n   */\r\n  workareaWidth?: number;\r\n  /**\r\n   * Stored height in workarea\r\n   * @type {number}\r\n   */\r\n  workareaHeight?: number;\r\n};\r\n\r\nexport interface CanvasOption {\r\n  /**\r\n   * Unique id of Canvas\r\n   * @type {string}\r\n   */\r\n  id?: string;\r\n  /**\r\n   * Indicates whether objects should remain in current stack position when selected. When false objects are brought to top and rendered as part of the selection group\r\n   * @type {boolean}\r\n   */\r\n  preserveObjectStacking?: boolean;\r\n  /**\r\n   * Canvas width\r\n   * @type {number}\r\n   */\r\n  width?: number;\r\n  /**\r\n   * Canvas height\r\n   * @type {number}\r\n   */\r\n  height?: number;\r\n  /**\r\n   * Whether group selection should be enabled\r\n   * @type {boolean}\r\n   */\r\n  selection?: boolean;\r\n  /**\r\n   * Default mouse cursor of Canvas\r\n   * @type {string}\r\n   */\r\n  defaultCursor?: string;\r\n  /**\r\n   * Background color of Canvas\r\n   * @type {(string | fabric.Pattern)}\r\n   */\r\n  backgroundColor?: string | fabric.Pattern;\r\n}\r\n\r\nexport interface GridOption {\r\n  /**\r\n   * Whether should be enabled\r\n   * @type {boolean}\r\n   */\r\n  enabled?: boolean;\r\n  /**\r\n   * Grid interval\r\n   * @type {number}\r\n   */\r\n  grid?: number;\r\n  /**\r\n   * When had moved object, whether should adjust position on grid interval\r\n   * @type {boolean}\r\n   */\r\n  snapToGrid?: boolean;\r\n}\r\n\r\nexport interface GuidelineOption {\r\n  /**\r\n   * When have moved object, whether should show guideline\r\n   * @type {boolean}\r\n   */\r\n  enabled?: boolean;\r\n}\r\n\r\nexport interface KeyEvent {\r\n  /**\r\n   * Arrow key\r\n   * @type {boolean}\r\n   */\r\n  move?: boolean;\r\n  /**\r\n   * Ctrl + A\r\n   * @type {boolean}\r\n   */\r\n  all?: boolean;\r\n  /**\r\n   * Ctrl + C\r\n   * @type {boolean}\r\n   */\r\n  copy?: boolean;\r\n  /**\r\n   * Ctrl + P\r\n   * @type {boolean}\r\n   */\r\n  paste?: boolean;\r\n  /**\r\n   * Escape\r\n   * @type {boolean}\r\n   */\r\n  esc?: boolean;\r\n  /**\r\n   * Delete or Backspace\r\n   * @type {boolean}\r\n   */\r\n  del?: boolean;\r\n  /**\r\n   * When have copied object, whether should copy object option on clipboard\r\n   * @type {boolean}\r\n   */\r\n  clipboard?: boolean;\r\n  /**\r\n   * Ctrl + Z, Ctrl + Y\r\n   * @type {boolean}\r\n   */\r\n  transaction?: boolean;\r\n  /**\r\n   * Plus, Minus\r\n   *\r\n   * @type {boolean}\r\n   */\r\n  zoom?: boolean;\r\n  /**\r\n   * Ctrl + X\r\n   *\r\n   * @type {boolean}\r\n   */\r\n  cut?: boolean;\r\n}\r\n\r\nexport type InteractionMode =\r\n  | \"selection\"\r\n  | \"grab\"\r\n  | \"polygon\"\r\n  | \"line\"\r\n  | \"arrow\"\r\n  | \"link\"\r\n  | \"crop\";\r\n\r\nexport interface FabricEvent<T extends any = Event>\r\n  extends Omit<fabric.IEvent, \"e\"> {\r\n  e: T;\r\n  target?: FabricObject;\r\n  subTargets?: FabricObject[];\r\n  button?: number;\r\n  isClick?: boolean;\r\n  pointer?: fabric.Point;\r\n  absolutePointer?: fabric.Point;\r\n  transform?: {\r\n    corner: string;\r\n    original: FabricObject;\r\n    originX: string;\r\n    originY: string;\r\n    width: number;\r\n  };\r\n}\r\n\r\n/**\r\n * toObject util\r\n * @param {*} obj\r\n * @param {string[]} propertiesToInclude\r\n * @param {{ [key: string]: any }} [properties]\r\n */\r\nexport const toObject = (\r\n  obj: any,\r\n  propertiesToInclude: string[],\r\n  properties?: { [key: string]: any }\r\n) =>\r\n  fabric.util.object.extend(\r\n    obj.callSuper(\"toObject\"),\r\n    propertiesToInclude.reduce(\r\n      (prev, property) =>\r\n        Object.assign(prev, {\r\n          [property]: obj.get(property)\r\n        }),\r\n      Object.assign({}, properties)\r\n    )\r\n  );\r\n","import { fabric } from \"fabric\";\r\nimport * as echarts from \"echarts\";\r\n\r\nimport { toObject, FabricElement } from \"../utils\";\r\n\r\nexport interface ChartObject extends FabricElement {\r\n  setSource: (source: echarts.EChartOption) => void;\r\n  setChartOption: (chartOption: echarts.EChartOption) => void;\r\n  chartOption: echarts.EChartOption;\r\n  instance: echarts.ECharts;\r\n}\r\n\r\nconst Chart = fabric.util.createClass(fabric.Rect, {\r\n  type: \"chart\",\r\n  superType: \"element\",\r\n  hasRotatingPoint: false,\r\n  initialize(chartOption: echarts.EChartOption, options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n    this.set({\r\n      chartOption,\r\n      fill: \"rgba(255, 255, 255, 0)\",\r\n      stroke: \"rgba(255, 255, 255, 0)\"\r\n    });\r\n  },\r\n  setSource(source: echarts.EChartOption | string) {\r\n    if (typeof source === \"string\") {\r\n      this.setChartOptionStr(source);\r\n    } else {\r\n      this.setChartOption(source);\r\n    }\r\n  },\r\n  setChartOptionStr(chartOptionStr: string) {\r\n    this.set({\r\n      chartOptionStr\r\n    });\r\n  },\r\n  setChartOption(chartOption: echarts.EChartOption) {\r\n    this.set({\r\n      chartOption\r\n    });\r\n    this.distroyChart();\r\n    this.createChart(chartOption);\r\n  },\r\n  createChart(chartOption: echarts.EChartOption) {\r\n    this.instance = echarts.init(this.element);\r\n    if (!chartOption) {\r\n      this.instance.setOption({\r\n        xAxis: {},\r\n        yAxis: {},\r\n        series: [\r\n          {\r\n            type: \"line\",\r\n            data: [\r\n              [0, 1],\r\n              [1, 2],\r\n              [2, 3],\r\n              [3, 4]\r\n            ]\r\n          }\r\n        ]\r\n      });\r\n    } else {\r\n      this.instance.setOption(chartOption);\r\n    }\r\n  },\r\n  distroyChart() {\r\n    if (this.instance) {\r\n      this.instance.dispose();\r\n    }\r\n  },\r\n  toObject(propertiesToInclude: string[]) {\r\n    return toObject(this, propertiesToInclude, {\r\n      chartOption: this.get(\"chartOption\"),\r\n      container: this.get(\"container\"),\r\n      editable: this.get(\"editable\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    if (!this.instance) {\r\n      const {\r\n        id,\r\n        scaleX,\r\n        scaleY,\r\n        width,\r\n        height,\r\n        angle,\r\n        editable,\r\n        chartOption\r\n      } = this;\r\n      const zoom = this.canvas.getZoom();\r\n      const left = this.calcCoords().tl.x;\r\n      const top = this.calcCoords().tl.y;\r\n      const padLeft = (width * scaleX * zoom - width) / 2;\r\n      const padTop = (height * scaleY * zoom - height) / 2;\r\n      this.element = fabric.util.makeElement(\"div\", {\r\n        id: `${id}_container`,\r\n        style: `transform: rotate(${angle}deg) scale(${scaleX *\r\n          zoom}, ${scaleY * zoom});\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left + padLeft}px;\r\n                        top: ${top + padTop}px;\r\n                        position: absolute;\r\n                        user-select: ${editable ? \"none\" : \"auto\"};\r\n                        pointer-events: ${editable ? \"none\" : \"auto\"};`\r\n      }) as HTMLDivElement;\r\n      this.createChart(chartOption);\r\n      const container = document.getElementById(this.container);\r\n      container.appendChild(this.element);\r\n    }\r\n  }\r\n});\r\n\r\nChart.fromObject = (\r\n  options: ChartObject,\r\n  callback: (obj: ChartObject) => any\r\n) => {\r\n  return callback(new Chart(options.chartOption, options));\r\n};\r\n\r\nwindow.fabric.Chart = Chart;\r\n\r\nexport default Chart;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { toObject, FabricElement } from \"../utils\";\r\n\r\nexport interface Code {\r\n  html: string;\r\n  css: string;\r\n  js: string;\r\n}\r\n\r\nexport interface ElementObject extends FabricElement {\r\n  setSource: (source: Code) => void;\r\n  setCode: (code: Code) => void;\r\n  code: Code;\r\n}\r\n\r\nconst initialCode: Code = {\r\n  html: \"\",\r\n  css: \"\",\r\n  js: \"\"\r\n};\r\n\r\nconst Element = fabric.util.createClass(fabric.Rect, {\r\n  type: \"element\",\r\n  superType: \"element\",\r\n  hasRotatingPoint: false,\r\n  initialize(code = initialCode, options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n    this.set({\r\n      code,\r\n      fill: \"rgba(255, 255, 255, 0)\",\r\n      stroke: \"rgba(255, 255, 255, 0)\"\r\n    });\r\n  },\r\n  setSource(source: any) {\r\n    this.setCode(source);\r\n  },\r\n  setCode(code = initialCode) {\r\n    this.set({\r\n      code\r\n    });\r\n    const { css, js, html } = code;\r\n    this.styleEl.innerHTML = css;\r\n    this.scriptEl.innerHTML = js;\r\n    this.element.innerHTML = html;\r\n  },\r\n  toObject(propertiesToInclude: string[]) {\r\n    return toObject(this, propertiesToInclude, {\r\n      code: this.get(\"code\"),\r\n      container: this.get(\"container\"),\r\n      editable: this.get(\"editable\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    if (!this.element) {\r\n      const { id, scaleX, scaleY, width, height, angle, editable, code } = this;\r\n      const zoom = this.canvas.getZoom();\r\n      const left = this.calcCoords().tl.x;\r\n      const top = this.calcCoords().tl.y;\r\n      const padLeft = (width * scaleX * zoom - width) / 2;\r\n      const padTop = (height * scaleY * zoom - height) / 2;\r\n      this.element = fabric.util.makeElement(\"div\", {\r\n        id: `${id}_container`,\r\n        style: `transform: rotate(${angle}deg) scale(${scaleX *\r\n          zoom}, ${scaleY * zoom});\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left + padLeft}px;\r\n                        top: ${top + padTop}px;\r\n                        position: absolute;\r\n                        user-select: ${editable ? \"none\" : \"auto\"};\r\n                        pointer-events: ${editable ? \"none\" : \"auto\"};`\r\n      }) as HTMLDivElement;\r\n      const { html, css, js } = code;\r\n      this.styleEl = document.createElement(\"style\");\r\n      this.styleEl.id = `${id}_style`;\r\n      this.styleEl.type = \"text/css\";\r\n      this.styleEl.innerHTML = css;\r\n      document.head.appendChild(this.styleEl);\r\n\r\n      this.scriptEl = document.createElement(\"script\");\r\n      this.scriptEl.id = `${id}_script`;\r\n      this.scriptEl.type = \"text/javascript\";\r\n      this.scriptEl.innerHTML = js;\r\n      document.head.appendChild(this.scriptEl);\r\n\r\n      const container = document.getElementById(this.container);\r\n      container.appendChild(this.element);\r\n      this.element.innerHTML = html;\r\n    }\r\n  }\r\n});\r\n\r\nElement.fromObject = (\r\n  options: ElementObject,\r\n  callback: (obj: ElementObject) => any\r\n) => {\r\n  return callback(new Element(options.code, options));\r\n};\r\n\r\nwindow.fabric.Element = Element;\r\n\r\nexport default Element;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { toObject, FabricElement } from \"../utils\";\r\n\r\nexport interface IframeObject extends FabricElement {\r\n  setSource: (source: string) => void;\r\n  setSrc: (src: string) => void;\r\n  src: string;\r\n  iframeElement: HTMLIFrameElement;\r\n}\r\n\r\nconst Iframe = fabric.util.createClass(fabric.Rect, {\r\n  type: \"iframe\",\r\n  superType: \"element\",\r\n  hasRotatingPoint: false,\r\n  initialize(src: string = \"\", options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n    this.set({\r\n      src,\r\n      fill: \"rgba(255, 255, 255, 0)\",\r\n      stroke: \"rgba(255, 255, 255, 0)\"\r\n    });\r\n  },\r\n  setSource(source: any) {\r\n    this.setSrc(source);\r\n  },\r\n  setSrc(src: string) {\r\n    this.set({\r\n      src\r\n    });\r\n    this.iframeElement.src = src;\r\n  },\r\n  toObject(propertiesToInclude: string[]) {\r\n    return toObject(this, propertiesToInclude, {\r\n      src: this.get(\"src\"),\r\n      container: this.get(\"container\"),\r\n      editable: this.get(\"editable\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    if (!this.element) {\r\n      const { id, scaleX, scaleY, width, height, angle, editable, src } = this;\r\n      const zoom = this.canvas.getZoom();\r\n      const left = this.calcCoords().tl.x;\r\n      const top = this.calcCoords().tl.y;\r\n      const padLeft = (width * scaleX * zoom - width) / 2;\r\n      const padTop = (height * scaleY * zoom - height) / 2;\r\n      this.iframeElement = fabric.util.makeElement(\"iframe\", {\r\n        id,\r\n        src,\r\n        width: \"100%\",\r\n        height: \"100%\"\r\n      });\r\n      this.element = fabric.util.wrapElement(this.iframeElement, \"div\", {\r\n        id: `${id}_container`,\r\n        style: `transform: rotate(${angle}deg) scale(${scaleX *\r\n          zoom}, ${scaleY * zoom});\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left + padLeft}px;\r\n                        top: ${top + padTop}px;\r\n                        position: absolute;\r\n                        user-select: ${editable ? \"none\" : \"auto\"};\r\n                        pointer-events: ${editable ? \"none\" : \"auto\"};`\r\n      }) as HTMLDivElement;\r\n      const container = document.getElementById(this.container);\r\n      container.appendChild(this.element);\r\n    }\r\n  }\r\n});\r\n\r\nIframe.fromObject = (\r\n  options: IframeObject,\r\n  callback: (obj: IframeObject) => any\r\n) => {\r\n  return callback(new Iframe(options.src, options));\r\n};\r\n\r\nwindow.fabric.Iframe = Iframe;\r\n\r\nexport default Iframe;\r\n","import { fabric } from \"fabric\";\r\nimport \"mediaelement\";\r\nimport \"mediaelement/build/mediaelementplayer.min.css\";\r\nimport { toObject, FabricElement } from \"../utils\";\r\n\r\ndeclare class MediaElementPlayer {\r\n  constructor(\r\n    id: string,\r\n    options: {\r\n      pauseOtherPlayers: boolean;\r\n      videoWidth: string;\r\n      videoHeight: string;\r\n      success: (mediaeElement: any, originalNode: any, instance: any) => void;\r\n    }\r\n  );\r\n}\r\n\r\nexport interface VideoObject extends FabricElement {\r\n  setSource: (source: string | File) => void;\r\n  setFile: (file: File) => void;\r\n  setSrc: (src: string) => void;\r\n  file?: File;\r\n  src?: string;\r\n  videoElement?: HTMLVideoElement;\r\n  player?: any;\r\n}\r\n\r\nconst Video = fabric.util.createClass(fabric.Rect, {\r\n  type: \"video\",\r\n  superType: \"element\",\r\n  hasRotatingPoint: false,\r\n  initialize(source: string | File, options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n    if (source instanceof File) {\r\n      this.set({\r\n        file: source,\r\n        src: null\r\n      });\r\n    } else {\r\n      this.set({\r\n        file: null,\r\n        src: source\r\n      });\r\n    }\r\n    this.set({\r\n      fill: \"rgba(255, 255, 255, 0)\",\r\n      stroke: \"rgba(255, 255, 255, 0)\"\r\n    });\r\n  },\r\n  setSource(source: any) {\r\n    if (source instanceof File) {\r\n      this.setFile(source);\r\n    } else {\r\n      this.setSrc(source);\r\n    }\r\n  },\r\n  setFile(file: File) {\r\n    this.set({\r\n      file,\r\n      src: null\r\n    });\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      this.player.setSrc(reader.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  },\r\n  setSrc(src: string) {\r\n    this.set({\r\n      file: null,\r\n      src\r\n    });\r\n    this.player.setSrc(src);\r\n  },\r\n  toObject(propertiesToInclude: string[]) {\r\n    return toObject(this, propertiesToInclude, {\r\n      src: this.get(\"src\"),\r\n      file: this.get(\"file\"),\r\n      container: this.get(\"container\"),\r\n      editable: this.get(\"editable\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    if (!this.element) {\r\n      const {\r\n        id,\r\n        scaleX,\r\n        scaleY,\r\n        width,\r\n        height,\r\n        angle,\r\n        editable,\r\n        src,\r\n        file,\r\n        autoplay,\r\n        muted,\r\n        loop\r\n      } = this;\r\n      const zoom = this.canvas.getZoom();\r\n      const left = this.calcCoords().tl.x;\r\n      const top = this.calcCoords().tl.y;\r\n      const padLeft = (width * scaleX * zoom - width) / 2;\r\n      const padTop = (height * scaleY * zoom - height) / 2;\r\n      this.videoElement = fabric.util.makeElement(\"video\", {\r\n        id,\r\n        autoplay: editable ? false : autoplay,\r\n        muted: editable ? false : muted,\r\n        loop: editable ? false : loop,\r\n        preload: \"none\",\r\n        controls: false\r\n      });\r\n      this.element = fabric.util.wrapElement(this.videoElement, \"div\", {\r\n        id: `${id}_container`,\r\n        style: `transform: rotate(${angle}deg) scale(${scaleX *\r\n          zoom}, ${scaleY * zoom});\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left + padLeft}px;\r\n                        top: ${top + padTop}px;\r\n                        position: absolute;\r\n                        user-select: ${editable ? \"none\" : \"auto\"};\r\n                        pointer-events: ${editable ? \"none\" : \"auto\"};`\r\n      }) as HTMLDivElement;\r\n      const container = document.getElementById(this.container);\r\n      container.appendChild(this.element);\r\n      this.player = new MediaElementPlayer(id, {\r\n        pauseOtherPlayers: false,\r\n        videoWidth: \"100%\",\r\n        videoHeight: \"100%\",\r\n        success: (_mediaeElement: any, _originalNode: any, instance: any) => {\r\n          if (editable) {\r\n            instance.pause();\r\n          }\r\n        }\r\n      });\r\n      this.player.setPlayerSize(width, height);\r\n      if (src) {\r\n        this.setSrc(src);\r\n      } else if (file) {\r\n        this.setFile(file);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nVideo.fromObject = (\r\n  options: VideoObject,\r\n  callback: (obj: VideoObject) => any\r\n) => {\r\n  return callback(new Video(options.src || options.file, options));\r\n};\r\n\r\nwindow.fabric.Video = Video;\r\n\r\nexport default Video;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { FabricObject } from \"../utils\";\r\nimport { LinkObject } from \"./Link\";\r\n\r\nexport interface PortObject extends FabricObject<fabric.Rect> {\r\n  links?: LinkObject[];\r\n  nodeId?: string;\r\n  enabled?: boolean;\r\n}\r\n\r\nconst Port = fabric.util.createClass(fabric.Rect, {\r\n  type: \"port\",\r\n  superType: \"port\",\r\n  initialize(options: any) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", options);\r\n  },\r\n  toObject() {\r\n    return fabric.util.object.extend(this.callSuper(\"toObject\"), {\r\n      id: this.get(\"id\"),\r\n      superType: this.get(\"superType\"),\r\n      enabled: this.get(\"enabled\"),\r\n      nodeId: this.get(\"nodeId\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n  }\r\n});\r\n\r\nPort.fromObject = (options: PortObject, callback: (obj: PortObject) => any) => {\r\n  return callback(new Port(options));\r\n};\r\n\r\n// @ts-ignore\r\nwindow.fabric.Port = Port;\r\n\r\nexport default Port;\r\n","import { fabric } from \"fabric\";\r\nimport uuid from \"uuid\";\r\nimport i18next from \"i18next\";\r\n\r\nimport { FabricObject } from \"../utils\";\r\nimport { LinkObject } from \"./Link\";\r\nimport Port, { PortObject } from \"./Port\";\r\n\r\nexport const NODE_COLORS = {\r\n  TRIGGER: {\r\n    fill: \"#48C9B0\",\r\n    border: \"#1ABC9C\"\r\n  },\r\n  LOGIC: {\r\n    fill: \"#AF7AC5\",\r\n    border: \"#9B59B6\"\r\n  },\r\n  DATA: {\r\n    fill: \"#5DADE2\",\r\n    border: \"#3498DB\"\r\n  },\r\n  ACTION: {\r\n    fill: \"#F5B041\",\r\n    border: \"rgb(243, 156, 18)\"\r\n  }\r\n};\r\n\r\nexport const OUT_PORT_TYPE = {\r\n  SINGLE: \"SINGLE\",\r\n  STATIC: \"STATIC\",\r\n  DYNAMIC: \"DYNAMIC\",\r\n  BROADCAST: \"BROADCAST\",\r\n  NONE: \"NONE\"\r\n};\r\n\r\nexport const DESCRIPTIONS = {\r\n  script: i18next.t(\"common.name\"),\r\n  template: i18next.t(\"common.name\"),\r\n  json: i18next.t(\"common.name\"),\r\n  cron: i18next.t(\"common.name\")\r\n};\r\n\r\nexport const getEllipsis = (text: string, length: number) => {\r\n  if (!length) {\r\n    return /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(text)\r\n      ? text.length > 8\r\n        ? text.substring(0, 8).concat(\"...\")\r\n        : text\r\n      : text.length > 15\r\n      ? text.substring(0, 15).concat(\"...\")\r\n      : text;\r\n  }\r\n  return /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(text)\r\n    ? text.length > length / 2\r\n      ? text.substring(0, length / 2).concat(\"...\")\r\n      : text\r\n    : text.length > length\r\n    ? text.substring(0, length).concat(\"...\")\r\n    : text;\r\n};\r\n\r\nexport type NodeType = \"TRIGGER\" | \"LOGIC\" | \"DATA\" | \"ACTION\";\r\n\r\nexport interface NodeObject extends FabricObject<fabric.Group> {\r\n  errorFlag?: fabric.IText;\r\n  label?: fabric.Text;\r\n  toPort?: PortObject;\r\n  errors?: any;\r\n  fromPort?: PortObject[];\r\n  descriptor?: Record<string, any>;\r\n  nodeClazz?: string;\r\n  configuration?: Record<string, any>;\r\n  defaultPortOption?: () => Partial<PortObject>;\r\n  toPortOption?: () => Partial<PortObject>;\r\n  fromPortOption?: () => Partial<PortObject>;\r\n  createToPort?: (left: number, top: number) => PortObject;\r\n  createFromPort?: (left: number, top: number) => PortObject[];\r\n  singlePort?: (portOption: Partial<PortObject>) => PortObject[];\r\n  staticPort?: (portOption: Partial<PortObject>) => PortObject[];\r\n  dynamicPort?: (portOption: Partial<PortObject>) => PortObject[];\r\n  broadcastPort?: (portOption: Partial<PortObject>) => PortObject[];\r\n  setErrors?: (errors: any) => void;\r\n  duplicate?: () => NodeObject;\r\n}\r\n\r\nconst Node = fabric.util.createClass(fabric.Group, {\r\n  type: \"node\",\r\n  superType: \"node\",\r\n  initialize(options: any) {\r\n    options = options || {};\r\n    const icon = new fabric.IText(options.icon || \"\\uE174\", {\r\n      fontFamily: \"Font Awesome 5 Free\",\r\n      fontWeight: 900,\r\n      fontSize: 20,\r\n      fill: \"rgba(255, 255, 255, 0.8)\"\r\n    });\r\n    let name = \"Default Node\";\r\n    if (options.name) {\r\n      name = getEllipsis(options.name, 18);\r\n    }\r\n    this.label = new fabric.Text(name || \"Default Node\", {\r\n      fontSize: 16,\r\n      fontFamily: \"polestar\",\r\n      fontWeight: 500,\r\n      fill: \"rgba(255, 255, 255, 0.8)\"\r\n    });\r\n    const rect = new fabric.Rect({\r\n      rx: 10,\r\n      ry: 10,\r\n      width: 200,\r\n      height: 40,\r\n      fill: options.fill || \"rgba(0, 0, 0, 0.3)\",\r\n      stroke: options.stroke || \"rgba(0, 0, 0, 0)\",\r\n      strokeWidth: 2\r\n    });\r\n    this.errorFlag = new fabric.IText(\"\\uf071\", {\r\n      fontFamily: \"Font Awesome 5 Free\",\r\n      fontWeight: 900,\r\n      fontSize: 14,\r\n      fill: \"rgba(255, 0, 0, 0.8)\",\r\n      visible: options.errors\r\n    });\r\n    const node = [rect, icon, this.label, this.errorFlag];\r\n    const option = Object.assign({}, options, {\r\n      id: options.id || uuid(),\r\n      width: 200,\r\n      height: 40,\r\n      originX: \"left\",\r\n      originY: \"top\",\r\n      hasRotatingPoint: false,\r\n      hasControls: false\r\n    });\r\n    this.callSuper(\"initialize\", node, option);\r\n    icon.set({\r\n      top: icon.top + 10,\r\n      left: icon.left + 10\r\n    });\r\n    this.label.set({\r\n      top: this.label.top + this.label.height / 2 + 4,\r\n      left: this.label.left + 35\r\n    });\r\n    this.errorFlag.set({\r\n      left: rect.left,\r\n      top: rect.top,\r\n      visible: options.errors\r\n    });\r\n  },\r\n  toObject() {\r\n    return fabric.util.object.extend(this.callSuper(\"toObject\"), {\r\n      id: this.get(\"id\"),\r\n      name: this.get(\"name\"),\r\n      icon: this.get(\"icon\"),\r\n      description: this.get(\"description\"),\r\n      superType: this.get(\"superType\"),\r\n      configuration: this.get(\"configuration\"),\r\n      nodeClazz: this.get(\"nodeClazz\"),\r\n      descriptor: this.get(\"descriptor\"),\r\n      borderColor: this.get(\"borderColor\"),\r\n      borderScaleFactor: this.get(\"borderScaleFactor\"),\r\n      dblclick: this.get(\"dblclick\"),\r\n      deletable: this.get(\"deletable\"),\r\n      cloneable: this.get(\"cloneable\"),\r\n      fromPort: this.get(\"fromPort\"),\r\n      toPort: this.get(\"toPort\")\r\n    });\r\n  },\r\n  defaultPortOption() {\r\n    const { type }: { type: NodeType } = this.descriptor as any;\r\n    return {\r\n      nodeId: this.id,\r\n      hasBorders: false,\r\n      hasControls: false,\r\n      hasRotatingPoint: false,\r\n      selectable: false,\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      lockScalingX: true,\r\n      lockScalingY: true,\r\n      superType: \"port\",\r\n      originFill: \"rgba(0, 0, 0, 0.1)\",\r\n      hoverFill: \"green\",\r\n      errorFill: \"red\",\r\n      fill: \"rgba(0, 0, 0, 0.1)\",\r\n      hoverCursor: \"pointer\",\r\n      strokeWidth: 2,\r\n      stroke: this.descriptor ? NODE_COLORS[type].border : \"rgba(0, 0, 0, 1)\",\r\n      width: 10,\r\n      height: 10,\r\n      links: [] as LinkObject[],\r\n      enabled: true\r\n    };\r\n  },\r\n  toPortOption() {\r\n    return {\r\n      ...this.defaultPortOption()\r\n    };\r\n  },\r\n  fromPortOption() {\r\n    return {\r\n      ...this.defaultPortOption(),\r\n      angle: 45\r\n    };\r\n  },\r\n  createToPort(left: number, top: number) {\r\n    if (this.descriptor.inEnabled) {\r\n      this.toPort = new Port({\r\n        id: \"defaultInPort\",\r\n        type: \"toPort\",\r\n        ...this.toPortOption(),\r\n        left,\r\n        top\r\n      });\r\n    }\r\n    return this.toPort;\r\n  },\r\n  createFromPort(left: number, top: number) {\r\n    if (this.descriptor.outPortType === OUT_PORT_TYPE.BROADCAST) {\r\n      this.fromPort = this.broadcastPort({\r\n        ...this.fromPortOption(),\r\n        left,\r\n        top\r\n      });\r\n    } else if (this.descriptor.outPortType === OUT_PORT_TYPE.STATIC) {\r\n      this.fromPort = this.staticPort({ ...this.fromPortOption(), left, top });\r\n    } else if (this.descriptor.outPortType === OUT_PORT_TYPE.DYNAMIC) {\r\n      this.fromPort = this.dynamicPort({ ...this.fromPortOption(), left, top });\r\n    } else if (this.descriptor.outPortType === OUT_PORT_TYPE.NONE) {\r\n      this.fromPort = [];\r\n    } else {\r\n      this.fromPort = this.singlePort({ ...this.fromPortOption(), left, top });\r\n    }\r\n    return this.fromPort;\r\n  },\r\n  singlePort(portOption: any) {\r\n    const fromPort = new Port({\r\n      id: \"defaultFromPort\",\r\n      type: \"fromPort\",\r\n      ...portOption\r\n    });\r\n    return [fromPort];\r\n  },\r\n  staticPort(portOption: any) {\r\n    return this.descriptor.outPorts.map((outPort: any, i: number) => {\r\n      return new Port({\r\n        id: outPort,\r\n        type: \"fromPort\",\r\n        ...portOption,\r\n        left: i === 0 ? portOption.left - 20 : portOption.left + 20,\r\n        top: portOption.top,\r\n        leftDiff: i === 0 ? -20 : 20,\r\n        fill: i === 0 ? \"rgba(0, 255, 0, 0.3)\" : \"rgba(255, 0, 0, 0.3)\",\r\n        originFill: i === 0 ? \"rgba(0, 255, 0, 0.3)\" : \"rgba(255, 0, 0, 0.3)\",\r\n        hoverFill: i === 0 ? \"rgba(0, 255, 0, 1)\" : \"rgba(255, 0, 0, 1)\"\r\n      });\r\n    });\r\n  },\r\n  dynamicPort(_portOption: any): any[] {\r\n    return [];\r\n  },\r\n  broadcastPort(portOption: any) {\r\n    const fromPort = new Port({\r\n      id: \"broadcastFromPort\",\r\n      type: \"fromPort\",\r\n      ...portOption\r\n    });\r\n    return [fromPort];\r\n  },\r\n  setErrors(errors: any) {\r\n    if (errors) {\r\n      this.errorFlag.set({\r\n        visible: true\r\n      });\r\n    } else {\r\n      this.errorFlag.set({\r\n        visible: false\r\n      });\r\n    }\r\n  },\r\n  duplicate() {\r\n    const options = this.toObject();\r\n    options.id = uuid();\r\n    options.name = `${options.name}_clone`;\r\n    return new Node(options);\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n  }\r\n});\r\n\r\nNode.fromObject = (options: NodeObject, callback: (obj: NodeObject) => any) => {\r\n  return callback(new Node(options));\r\n};\r\n\r\n// @ts-ignore\r\nwindow.fabric.FromPort = Port;\r\n\r\n// @ts-ignore\r\nwindow.fabric.ToPort = Port;\r\n\r\n// @ts-ignore\r\nwindow.fabric.Node = Node;\r\n\r\nexport default Node;\r\n","import { fabric } from \"fabric\";\r\nimport uuid from \"uuid\";\r\n\r\nimport { FabricObject } from \"../utils\";\r\nimport { OUT_PORT_TYPE, NodeObject } from \"./Node\";\r\nimport { PortObject } from \"./Port\";\r\n\r\nexport interface LinkObject extends FabricObject<fabric.Line> {\r\n  fromNode?: NodeObject;\r\n  toNode?: NodeObject;\r\n  fromPort?: PortObject;\r\n  toPort?: PortObject;\r\n  fromPortIndex?: number;\r\n  setPort?: (\r\n    fromNode: NodeObject,\r\n    fromPort: PortObject,\r\n    toNode: NodeObject,\r\n    toPort: PortObject\r\n  ) => void;\r\n  setPortEnabled?: (\r\n    node: NodeObject,\r\n    port: PortObject,\r\n    enabled: boolean\r\n  ) => void;\r\n}\r\n\r\nconst Link = fabric.util.createClass(fabric.Line, {\r\n  type: \"link\",\r\n  superType: \"link\",\r\n  initialize(\r\n    fromNode: Partial<NodeObject>,\r\n    fromPort: Partial<PortObject>,\r\n    toNode: Partial<NodeObject>,\r\n    toPort: Partial<PortObject>,\r\n    options: Partial<LinkObject>\r\n  ) {\r\n    options = options || {};\r\n    const coords = [fromPort.left, fromPort.top, toPort.left, toPort.top];\r\n    this.callSuper(\"initialize\", coords, options);\r\n    this.set({\r\n      strokeWidth: 4,\r\n      id: options.id || uuid(),\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      lockScalingX: true,\r\n      lockScalingY: true,\r\n      lockRotation: true,\r\n      hasRotatingPoint: false,\r\n      hasControls: false,\r\n      hasBorders: false,\r\n      perPixelTargetFind: true,\r\n      lockMovementX: true,\r\n      lockMovementY: true,\r\n      selectable: false,\r\n      fromNode,\r\n      fromPort,\r\n      toNode,\r\n      toPort\r\n    });\r\n  },\r\n  setPort(\r\n    fromNode: NodeObject,\r\n    fromPort: PortObject,\r\n    _toNode: NodeObject,\r\n    toPort: PortObject\r\n  ) {\r\n    fromPort.links.push(this);\r\n    toPort.links.push(this);\r\n    this.setPortEnabled(fromNode, fromPort, false);\r\n  },\r\n  setPortEnabled(node: NodeObject, port: PortObject, enabled: boolean) {\r\n    if (node.descriptor.outPortType !== OUT_PORT_TYPE.BROADCAST) {\r\n      port.set({\r\n        enabled\r\n      });\r\n    } else {\r\n      if (node.toPort.id === port.id) {\r\n        return;\r\n      }\r\n      port.links.forEach((link, index) => {\r\n        link.set({\r\n          fromPort: port,\r\n          fromPortIndex: index\r\n        });\r\n      });\r\n      node.set({\r\n        configuration: {\r\n          outputCount: port.links.length\r\n        }\r\n      });\r\n    }\r\n  },\r\n  toObject() {\r\n    return fabric.util.object.extend(this.callSuper(\"toObject\"), {\r\n      id: this.get(\"id\"),\r\n      name: this.get(\"name\"),\r\n      superType: this.get(\"superType\"),\r\n      configuration: this.get(\"configuration\"),\r\n      fromNode: this.get(\"fromNode\"),\r\n      fromPort: this.get(\"fromPort\"),\r\n      toNode: this.get(\"toNode\"),\r\n      toPort: this.get(\"toPort\")\r\n    });\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n    ctx.save();\r\n    const xDiff = this.x2 - this.x1;\r\n    const yDiff = this.y2 - this.y1;\r\n    const angle = Math.atan2(yDiff, xDiff);\r\n    ctx.translate((this.x2 - this.x1) / 2, (this.y2 - this.y1) / 2);\r\n    ctx.rotate(angle);\r\n    ctx.beginPath();\r\n    // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n    ctx.moveTo(5, 0);\r\n    ctx.lineTo(-5, 5);\r\n    ctx.lineTo(-5, -5);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.stroke;\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n});\r\n\r\nLink.fromObject = (options: LinkObject, callback: (obj: LinkObject) => any) => {\r\n  const { fromNode, fromPort, toNode, toPort } = options;\r\n  return callback(new Link(fromNode, fromPort, toNode, toPort, options));\r\n};\r\n\r\nwindow.fabric.Link = Link;\r\n\r\nexport default Link;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Link, { LinkObject } from \"./Link\";\r\nimport { NodeObject } from \"./Node\";\r\nimport { PortObject } from \"./Port\";\r\n\r\nconst CurvedLink = fabric.util.createClass(Link, {\r\n  type: \"curvedLink\",\r\n  superType: \"link\",\r\n  initialize(\r\n    fromNode: Partial<NodeObject>,\r\n    fromPort: Partial<PortObject>,\r\n    toNode: Partial<NodeObject>,\r\n    toPort: Partial<PortObject>,\r\n    options: Partial<LinkObject>\r\n  ) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", fromNode, fromPort, toNode, toPort, options);\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    // Drawing curved link\r\n    const { x1, y1, x2, y2 } = this;\r\n    ctx.strokeStyle = this.stroke;\r\n    const fp = { x: (x1 - x2) / 2, y: (y1 - y2) / 2 };\r\n    const sp = { x: (x2 - x1) / 2, y: (y2 - y1) / 2 };\r\n    ctx.beginPath();\r\n    ctx.moveTo(fp.x, fp.y);\r\n    ctx.bezierCurveTo(fp.x, sp.y, sp.x, fp.y, sp.x, sp.y);\r\n    ctx.stroke();\r\n    ctx.save();\r\n    const xDiff = x2 - x1;\r\n    const yDiff = y2 - y1;\r\n    const angle = Math.atan2(yDiff, xDiff);\r\n    ctx.translate((x2 - x1) / 2, (y2 - y1) / 2);\r\n    ctx.rotate(angle >= 0 ? 1.57 : -1.57);\r\n    ctx.beginPath();\r\n    // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n    ctx.moveTo(5, 0);\r\n    ctx.lineTo(-5, 5);\r\n    ctx.lineTo(-5, -5);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.stroke;\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n});\r\n\r\nCurvedLink.fromObject = (\r\n  options: LinkObject,\r\n  callback: (obj: LinkObject) => any\r\n) => {\r\n  const { fromNode, fromPort, toNode, toPort } = options;\r\n  return callback(new CurvedLink(fromNode, fromPort, toNode, toPort, options));\r\n};\r\n\r\nwindow.fabric.CurvedLink = CurvedLink;\r\n\r\nexport default CurvedLink;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Link, { LinkObject } from \"./Link\";\r\nimport { NodeObject } from \"./Node\";\r\nimport { PortObject } from \"./Port\";\r\n\r\nconst OrthogonalLink = fabric.util.createClass(Link, {\r\n  type: \"OrthogonalLink\",\r\n  superType: \"link\",\r\n  initialize(\r\n    fromNode: Partial<NodeObject>,\r\n    fromPort: Partial<PortObject>,\r\n    toNode: Partial<NodeObject>,\r\n    toPort: Partial<PortObject>,\r\n    options: Partial<LinkObject>\r\n  ) {\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", fromNode, fromPort, toNode, toPort, options);\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    // Drawing orthogonal link\r\n    const { x1, y1, x2, y2 } = this;\r\n    ctx.strokeStyle = this.stroke;\r\n    const fp = { x: (x1 - x2) / 2, y: (y1 - y2) / 2 };\r\n    const sp = { x: (x2 - x1) / 2, y: (y2 - y1) / 2 };\r\n    ctx.lineJoin = \"round\";\r\n    ctx.beginPath();\r\n    ctx.moveTo(fp.x, fp.y);\r\n    ctx.lineTo(fp.x, sp.y / 2);\r\n    ctx.lineTo(sp.x, sp.y / 2);\r\n    ctx.lineTo(sp.x, sp.y);\r\n    ctx.stroke();\r\n    ctx.save();\r\n    const xDiff = this.x2 - this.x1;\r\n    const yDiff = this.y2 - this.y1;\r\n    const angle = Math.atan2(yDiff, xDiff);\r\n    ctx.translate((this.x2 - this.x1) / 2, (this.y2 - this.y1) / 2);\r\n    ctx.rotate(angle >= 0 ? 1.57 : -1.57);\r\n    ctx.beginPath();\r\n    // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n    ctx.moveTo(5, 0);\r\n    ctx.lineTo(-5, 5);\r\n    ctx.lineTo(-5, -5);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.stroke;\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n});\r\n\r\nOrthogonalLink.fromObject = (\r\n  options: LinkObject,\r\n  callback: (obj: LinkObject) => any\r\n) => {\r\n  const { fromNode, fromPort, toNode, toPort } = options;\r\n  return callback(\r\n    new OrthogonalLink(fromNode, fromPort, toNode, toPort, options)\r\n  );\r\n};\r\n\r\nwindow.fabric.OrthogonalLink = OrthogonalLink;\r\n\r\nexport default OrthogonalLink;\r\n","import { fabric } from \"fabric\";\r\n\r\nconst Line = fabric.util.createClass(fabric.Line, {\r\n  type: \"line\",\r\n  superType: \"drawing\",\r\n  initialize(points: any, options: any) {\r\n    if (!points) {\r\n      const { x1, x2, y1, y2 } = options;\r\n      points = [x1, y1, x2, y2];\r\n    }\r\n    options = options || {};\r\n    this.callSuper(\"initialize\", points, options);\r\n  },\r\n  _render(ctx: CanvasRenderingContext2D) {\r\n    this.callSuper(\"_render\", ctx);\r\n  }\r\n});\r\n\r\nLine.fromObject = (options: any, callback: any) => {\r\n  const { x1, x2, y1, y2 } = options;\r\n  return callback(new Line([x1, y1, x2, y2], options));\r\n};\r\n\r\nwindow.fabric.Line = Line;\r\n\r\nexport default Line;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport {\r\n  Arrow,\r\n  Gif,\r\n  Chart,\r\n  Element,\r\n  Iframe,\r\n  Video,\r\n  Node,\r\n  Link,\r\n  CurvedLink,\r\n  OrthogonalLink,\r\n  Line\r\n} from \"./objects\";\r\nimport { FabricObject } from \"./utils\";\r\nimport { Code } from \"./objects/Element\";\r\n\r\nexport interface ObjectSchema {\r\n  create: (...option: any) => fabric.Object;\r\n}\r\n\r\nexport interface CanvasObjectSchema {\r\n  [key: string]: ObjectSchema;\r\n}\r\n\r\nexport const createCanvasObject = (objectSchema: CanvasObjectSchema) =>\r\n  objectSchema;\r\n\r\nconst CanvasObject: CanvasObjectSchema = {\r\n  group: {\r\n    create: ({ objects, ...option }: { objects: FabricObject[] }) =>\r\n      new fabric.Group(objects, option)\r\n  },\r\n  \"i-text\": {\r\n    create: ({ text, ...option }: { text: string }) =>\r\n      new fabric.IText(text, option)\r\n  },\r\n  textbox: {\r\n    create: ({ text, ...option }: { text: string }) =>\r\n      new fabric.Textbox(text, option)\r\n  },\r\n  triangle: {\r\n    create: (option: any) => new fabric.Triangle(option)\r\n  },\r\n  circle: {\r\n    create: (option: any) => new fabric.Circle(option)\r\n  },\r\n  rect: {\r\n    create: (option: any) => new fabric.Rect(option)\r\n  },\r\n  image: {\r\n    create: ({ element = new Image(), ...option }) =>\r\n      new fabric.Image(element, {\r\n        ...option,\r\n        crossOrigin: \"anonymous\"\r\n      })\r\n  },\r\n  polygon: {\r\n    create: ({ points, ...option }: { points: any }) =>\r\n      new fabric.Polygon(points, {\r\n        ...option,\r\n        perPixelTargetFind: true\r\n      })\r\n  },\r\n  line: {\r\n    create: ({ points, ...option }: { points: any }) => new Line(points, option)\r\n  },\r\n  arrow: {\r\n    create: ({ points, ...option }: { points: any }) =>\r\n      new Arrow(points, option)\r\n  },\r\n  chart: {\r\n    create: (option: any) =>\r\n      new Chart(\r\n        option.chartOption || {\r\n          xAxis: {},\r\n          yAxis: {},\r\n          series: [\r\n            {\r\n              type: \"line\",\r\n              data: [\r\n                [0, 1],\r\n                [1, 2],\r\n                [2, 3],\r\n                [3, 4]\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        option\r\n      )\r\n  },\r\n  element: {\r\n    create: ({ code, ...option }: { code: Code }) => new Element(code, option)\r\n  },\r\n  iframe: {\r\n    create: ({ src, ...option }: { src: string }) => new Iframe(src, option)\r\n  },\r\n  video: {\r\n    create: ({ src, file, ...option }: { src: string; file: File }) =>\r\n      new Video(src || file, option)\r\n  },\r\n  gif: {\r\n    create: (option: any) => new Gif(option)\r\n  },\r\n  node: {\r\n    create: (option: any) => new Node(option)\r\n  },\r\n  link: {\r\n    create: (fromNode, fromPort, toNode, toPort, option) =>\r\n      new Link(fromNode, fromPort, toNode, toPort, option)\r\n  },\r\n  curvedLink: {\r\n    create: (fromNode, fromPort, toNode, toPort, option) =>\r\n      new CurvedLink(fromNode, fromPort, toNode, toPort, option)\r\n  },\r\n  orthogonalLink: {\r\n    create: (fromNode, fromPort, toNode, toPort, option) =>\r\n      new OrthogonalLink(fromNode, fromPort, toNode, toPort, option)\r\n  }\r\n};\r\n\r\nexport default CanvasObject;\r\n","import { fabric } from \"fabric\";\r\nimport warning from \"warning\";\r\nimport uuid from \"uuid\";\r\n\r\nimport {\r\n  ElementHandler,\r\n  ImageHandler,\r\n  ChartHandler,\r\n  CropHandler,\r\n  AnimationHandler,\r\n  ContextmenuHandler,\r\n  TooltipHandler,\r\n  ZoomHandler,\r\n  WorkareaHandler,\r\n  TransactionHandler,\r\n  LinkHandler,\r\n  AlignmentHandler,\r\n  GuidelineHandler,\r\n  GridHandler,\r\n  PortHandler,\r\n  NodeHandler,\r\n  EventHandler,\r\n  DrawingHandler,\r\n  InteractionHandler,\r\n  ShortcutHandler\r\n} from \".\";\r\nimport {\r\n  FabricObject,\r\n  FabricImage,\r\n  WorkareaObject,\r\n  WorkareaOption,\r\n  InteractionMode,\r\n  CanvasOption,\r\n  GridOption,\r\n  GuidelineOption,\r\n  KeyEvent,\r\n  FabricObjectOption,\r\n  FabricElement,\r\n  FabricCanvas,\r\n  FabricGroup\r\n} from \"../utils\";\r\nimport CanvasObject from \"../CanvasObject\";\r\nimport { NodeObject } from \"../objects/Node\";\r\nimport { TransactionEvent } from \"./TransactionHandler\";\r\nimport { LinkObject } from \"../objects/Link\";\r\nimport { PortObject } from \"../objects/Port\";\r\nimport { LinkOption } from \"./LinkHandler\";\r\n\r\nexport interface HandlerOptions {\r\n  /**\r\n   * Canvas id\r\n   * @type {string}\r\n   */\r\n  id?: string;\r\n  /**\r\n   * Canvas object\r\n   * @type {FabricCanvas}\r\n   */\r\n  canvas?: FabricCanvas;\r\n  /**\r\n   * Canvas parent element\r\n   * @type {HTMLDivElement}\r\n   */\r\n  container?: HTMLDivElement;\r\n  /**\r\n   * Canvas editable\r\n   * @type {boolean}\r\n   */\r\n  editable?: boolean;\r\n  /**\r\n   * Canvas interaction mode\r\n   * @type {InteractionMode}\r\n   */\r\n  interactionMode?: InteractionMode;\r\n  /**\r\n   * Persist properties for object\r\n   * @type {string[]}\r\n   */\r\n  propertiesToInclude?: string[];\r\n  /**\r\n   * Minimum zoom ratio\r\n   * @type {number}\r\n   */\r\n  minZoom?: number;\r\n  /**\r\n   * Maximum zoom ratio\r\n   * @type {number}\r\n   */\r\n  maxZoom?: number;\r\n  /**\r\n   * Workarea option\r\n   * @type {WorkareaOption}\r\n   */\r\n  workareaOption?: WorkareaOption;\r\n  /**\r\n   * Canvas option\r\n   * @type {CanvasOption}\r\n   */\r\n  canvasOption?: CanvasOption;\r\n  /**\r\n   * Grid option\r\n   * @type {GridOption}\r\n   */\r\n  gridOption?: GridOption;\r\n  /**\r\n   * Default option for Fabric Object\r\n   * @type {FabricObjectOption}\r\n   */\r\n  defaultOption?: FabricObjectOption;\r\n  /**\r\n   * Guideline option\r\n   * @type {GuidelineOption}\r\n   */\r\n  guidelineOption?: GuidelineOption;\r\n  /**\r\n   * Whether to use zoom\r\n   * @type {boolean}\r\n   */\r\n  zoomEnabled?: boolean;\r\n  /**\r\n   * ActiveSelection option\r\n   * @type {FabricObjectOption}\r\n   */\r\n  activeSelection?: FabricObjectOption;\r\n  /**\r\n   * Canvas width\r\n   * @type {number}\r\n   */\r\n  width?: number;\r\n  /**\r\n   * Canvas height\r\n   * @type {number}\r\n   */\r\n  height?: number;\r\n  /**\r\n   * Keyboard event in Canvas\r\n   * @type {KeyEvent}\r\n   */\r\n  keyEvent?: KeyEvent;\r\n  /**\r\n   * Append custom objects\r\n   * @type {{ [key: string]: any }}\r\n   */\r\n  fabricObjects?: {\r\n    [key: string]: {\r\n      create: (...args: any) => FabricObject;\r\n    };\r\n  };\r\n  [key: string]: any;\r\n\r\n  /**\r\n   * When has been added object in Canvas, Called function\r\n   */\r\n  onAdd?: (object: FabricObject) => void;\r\n  /**\r\n   * Return contextmenu element\r\n   */\r\n  onContext?: (\r\n    el: HTMLDivElement,\r\n    e: React.MouseEvent,\r\n    target?: FabricObject\r\n  ) => Promise<any> | any;\r\n  /**\r\n   * Return tooltip element\r\n   */\r\n  onTooltip?: (el: HTMLDivElement, target?: FabricObject) => Promise<any> | any;\r\n  /**\r\n   * When zoom, Called function\r\n   */\r\n  onZoom?: (zoomRatio: number) => void;\r\n  /**\r\n   * When clicked object, Called function\r\n   */\r\n  onClick?: (canvas: FabricCanvas, target: FabricObject) => void;\r\n  /**\r\n   * When double clicked object, Called function\r\n   */\r\n  onDblClick?: (canvas: FabricCanvas, target: FabricObject) => void;\r\n  /**\r\n   * When modified object, Called function\r\n   */\r\n  onModified?: (target: FabricObject) => void;\r\n  /**\r\n   * When select object, Called function\r\n   */\r\n  onSelect?: (target: FabricObject) => void;\r\n  /**\r\n   * When has been removed object in Canvas, Called function\r\n   */\r\n  onRemove?: (target: FabricObject) => void;\r\n  /**\r\n   * When has been undo or redo, Called function\r\n   */\r\n  onTransaction?: (transaction: TransactionEvent) => void;\r\n  /**\r\n   * When has been changed interaction mode, Called function\r\n   */\r\n  onInteraction?: (interactionMode: InteractionMode) => void;\r\n}\r\n\r\n/**\r\n * Main handler for Canvas\r\n * @class Handler\r\n * @implements {HandlerOptions}\r\n */\r\nclass Handler implements HandlerOptions {\r\n  public id: string;\r\n  public canvas: FabricCanvas;\r\n  public workarea: WorkareaObject;\r\n  public container: HTMLDivElement;\r\n  public editable: boolean;\r\n  public interactionMode: InteractionMode;\r\n  public propertiesToInclude?: string[];\r\n  public minZoom: number;\r\n  public maxZoom: number;\r\n  public workareaOption?: WorkareaOption;\r\n  public canvasOption?: CanvasOption;\r\n  public gridOption?: GridOption;\r\n  public fabricObjects?: {\r\n    [key: string]: {\r\n      create: (...args: any) => FabricObject;\r\n    };\r\n  };\r\n  public defaultOption?: FabricObjectOption;\r\n  public guidelineOption?: GuidelineOption;\r\n  public zoomEnabled?: boolean;\r\n  public activeSelection?: Partial<FabricObjectOption<fabric.ActiveSelection>>;\r\n  public width?: number;\r\n  public height?: number;\r\n  public keyEvent?: KeyEvent;\r\n\r\n  public onAdd?: (object: FabricObject) => void;\r\n  public onContext?: (\r\n    el: HTMLDivElement,\r\n    e: React.MouseEvent,\r\n    target?: FabricObject\r\n  ) => Promise<any>;\r\n  public onTooltip?: (\r\n    el: HTMLDivElement,\r\n    target?: FabricObject\r\n  ) => Promise<any>;\r\n  public onZoom?: (zoomRatio: number) => void;\r\n  public onClick?: (canvas: FabricCanvas, target: FabricObject) => void;\r\n  public onDblClick?: (canvas: FabricCanvas, target: FabricObject) => void;\r\n  public onModified?: (target: FabricObject) => void;\r\n  public onSelect?: (target: FabricObject) => void;\r\n  public onRemove?: (target: FabricObject) => void;\r\n  public onTransaction?: (transaction: TransactionEvent) => void;\r\n  public onInteraction?: (interactionMode: InteractionMode) => void;\r\n\r\n  public imageHandler: ImageHandler;\r\n  public chartHandler: ChartHandler;\r\n  public elementHandler: ElementHandler;\r\n  public cropHandler: CropHandler;\r\n  public animationHandler: AnimationHandler;\r\n  public contextmenuHandler: ContextmenuHandler;\r\n  public tooltipHandler: TooltipHandler;\r\n  public zoomHandler: ZoomHandler;\r\n  public workareaHandler: WorkareaHandler;\r\n  public interactionHandler: InteractionHandler;\r\n  public transactionHandler: TransactionHandler;\r\n  public gridHandler: GridHandler;\r\n  public portHandler: PortHandler;\r\n  public linkHandler: LinkHandler;\r\n  public nodeHandler: NodeHandler;\r\n  public alignmentHandler: AlignmentHandler;\r\n  public guidelineHandler: GuidelineHandler;\r\n  public eventHandler: EventHandler;\r\n  public drawingHandler: DrawingHandler;\r\n  public shortcutHandler: ShortcutHandler;\r\n\r\n  public objectMap: Record<string, FabricObject> = {};\r\n  public objects: FabricObject[];\r\n  public activeLine?: any;\r\n  public activeShape?: any;\r\n  public zoom = 1;\r\n  public prevTarget?: FabricObject;\r\n  public target?: FabricObject;\r\n  public pointArray?: any[];\r\n  public lineArray?: any[];\r\n  public isCut = false;\r\n\r\n  private isRequsetAnimFrame = false;\r\n  private requestFrame: any;\r\n  private clipboard: any;\r\n\r\n  constructor(options: HandlerOptions) {\r\n    this.init(options);\r\n    this.initCallback(options);\r\n    this.initHandler(options);\r\n  }\r\n\r\n  /**\r\n   * Init class fields\r\n   * @param {HandlerOptions} options\r\n   */\r\n  public init = (options: HandlerOptions) => {\r\n    this.id = options.id;\r\n    this.canvas = options.canvas;\r\n    this.container = options.container;\r\n    this.editable = options.editable;\r\n    this.interactionMode = options.interactionMode;\r\n    this.propertiesToInclude = options.propertiesToInclude;\r\n    this.minZoom = options.minZoom;\r\n    this.maxZoom = options.maxZoom;\r\n    this.workareaOption = options.workareaOption;\r\n    this.canvasOption = options.canvasOption;\r\n    this.gridOption = options.gridOption;\r\n    this.defaultOption = options.defaultOption;\r\n    this.fabricObjects = Object.assign({}, CanvasObject, options.fabricObjects);\r\n    this.guidelineOption = options.guidelineOption;\r\n    this.zoomEnabled = options.zoomEnabled;\r\n    this.activeSelection = options.activeSelection;\r\n    this.width = options.width;\r\n    this.height = options.height;\r\n    this.keyEvent = options.keyEvent;\r\n\r\n    this.objects = [];\r\n  };\r\n\r\n  /**\r\n   * Init callback\r\n   * @param {HandlerOptions} options\r\n   */\r\n  public initCallback = (options: HandlerOptions) => {\r\n    this.onAdd = options.onAdd;\r\n    this.onTooltip = options.onTooltip;\r\n    this.onZoom = options.onZoom;\r\n    this.onContext = options.onContext;\r\n    this.onClick = options.onClick;\r\n    this.onModified = options.onModified;\r\n    this.onDblClick = options.onDblClick;\r\n    this.onSelect = options.onSelect;\r\n    this.onRemove = options.onRemove;\r\n    this.onTransaction = options.onTransaction;\r\n    this.onInteraction = options.onInteraction;\r\n  };\r\n\r\n  /**\r\n   * Init handlers\r\n   * @param {HandlerOptions} options\r\n   */\r\n  public initHandler = (_options: HandlerOptions) => {\r\n    this.imageHandler = new ImageHandler(this);\r\n    this.chartHandler = new ChartHandler(this);\r\n    this.elementHandler = new ElementHandler(this);\r\n    this.cropHandler = new CropHandler(this);\r\n    this.animationHandler = new AnimationHandler(this);\r\n    this.contextmenuHandler = new ContextmenuHandler(this);\r\n    this.tooltipHandler = new TooltipHandler(this);\r\n    this.zoomHandler = new ZoomHandler(this);\r\n    this.workareaHandler = new WorkareaHandler(this);\r\n    this.interactionHandler = new InteractionHandler(this);\r\n    this.transactionHandler = new TransactionHandler(this);\r\n    this.gridHandler = new GridHandler(this);\r\n    this.portHandler = new PortHandler(this);\r\n    this.linkHandler = new LinkHandler(this);\r\n    this.nodeHandler = new NodeHandler(this);\r\n    this.alignmentHandler = new AlignmentHandler(this);\r\n    this.guidelineHandler = new GuidelineHandler(this);\r\n    this.eventHandler = new EventHandler(this);\r\n    this.drawingHandler = new DrawingHandler(this);\r\n    this.shortcutHandler = new ShortcutHandler(this);\r\n  };\r\n\r\n  /**\r\n   * Get primary object\r\n   * @returns {FabricObject[]}\r\n   */\r\n  public getObjects = (): FabricObject[] => {\r\n    const objects = this.canvas.getObjects().filter((obj: FabricObject) => {\r\n      if (obj.id === \"workarea\") {\r\n        return false;\r\n      } else if (obj.id === \"grid\") {\r\n        return false;\r\n      } else if (obj.superType === \"port\") {\r\n        return false;\r\n      } else if (!obj.id) {\r\n        return false;\r\n      }\r\n      return true;\r\n    }) as FabricObject[];\r\n    if (objects.length) {\r\n      objects.forEach(obj => (this.objectMap[obj.id] = obj));\r\n    } else {\r\n      this.objectMap = {};\r\n    }\r\n    return objects;\r\n  };\r\n\r\n  /**\r\n   * Set key pair\r\n   * @param {keyof FabricObject} key\r\n   * @param {*} value\r\n   * @returns\r\n   */\r\n  public set = (key: keyof FabricObject, value: any) => {\r\n    const activeObject = this.canvas.getActiveObject() as any;\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    activeObject.set(key, value);\r\n    activeObject.setCoords();\r\n    this.canvas.requestRenderAll();\r\n    const { id, superType, type, player, width, height } = activeObject as any;\r\n    if (superType === \"element\") {\r\n      if (key === \"visible\") {\r\n        if (value) {\r\n          activeObject.element.style.display = \"block\";\r\n        } else {\r\n          activeObject.element.style.display = \"none\";\r\n        }\r\n      }\r\n      const el = this.elementHandler.findById(id);\r\n      // update the element\r\n      this.elementHandler.setScaleOrAngle(el, activeObject);\r\n      this.elementHandler.setSize(el, activeObject);\r\n      this.elementHandler.setPosition(el, activeObject);\r\n      if (type === \"video\" && player) {\r\n        player.setPlayerSize(width, height);\r\n      }\r\n    }\r\n    const { onModified } = this;\r\n    if (onModified) {\r\n      onModified(activeObject);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set option\r\n   * @param {Partial<FabricObject>} option\r\n   * @returns\r\n   */\r\n  public setObject = (option: Partial<FabricObject>) => {\r\n    const activeObject = this.canvas.getActiveObject() as any;\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    Object.keys(option).forEach(key => {\r\n      if (option[key] !== activeObject[key]) {\r\n        activeObject.set(key, option[key]);\r\n        activeObject.setCoords();\r\n      }\r\n    });\r\n    this.canvas.requestRenderAll();\r\n    const { id, superType, type, player, width, height } = activeObject;\r\n    if (superType === \"element\") {\r\n      if (\"visible\" in option) {\r\n        if (option.visible) {\r\n          activeObject.element.style.display = \"block\";\r\n        } else {\r\n          activeObject.element.style.display = \"none\";\r\n        }\r\n      }\r\n      const el = this.elementHandler.findById(id);\r\n      // update the element\r\n      this.elementHandler.setScaleOrAngle(el, activeObject);\r\n      this.elementHandler.setSize(el, activeObject);\r\n      this.elementHandler.setPosition(el, activeObject);\r\n      if (type === \"video\" && player) {\r\n        player.setPlayerSize(width, height);\r\n      }\r\n    }\r\n    const { onModified } = this;\r\n    if (onModified) {\r\n      onModified(activeObject);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set key pair by object\r\n   * @param {FabricObject} obj\r\n   * @param {string} key\r\n   * @param {*} value\r\n   * @returns\r\n   */\r\n  public setByObject = (obj: any, key: string, value: any) => {\r\n    if (!obj) {\r\n      return;\r\n    }\r\n    obj.set(key, value);\r\n    obj.setCoords();\r\n    this.canvas.renderAll();\r\n    const { id, superType, type, player, width, height } = obj as any;\r\n    if (superType === \"element\") {\r\n      if (key === \"visible\") {\r\n        if (value) {\r\n          obj.element.style.display = \"block\";\r\n        } else {\r\n          obj.element.style.display = \"none\";\r\n        }\r\n      }\r\n      const el = this.elementHandler.findById(id);\r\n      // update the element\r\n      this.elementHandler.setScaleOrAngle(el, obj);\r\n      this.elementHandler.setSize(el, obj);\r\n      this.elementHandler.setPosition(el, obj);\r\n      if (type === \"video\" && player) {\r\n        player.setPlayerSize(width, height);\r\n      }\r\n    }\r\n    const { onModified } = this;\r\n    if (onModified) {\r\n      onModified(obj);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set key pair by id\r\n   * @param {string} id\r\n   * @param {string} key\r\n   * @param {*} value\r\n   */\r\n  public setById = (id: string, key: string, value: any) => {\r\n    const findObject = this.findById(id);\r\n    this.setByObject(findObject, key, value);\r\n  };\r\n\r\n  /**\r\n   * Set partial by object\r\n   * @param {FabricObject} obj\r\n   * @param {FabricObjectOption} option\r\n   * @returns\r\n   */\r\n  public setByPartial = (obj: FabricObject, option: FabricObjectOption) => {\r\n    if (!obj) {\r\n      return;\r\n    }\r\n    obj.set(option);\r\n    obj.setCoords();\r\n    this.canvas.renderAll();\r\n    const { id, superType, type, player, width, height } = obj as any;\r\n    if (superType === \"element\") {\r\n      if (\"visible\" in option) {\r\n        if (option.visible) {\r\n          obj.element.style.display = \"block\";\r\n        } else {\r\n          obj.element.style.display = \"none\";\r\n        }\r\n      }\r\n      const el = this.elementHandler.findById(id);\r\n      // update the element\r\n      this.elementHandler.setScaleOrAngle(el, obj);\r\n      this.elementHandler.setSize(el, obj);\r\n      this.elementHandler.setPosition(el, obj);\r\n      if (type === \"video\" && player) {\r\n        player.setPlayerSize(width, height);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set shadow\r\n   * @param {fabric.Shadow} option\r\n   * @returns\r\n   */\r\n  public setShadow = (option: fabric.IShadowOptions) => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    activeObject.setShadow(option as fabric.Shadow);\r\n    this.canvas.requestRenderAll();\r\n    const { onModified } = this;\r\n    if (onModified) {\r\n      onModified(activeObject);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the image\r\n   * @param {FabricImage} obj\r\n   * @param {*} source\r\n   * @returns\r\n   */\r\n  public setImage = (obj: FabricImage, source: any) => {\r\n    if (!source) {\r\n      this.loadImage(obj, null);\r\n      obj.set(\"file\", null);\r\n      obj.set(\"src\", null);\r\n      return;\r\n    }\r\n    if (source instanceof File) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        this.loadImage(obj, reader.result as string);\r\n        obj.set(\"file\", source);\r\n        obj.set(\"src\", null);\r\n      };\r\n      reader.readAsDataURL(source);\r\n    } else {\r\n      this.loadImage(obj, source);\r\n      obj.set(\"file\", null);\r\n      obj.set(\"src\", source);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set image by id\r\n   * @param {string} id\r\n   * @param {*} source\r\n   */\r\n  public setImageById = (id: string, source: any) => {\r\n    const findObject = this.findById(id) as FabricImage;\r\n    this.setImage(findObject, source);\r\n  };\r\n\r\n  /**\r\n   * Set visible\r\n   * @param {boolean} [visible]\r\n   * @returns\r\n   */\r\n  public setVisible = (visible?: boolean) => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricElement;\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    if (activeObject.superType === \"element\") {\r\n      if (visible) {\r\n        activeObject.element.style.display = \"block\";\r\n      } else {\r\n        activeObject.element.style.display = \"none\";\r\n      }\r\n    }\r\n    activeObject.set({\r\n      visible\r\n    });\r\n    this.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Set the position on Object\r\n   *\r\n   * @param {FabricObject} obj\r\n   * @param {boolean} [centered]\r\n   */\r\n  public centerObject = (obj: FabricObject, centered?: boolean) => {\r\n    if (centered) {\r\n      this.canvas.centerObject(obj);\r\n      obj.setCoords();\r\n    } else {\r\n      this.setByPartial(obj, {\r\n        left:\r\n          obj.left / this.canvas.getZoom() -\r\n          obj.width / 2 -\r\n          this.canvas.viewportTransform[4] / this.canvas.getZoom(),\r\n        top:\r\n          obj.top / this.canvas.getZoom() -\r\n          obj.height / 2 -\r\n          this.canvas.viewportTransform[5] / this.canvas.getZoom()\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Add object\r\n   * @param {FabricObjectOption} obj\r\n   * @param {boolean} [centered=true]\r\n   * @param {boolean} [loaded=false]\r\n   * @returns\r\n   */\r\n  public add = (\r\n    obj: FabricObjectOption,\r\n    centered = true,\r\n    loaded = false,\r\n    transaction = true\r\n  ) => {\r\n    const { editable, onAdd, gridOption, defaultOption } = this;\r\n    const option: any = {\r\n      hasControls: editable,\r\n      hasBorders: editable,\r\n      selectable: editable,\r\n      lockMovementX: !editable,\r\n      lockMovementY: !editable,\r\n      hoverCursor: !editable ? \"pointer\" : \"move\"\r\n    };\r\n    if (obj.type === \"i-text\") {\r\n      option.editable = false;\r\n    } else {\r\n      option.editable = editable;\r\n    }\r\n    if (editable && this.workarea.layout === \"fullscreen\") {\r\n      option.scaleX = this.workarea.scaleX;\r\n      option.scaleY = this.workarea.scaleY;\r\n    }\r\n    const newOption = Object.assign(\r\n      {},\r\n      defaultOption,\r\n      obj,\r\n      {\r\n        container: this.container.id,\r\n        editable\r\n      },\r\n      option\r\n    );\r\n    // Individually create canvas object\r\n    if (obj.superType === \"link\") {\r\n      return this.linkHandler.create(newOption, loaded, transaction);\r\n    }\r\n    if (obj.type === \"svg\") {\r\n      return this.addSVG(newOption, centered, loaded);\r\n    }\r\n    let createdObj;\r\n    // Create canvas object\r\n    if (obj.type === \"image\") {\r\n      createdObj = this.addImage(newOption);\r\n    } else if (obj.type === \"group\") {\r\n      const objects = this.addGroup(newOption, centered, loaded);\r\n      const groupOption = Object.assign({}, newOption, {\r\n        objects,\r\n        name: \"New Group\"\r\n      });\r\n      createdObj = this.fabricObjects[obj.type].create(groupOption);\r\n    } else {\r\n      createdObj = this.fabricObjects[obj.type].create(newOption);\r\n    }\r\n    this.canvas.add(createdObj);\r\n    this.objects = this.getObjects();\r\n    if (!editable && !(obj.superType === \"element\")) {\r\n      createdObj.on(\"mousedown\", this.eventHandler.object.mousedown);\r\n    }\r\n    if (createdObj.dblclick) {\r\n      createdObj.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n    }\r\n    if (this.objects.some(object => object.type === \"gif\")) {\r\n      this.startRequestAnimFrame();\r\n    } else {\r\n      this.stopRequestAnimFrame();\r\n    }\r\n    if (\r\n      obj.superType !== \"drawing\" &&\r\n      obj.superType !== \"link\" &&\r\n      editable &&\r\n      !loaded\r\n    ) {\r\n      this.centerObject(createdObj, centered);\r\n    }\r\n    if (createdObj.superType === \"node\") {\r\n      this.portHandler.create(createdObj as NodeObject);\r\n      if (createdObj.iconButton) {\r\n        this.canvas.add(createdObj.iconButton);\r\n      }\r\n    }\r\n    if (!editable && createdObj.animation && createdObj.animation.autoplay) {\r\n      this.animationHandler.play(createdObj.id);\r\n    }\r\n    if (!loaded) {\r\n      if (createdObj.superType === \"node\") {\r\n        createdObj.setShadow({\r\n          color: createdObj.stroke\r\n        } as fabric.Shadow);\r\n        this.nodeHandler.highlightingNode(createdObj);\r\n      }\r\n    }\r\n    if (gridOption.enabled) {\r\n      this.gridHandler.setCoords(createdObj);\r\n    }\r\n    if (!this.transactionHandler.active && transaction) {\r\n      this.transactionHandler.save(\"add\");\r\n    }\r\n    if (onAdd && editable && !loaded) {\r\n      onAdd(createdObj);\r\n    }\r\n    return createdObj;\r\n  };\r\n\r\n  /**\r\n   * Add group object\r\n   * @param {FabricGroup} obj\r\n   * @param {boolean} [centered=true]\r\n   * @param {boolean} [loaded=false]\r\n   * @returns\r\n   */\r\n  public addGroup = (obj: FabricGroup, centered = true, loaded = false) => {\r\n    return obj.objects.map(child => {\r\n      return this.add(child, centered, loaded);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Add iamge object\r\n   * @param {FabricImage} obj\r\n   * @returns\r\n   */\r\n  public addImage = (obj: FabricImage) => {\r\n    const { defaultOption } = this;\r\n    const { filters = [], ...otherOption } = obj;\r\n    const image = new Image();\r\n    if (obj.src) {\r\n      image.src = obj.src;\r\n    }\r\n    const createdObj = new fabric.Image(image, {\r\n      ...defaultOption,\r\n      ...otherOption\r\n    }) as FabricImage;\r\n    createdObj.set({\r\n      filters: this.imageHandler.createFilters(filters)\r\n    });\r\n    this.setImage(createdObj, obj.src || obj.file);\r\n    return createdObj;\r\n  };\r\n\r\n  /**\r\n   * Add svg object\r\n   * @param {*} obj\r\n   * @param {boolean} [centered=true]\r\n   * @param {boolean} [loaded=false]\r\n   * @returns\r\n   */\r\n  public addSVG = (obj: any, centered = true, loaded = false) => {\r\n    const { defaultOption } = this;\r\n    return new Promise((resolve: any) => {\r\n      const getSVGElements = (object: any, objects: any, options: any) => {\r\n        const createdObj = fabric.util.groupSVGElements(\r\n          objects,\r\n          options\r\n        ) as FabricObject;\r\n        createdObj.set({ ...defaultOption, ...object });\r\n        this.canvas.add(createdObj);\r\n        this.objects = this.getObjects();\r\n        const { onAdd, editable } = this;\r\n        if (!editable && !(obj.superType === \"element\")) {\r\n          createdObj.on(\"mousedown\", this.eventHandler.object.mousedown);\r\n        }\r\n        if (createdObj.dblclick) {\r\n          createdObj.on(\r\n            \"mousedblclick\",\r\n            this.eventHandler.object.mousedblclick\r\n          );\r\n        }\r\n        if (editable && !loaded) {\r\n          this.centerObject(createdObj, centered);\r\n        }\r\n        if (\r\n          !editable &&\r\n          createdObj.animation &&\r\n          createdObj.animation.autoplay\r\n        ) {\r\n          this.animationHandler.play(createdObj.id);\r\n        }\r\n        if (onAdd && !loaded && editable) {\r\n          onAdd(createdObj);\r\n        }\r\n        return createdObj;\r\n      };\r\n      if (obj.loadType === \"svg\") {\r\n        fabric.loadSVGFromString(obj.svg, (objects, options) => {\r\n          resolve(getSVGElements(obj, objects, options));\r\n        });\r\n      } else {\r\n        fabric.loadSVGFromURL(obj.svg, (objects, options) => {\r\n          resolve(getSVGElements(obj, objects, options));\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Remove object\r\n   * @param {FabricObject} target\r\n   * @returns {any}\r\n   */\r\n  public remove = (target?: FabricObject) => {\r\n    const activeObject = target || (this.canvas.getActiveObject() as any);\r\n    if (this.prevTarget && this.prevTarget.superType === \"link\") {\r\n      this.linkHandler.remove(this.prevTarget as LinkObject);\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"remove\");\r\n      }\r\n      return;\r\n    }\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    if (\r\n      typeof activeObject.deletable !== \"undefined\" &&\r\n      !activeObject.deletable\r\n    ) {\r\n      return;\r\n    }\r\n    if (activeObject.type !== \"activeSelection\") {\r\n      this.canvas.discardActiveObject();\r\n      if (activeObject.superType === \"element\") {\r\n        this.elementHandler.removeById(activeObject.id);\r\n      }\r\n      if (activeObject.superType === \"link\") {\r\n        this.linkHandler.remove(activeObject);\r\n      } else if (activeObject.superType === \"node\") {\r\n        if (activeObject.toPort) {\r\n          if (activeObject.toPort.links.length) {\r\n            activeObject.toPort.links.forEach((link: any) => {\r\n              this.linkHandler.remove(link, \"from\");\r\n            });\r\n          }\r\n          this.canvas.remove(activeObject.toPort);\r\n        }\r\n        if (activeObject.fromPort && activeObject.fromPort.length) {\r\n          activeObject.fromPort.forEach((port: any) => {\r\n            if (port.links.length) {\r\n              port.links.forEach((link: any) => {\r\n                this.linkHandler.remove(link, \"to\");\r\n              });\r\n            }\r\n            this.canvas.remove(port);\r\n          });\r\n        }\r\n      }\r\n      this.canvas.remove(activeObject);\r\n    } else {\r\n      const { _objects: activeObjects } = activeObject;\r\n      const existDeleted = activeObjects.some(\r\n        (obj: any) => typeof obj.deletable !== \"undefined\" && !obj.deletable\r\n      );\r\n      if (existDeleted) {\r\n        return;\r\n      }\r\n      this.canvas.discardActiveObject();\r\n      activeObjects.forEach((obj: any) => {\r\n        if (obj.superType === \"element\") {\r\n          this.elementHandler.removeById(obj.id);\r\n        } else if (obj.superType === \"node\") {\r\n          if (obj.toPort) {\r\n            if (obj.toPort.links.length) {\r\n              obj.toPort.links.forEach((link: any) => {\r\n                this.linkHandler.remove(link, \"from\");\r\n              });\r\n            }\r\n            this.canvas.remove(obj.toPort);\r\n          }\r\n          if (obj.fromPort && obj.fromPort.length) {\r\n            obj.fromPort.forEach((port: any) => {\r\n              if (port.links.length) {\r\n                port.links.forEach((link: any) => {\r\n                  this.linkHandler.remove(link, \"to\");\r\n                });\r\n              }\r\n              this.canvas.remove(port);\r\n            });\r\n          }\r\n        }\r\n        this.canvas.remove(obj);\r\n      });\r\n    }\r\n    if (!this.transactionHandler.active) {\r\n      this.transactionHandler.save(\"remove\");\r\n    }\r\n    this.objects = this.getObjects();\r\n    const { onRemove } = this;\r\n    if (onRemove) {\r\n      onRemove(activeObject);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Remove object by id\r\n   * @param {string} id\r\n   */\r\n  public removeById = (id: string) => {\r\n    const findObject = this.findById(id);\r\n    if (findObject) {\r\n      this.remove(findObject);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Delete at origin object list\r\n   * @param {string} id\r\n   */\r\n  public removeOriginById = (id: string) => {\r\n    const object = this.findOriginByIdWithIndex(id);\r\n    if (object.index > 0) {\r\n      this.objects.splice(object.index, 1);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Duplicate object\r\n   * @returns\r\n   */\r\n  public duplicate = () => {\r\n    const {\r\n      onAdd,\r\n      propertiesToInclude,\r\n      gridOption: { grid = 10 }\r\n    } = this;\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    if (\r\n      typeof activeObject.cloneable !== \"undefined\" &&\r\n      !activeObject.cloneable\r\n    ) {\r\n      return;\r\n    }\r\n    activeObject.clone((clonedObj: FabricObject) => {\r\n      this.canvas.discardActiveObject();\r\n      clonedObj.set({\r\n        left: clonedObj.left + grid,\r\n        top: clonedObj.top + grid,\r\n        evented: true\r\n      });\r\n      if (clonedObj.type === \"activeSelection\") {\r\n        const activeSelection = clonedObj as fabric.ActiveSelection;\r\n        activeSelection.canvas = this.canvas;\r\n        activeSelection.forEachObject((obj: any) => {\r\n          obj.set(\"id\", uuid());\r\n          this.canvas.add(obj);\r\n          this.objects = this.getObjects();\r\n          if (obj.dblclick) {\r\n            obj.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n          }\r\n        });\r\n        if (onAdd) {\r\n          onAdd(activeSelection);\r\n        }\r\n        activeSelection.setCoords();\r\n      } else {\r\n        if (activeObject.id === clonedObj.id) {\r\n          clonedObj.set(\"id\", uuid());\r\n        }\r\n        this.canvas.add(clonedObj);\r\n        this.objects = this.getObjects();\r\n        if (clonedObj.dblclick) {\r\n          clonedObj.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n        }\r\n        if (onAdd) {\r\n          onAdd(clonedObj);\r\n        }\r\n      }\r\n      this.canvas.setActiveObject(clonedObj);\r\n      this.portHandler.create(clonedObj as NodeObject);\r\n      this.canvas.requestRenderAll();\r\n    }, propertiesToInclude);\r\n  };\r\n\r\n  /**\r\n   * Duplicate object by id\r\n   * @param {string} id\r\n   * @returns\r\n   */\r\n  public duplicateById = (id: string) => {\r\n    const {\r\n      onAdd,\r\n      propertiesToInclude,\r\n      gridOption: { grid = 10 }\r\n    } = this;\r\n    const findObject = this.findById(id);\r\n    if (findObject) {\r\n      if (\r\n        typeof findObject.cloneable !== \"undefined\" &&\r\n        !findObject.cloneable\r\n      ) {\r\n        return false;\r\n      }\r\n      findObject.clone((cloned: FabricObject) => {\r\n        cloned.set({\r\n          left: cloned.left + grid,\r\n          top: cloned.top + grid,\r\n          id: uuid(),\r\n          evented: true\r\n        });\r\n        this.canvas.add(cloned);\r\n        this.objects = this.getObjects();\r\n        if (onAdd) {\r\n          onAdd(cloned);\r\n        }\r\n        if (cloned.dblclick) {\r\n          cloned.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n        }\r\n        this.canvas.setActiveObject(cloned);\r\n        this.portHandler.create(cloned as NodeObject);\r\n        this.canvas.requestRenderAll();\r\n      }, propertiesToInclude);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Cut object\r\n   *\r\n   */\r\n  public cut = () => {\r\n    this.copy();\r\n    this.remove();\r\n    this.isCut = true;\r\n  };\r\n\r\n  /**\r\n   * Copy to clipboard\r\n   *\r\n   * @param {*} value\r\n   */\r\n  public copyToClipboard = (value: any) => {\r\n    const textarea = document.createElement(\"textarea\");\r\n    document.body.appendChild(textarea);\r\n    textarea.value = value;\r\n    textarea.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(textarea);\r\n    this.canvas.wrapperEl.focus();\r\n  };\r\n\r\n  /**\r\n   * Copy object\r\n   *\r\n   * @returns\r\n   */\r\n  public copy = () => {\r\n    const { propertiesToInclude } = this;\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (activeObject && activeObject.superType === \"link\") {\r\n      return false;\r\n    }\r\n    if (activeObject) {\r\n      if (\r\n        typeof activeObject.cloneable !== \"undefined\" &&\r\n        !activeObject.cloneable\r\n      ) {\r\n        return false;\r\n      }\r\n      if (activeObject.type === \"activeSelection\") {\r\n        const activeSelection = activeObject as fabric.ActiveSelection;\r\n        if (\r\n          activeSelection\r\n            .getObjects()\r\n            .some((obj: any) => obj.superType === \"node\")\r\n        ) {\r\n          if (this.keyEvent.clipboard) {\r\n            const links = [] as any[];\r\n            const objects = activeSelection\r\n              .getObjects()\r\n              .map((obj: any, index: number) => {\r\n                if (typeof obj.cloneable !== \"undefined\" && !obj.cloneable) {\r\n                  return null;\r\n                }\r\n                if (obj.fromPort.length) {\r\n                  obj.fromPort.forEach((port: any) => {\r\n                    if (port.links.length) {\r\n                      port.links.forEach((link: any) => {\r\n                        const linkTarget = {\r\n                          fromNodeIndex: index,\r\n                          fromPortId: port.id,\r\n                          type: \"curvedLink\",\r\n                          superType: \"link\"\r\n                        } as any;\r\n                        const findIndex = activeSelection\r\n                          .getObjects()\r\n                          .findIndex(\r\n                            (compObj: any) => compObj.id === link.toNode.id\r\n                          );\r\n                        if (findIndex >= 0) {\r\n                          linkTarget.toNodeIndex = findIndex;\r\n                          links.push(linkTarget);\r\n                        }\r\n                      });\r\n                    }\r\n                  });\r\n                }\r\n                return {\r\n                  name: obj.name,\r\n                  description: obj.description,\r\n                  superType: obj.superType,\r\n                  type: obj.type,\r\n                  nodeClazz: obj.nodeClazz,\r\n                  configuration: obj.configuration,\r\n                  properties: {\r\n                    left:\r\n                      activeObject.left + activeObject.width / 2 + obj.left ||\r\n                      0,\r\n                    top:\r\n                      activeObject.top + activeObject.height / 2 + obj.top || 0,\r\n                    iconName: obj.descriptor.icon\r\n                  }\r\n                };\r\n              });\r\n            this.copyToClipboard(\r\n              JSON.stringify(objects.concat(links), null, \"\\t\")\r\n            );\r\n            return true;\r\n          }\r\n          this.clipboard = activeObject;\r\n          return true;\r\n        }\r\n      }\r\n      activeObject.clone((cloned: any) => {\r\n        if (this.keyEvent.clipboard) {\r\n          if (cloned.superType === \"node\") {\r\n            const node = {\r\n              name: cloned.name,\r\n              description: cloned.description,\r\n              superType: cloned.superType,\r\n              type: cloned.type,\r\n              nodeClazz: cloned.nodeClazz,\r\n              configuration: cloned.configuration,\r\n              properties: {\r\n                left: cloned.left || 0,\r\n                top: cloned.top || 0,\r\n                iconName: cloned.descriptor.icon\r\n              }\r\n            };\r\n            const objects = [node];\r\n            this.copyToClipboard(JSON.stringify(objects, null, \"\\t\"));\r\n            return;\r\n          }\r\n          this.copyToClipboard(\r\n            JSON.stringify(cloned.toObject(propertiesToInclude), null, \"\\t\")\r\n          );\r\n          return;\r\n        }\r\n        this.clipboard = cloned;\r\n      }, propertiesToInclude);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Paste object\r\n   *\r\n   * @returns\r\n   */\r\n  public paste = () => {\r\n    const {\r\n      onAdd,\r\n      propertiesToInclude,\r\n      gridOption: { grid = 10 },\r\n      clipboard,\r\n      isCut\r\n    } = this;\r\n    const padding = isCut ? 0 : grid;\r\n    if (!clipboard) {\r\n      return false;\r\n    }\r\n    if (typeof clipboard.cloneable !== \"undefined\" && !clipboard.cloneable) {\r\n      return false;\r\n    }\r\n    this.isCut = false;\r\n    if (clipboard.type === \"activeSelection\") {\r\n      if (clipboard.getObjects().some((obj: any) => obj.superType === \"node\")) {\r\n        this.canvas.discardActiveObject();\r\n        const objects = [] as any[];\r\n        const linkObjects = [] as LinkOption[];\r\n        clipboard.getObjects().forEach((obj: any) => {\r\n          if (typeof obj.cloneable !== \"undefined\" && !obj.cloneable) {\r\n            return;\r\n          }\r\n          const clonedObj = obj.duplicate();\r\n          if (clonedObj.type === \"SwitchNode\") {\r\n            clonedObj.set({\r\n              left: obj.left + padding + padding,\r\n              top: obj.top + padding\r\n            });\r\n          } else {\r\n            clonedObj.set({\r\n              left: obj.left + padding,\r\n              top: obj.top + padding\r\n            });\r\n          }\r\n          if (obj.fromPort.length) {\r\n            obj.fromPort.forEach((port: PortObject) => {\r\n              if (port.links.length) {\r\n                port.links.forEach((link: LinkObject) => {\r\n                  const linkTarget = {\r\n                    fromNode: clonedObj.id,\r\n                    fromPort: port.id\r\n                  } as any;\r\n                  const findIndex = clipboard\r\n                    .getObjects()\r\n                    .findIndex((compObj: any) => compObj.id === link.toNode.id);\r\n                  if (findIndex >= 0) {\r\n                    linkTarget.toNodeIndex = findIndex;\r\n                    linkObjects.push(linkTarget);\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n          if (clonedObj.dblclick) {\r\n            clonedObj.on(\r\n              \"mousedblclick\",\r\n              this.eventHandler.object.mousedblclick\r\n            );\r\n          }\r\n          this.canvas.add(clonedObj);\r\n          this.objects = this.getObjects();\r\n          this.portHandler.create(clonedObj);\r\n          objects.push(clonedObj);\r\n        });\r\n        if (linkObjects.length) {\r\n          linkObjects.forEach((linkObject: any) => {\r\n            const { fromNode, fromPort, toNodeIndex } = linkObject;\r\n            const toNode = objects[toNodeIndex];\r\n            const link = {\r\n              type: \"curvedLink\",\r\n              fromNodeId: fromNode,\r\n              fromPortId: fromPort,\r\n              toNodeId: toNode.id,\r\n              toPortId: toNode.toPort.id\r\n            };\r\n            this.linkHandler.create(link);\r\n          });\r\n        }\r\n        const activeSelection = new fabric.ActiveSelection(objects, {\r\n          canvas: this.canvas,\r\n          ...this.activeSelection\r\n        });\r\n        if (isCut) {\r\n          this.clipboard = null;\r\n        } else {\r\n          this.clipboard = activeSelection;\r\n        }\r\n        this.canvas.setActiveObject(activeSelection);\r\n        this.canvas.renderAll();\r\n        if (!this.transactionHandler.active) {\r\n          this.transactionHandler.save(\"paste\");\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n    clipboard.clone((clonedObj: any) => {\r\n      this.canvas.discardActiveObject();\r\n      clonedObj.set({\r\n        left: clonedObj.left + padding,\r\n        top: clonedObj.top + padding,\r\n        id: isCut ? clonedObj.id : uuid(),\r\n        evented: true\r\n      });\r\n      if (clonedObj.type === \"activeSelection\") {\r\n        clonedObj.canvas = this.canvas;\r\n        clonedObj.forEachObject((obj: any) => {\r\n          obj.set(\"id\", isCut ? obj.id : uuid());\r\n          this.canvas.add(obj);\r\n          if (obj.dblclick) {\r\n            obj.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n          }\r\n          this.objects = this.getObjects();\r\n        });\r\n        if (onAdd) {\r\n          onAdd(clonedObj);\r\n        }\r\n        clonedObj.setCoords();\r\n      } else {\r\n        if (clonedObj.superType === \"node\") {\r\n          clonedObj = clonedObj.duplicate();\r\n        }\r\n        this.canvas.add(clonedObj);\r\n        if (clonedObj.dblclick) {\r\n          clonedObj.on(\"mousedblclick\", this.eventHandler.object.mousedblclick);\r\n        }\r\n        this.objects = this.getObjects();\r\n        if (onAdd) {\r\n          onAdd(clonedObj);\r\n        }\r\n      }\r\n      const newClipboard = clipboard.set({\r\n        top: clonedObj.top,\r\n        left: clonedObj.left\r\n      });\r\n      if (isCut) {\r\n        this.clipboard = null;\r\n      } else {\r\n        this.clipboard = newClipboard;\r\n      }\r\n      this.canvas.setActiveObject(clonedObj);\r\n      this.portHandler.create(clonedObj);\r\n      this.canvas.requestRenderAll();\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"paste\");\r\n      }\r\n    }, propertiesToInclude);\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Load the image\r\n   * @param {FabricImage} obj\r\n   * @param {string} src\r\n   */\r\n  public loadImage = (obj: FabricImage, src: string) => {\r\n    let url = src;\r\n    if (!url) {\r\n      url = \"./images/sample/transparentBg.png\";\r\n    }\r\n    fabric.util.loadImage(url, source => {\r\n      if (obj.type !== \"image\") {\r\n        obj.setPatternFill(\r\n          {\r\n            source,\r\n            repeat: \"repeat\"\r\n          },\r\n          null\r\n        );\r\n        obj.setCoords();\r\n        this.canvas.renderAll();\r\n        return;\r\n      }\r\n      obj.setElement(source);\r\n      obj.setCoords();\r\n      this.canvas.renderAll();\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Find object by object\r\n   * @param {FabricObject} obj\r\n   */\r\n  public find = (obj: FabricObject) => this.findById(obj.id);\r\n\r\n  /**\r\n   * Find object by id\r\n   * @param {string} id\r\n   * @returns {(FabricObject | null)}\r\n   */\r\n  public findById = (id: string): FabricObject | null => {\r\n    let findObject;\r\n    const exist = this.objects.some(obj => {\r\n      if (obj.id === id) {\r\n        findObject = obj;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    if (!exist) {\r\n      warning(true, \"Not found object by id.\");\r\n      return null;\r\n    }\r\n    return findObject;\r\n  };\r\n\r\n  /**\r\n   * Find object in origin list\r\n   * @param {string} id\r\n   * @returns\r\n   */\r\n  public findOriginById = (id: string) => {\r\n    let findObject: FabricObject;\r\n    const exist = this.objects.some(obj => {\r\n      if (obj.id === id) {\r\n        findObject = obj;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    if (!exist) {\r\n      console.warn(\"Not found object by id.\");\r\n      return null;\r\n    }\r\n    return findObject;\r\n  };\r\n\r\n  /**\r\n   * Return origin object list\r\n   * @param {string} id\r\n   * @returns\r\n   */\r\n  public findOriginByIdWithIndex = (id: string) => {\r\n    let findObject;\r\n    let index = -1;\r\n    const exist = this.objects.some((obj, i) => {\r\n      if (obj.id === id) {\r\n        findObject = obj;\r\n        index = i;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    if (!exist) {\r\n      console.warn(\"Not found object by id.\");\r\n      return {};\r\n    }\r\n    return {\r\n      object: findObject,\r\n      index\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Select object\r\n   * @param {FabricObject} obj\r\n   * @param {boolean} [find]\r\n   */\r\n  public select = (obj: FabricObject, find?: boolean) => {\r\n    let findObject = obj;\r\n    if (find) {\r\n      findObject = this.find(obj);\r\n    }\r\n    if (findObject) {\r\n      this.canvas.discardActiveObject();\r\n      this.canvas.setActiveObject(findObject);\r\n      this.canvas.requestRenderAll();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select by id\r\n   * @param {string} id\r\n   */\r\n  public selectById = (id: string) => {\r\n    const findObject = this.findById(id);\r\n    if (findObject) {\r\n      this.canvas.discardActiveObject();\r\n      this.canvas.setActiveObject(findObject);\r\n      this.canvas.requestRenderAll();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select all\r\n   * @returns\r\n   */\r\n  public selectAll = () => {\r\n    this.canvas.discardActiveObject();\r\n    const filteredObjects = this.canvas.getObjects().filter((obj: any) => {\r\n      if (obj.id === \"workarea\") {\r\n        return false;\r\n      } else if (!obj.evented) {\r\n        return false;\r\n      } else if (obj.superType === \"link\") {\r\n        return false;\r\n      } else if (obj.superType === \"port\") {\r\n        return false;\r\n      } else if (obj.superType === \"element\") {\r\n        return false;\r\n      } else if (obj.locked) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n    if (!filteredObjects.length) {\r\n      return;\r\n    }\r\n    if (filteredObjects.length === 1) {\r\n      this.canvas.setActiveObject(filteredObjects[0]);\r\n      this.canvas.renderAll();\r\n      return;\r\n    }\r\n    const activeSelection = new fabric.ActiveSelection(filteredObjects, {\r\n      canvas: this.canvas,\r\n      ...this.activeSelection\r\n    });\r\n    this.canvas.setActiveObject(activeSelection);\r\n    this.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Save origin width, height\r\n   * @param {FabricObject} obj\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  public originScaleToResize = (\r\n    obj: FabricObject,\r\n    width: number,\r\n    height: number\r\n  ) => {\r\n    if (obj.id === \"workarea\") {\r\n      this.setByPartial(obj, {\r\n        workareaWidth: obj.width,\r\n        workareaHeight: obj.height\r\n      });\r\n    }\r\n    this.setByPartial(obj, {\r\n      scaleX: width / obj.width,\r\n      scaleY: height / obj.height\r\n    });\r\n  };\r\n\r\n  /**\r\n   * When set the width, height, Adjust the size\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  public scaleToResize = (width: number, height: number) => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    const { id } = activeObject;\r\n    const obj = {\r\n      id,\r\n      scaleX: width / activeObject.width,\r\n      scaleY: height / activeObject.height\r\n    };\r\n    this.setObject(obj);\r\n    activeObject.setCoords();\r\n    this.canvas.requestRenderAll();\r\n  };\r\n\r\n  /**\r\n   * Import json\r\n   * @param {*} json\r\n   * @param {(canvas: FabricCanvas) => void} [callback]\r\n   */\r\n  public importJSON = (\r\n    json: any,\r\n    callback?: (canvas: FabricCanvas) => void\r\n  ) => {\r\n    if (typeof json === \"string\") {\r\n      json = JSON.parse(json);\r\n    }\r\n    let prevLeft = 0;\r\n    let prevTop = 0;\r\n    this.canvas.setBackgroundColor(\r\n      this.canvasOption.backgroundColor,\r\n      this.canvas.renderAll.bind(this.canvas)\r\n    );\r\n    const workareaExist = json.filter(\r\n      (obj: FabricObjectOption) => obj.id === \"workarea\"\r\n    );\r\n    if (!this.workarea) {\r\n      this.workareaHandler.init();\r\n    }\r\n    if (!workareaExist.length) {\r\n      this.canvas.centerObject(this.workarea);\r\n      this.workarea.setCoords();\r\n      prevLeft = this.workarea.left;\r\n      prevTop = this.workarea.top;\r\n    } else {\r\n      const workarea = workareaExist[0];\r\n      prevLeft = workarea.left;\r\n      prevTop = workarea.top;\r\n      this.workarea.set(workarea);\r\n      this.canvas.centerObject(this.workarea);\r\n      this.workareaHandler.setImage(workarea.src, true);\r\n      this.workarea.setCoords();\r\n    }\r\n    setTimeout(() => {\r\n      json.forEach((obj: FabricObjectOption) => {\r\n        if (obj.id === \"workarea\") {\r\n          return;\r\n        }\r\n        const canvasWidth = this.canvas.getWidth();\r\n        const canvasHeight = this.canvas.getHeight();\r\n        const {\r\n          width,\r\n          height,\r\n          scaleX,\r\n          scaleY,\r\n          layout,\r\n          left,\r\n          top\r\n        } = this.workarea;\r\n        if (layout === \"fullscreen\") {\r\n          const leftRatio = canvasWidth / (width * scaleX);\r\n          const topRatio = canvasHeight / (height * scaleY);\r\n          obj.left *= leftRatio;\r\n          obj.top *= topRatio;\r\n          obj.scaleX *= leftRatio;\r\n          obj.scaleY *= topRatio;\r\n        } else {\r\n          const diffLeft = left - prevLeft;\r\n          const diffTop = top - prevTop;\r\n          obj.left += diffLeft;\r\n          obj.top += diffTop;\r\n        }\r\n        if (obj.superType === \"element\") {\r\n          obj.id = uuid();\r\n        }\r\n        this.add(obj, false, true, false);\r\n        this.canvas.renderAll();\r\n      });\r\n      if (callback) {\r\n        callback(this.canvas);\r\n      }\r\n    }, 300);\r\n    this.canvas.setZoom(1);\r\n  };\r\n\r\n  /**\r\n   * Export json\r\n   */\r\n  public exportJSON = () => this.canvas.toJSON(this.propertiesToInclude);\r\n\r\n  /**\r\n   * Active selection to group\r\n   * @returns\r\n   */\r\n  public toGroup = (target?: FabricObject) => {\r\n    const activeObject =\r\n      target || (this.canvas.getActiveObject() as fabric.ActiveSelection);\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    if (activeObject.type !== \"activeSelection\") {\r\n      return;\r\n    }\r\n    const group = activeObject.toGroup() as any;\r\n    group.set({\r\n      id: uuid(),\r\n      name: \"New group\",\r\n      type: \"group\",\r\n      ...this.defaultOption\r\n    });\r\n    this.objects = this.getObjects();\r\n    if (!this.transactionHandler.active) {\r\n      this.transactionHandler.save(\"group\");\r\n    }\r\n    if (this.onSelect) {\r\n      this.onSelect(group);\r\n    }\r\n    this.canvas.renderAll();\r\n    return group;\r\n  };\r\n\r\n  /**\r\n   * Group to active selection\r\n   * @returns\r\n   */\r\n  public toActiveSelection = (target?: FabricObject) => {\r\n    const activeObject =\r\n      target || (this.canvas.getActiveObject() as fabric.Group);\r\n    if (!activeObject) {\r\n      return;\r\n    }\r\n    if (activeObject.type !== \"group\") {\r\n      return;\r\n    }\r\n    const activeSelection = activeObject.toActiveSelection();\r\n    this.objects = this.getObjects();\r\n    if (!this.transactionHandler.active) {\r\n      this.transactionHandler.save(\"ungroup\");\r\n    }\r\n    if (this.onSelect) {\r\n      this.onSelect(activeSelection);\r\n    }\r\n    this.canvas.renderAll();\r\n    return activeSelection;\r\n  };\r\n\r\n  /**\r\n   * Bring forward\r\n   */\r\n  public bringForward = () => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (activeObject) {\r\n      this.canvas.bringForward(activeObject);\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"bringForward\");\r\n      }\r\n      const { onModified } = this;\r\n      if (onModified) {\r\n        onModified(activeObject);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Bring to front\r\n   */\r\n  public bringToFront = () => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (activeObject) {\r\n      this.canvas.bringToFront(activeObject);\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"bringToFront\");\r\n      }\r\n      const { onModified } = this;\r\n      if (onModified) {\r\n        onModified(activeObject);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Send backwards\r\n   * @returns\r\n   */\r\n  public sendBackwards = () => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (activeObject) {\r\n      const firstObject = this.canvas.getObjects()[1] as FabricObject;\r\n      if (firstObject.id === activeObject.id) {\r\n        return;\r\n      }\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"sendBackwards\");\r\n      }\r\n      this.canvas.sendBackwards(activeObject);\r\n      const { onModified } = this;\r\n      if (onModified) {\r\n        onModified(activeObject);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Send to back\r\n   */\r\n  public sendToBack = () => {\r\n    const activeObject = this.canvas.getActiveObject() as FabricObject;\r\n    if (activeObject) {\r\n      this.canvas.sendToBack(activeObject);\r\n      this.canvas.sendToBack(this.canvas.getObjects()[1]);\r\n      if (!this.transactionHandler.active) {\r\n        this.transactionHandler.save(\"sendToBack\");\r\n      }\r\n      const { onModified } = this;\r\n      if (onModified) {\r\n        onModified(activeObject);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Clear canvas\r\n   * @param {boolean} [includeWorkarea=false]\r\n   */\r\n  public clear = (includeWorkarea = false) => {\r\n    const ids = this.canvas.getObjects().reduce((prev, curr: any) => {\r\n      if (curr.superType === \"element\") {\r\n        prev.push(curr.id);\r\n        return prev;\r\n      }\r\n      return prev;\r\n    }, []);\r\n    this.elementHandler.removeByIds(ids);\r\n    if (includeWorkarea) {\r\n      this.canvas.clear();\r\n      this.workarea = null;\r\n    } else {\r\n      this.canvas.getObjects().forEach((obj: any) => {\r\n        if (obj.id === \"grid\" || obj.id === \"workarea\") {\r\n          return;\r\n        }\r\n        this.canvas.remove(obj);\r\n      });\r\n    }\r\n    this.objects = this.getObjects();\r\n    this.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Start request animation frame\r\n   */\r\n  public startRequestAnimFrame = () => {\r\n    if (!this.isRequsetAnimFrame) {\r\n      this.isRequsetAnimFrame = true;\r\n      const render = () => {\r\n        this.canvas.renderAll();\r\n        this.requestFrame = fabric.util.requestAnimFrame(render);\r\n      };\r\n      fabric.util.requestAnimFrame(render);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Stop request animation frame\r\n   */\r\n  public stopRequestAnimFrame = () => {\r\n    this.isRequsetAnimFrame = false;\r\n    const cancelRequestAnimFrame = (() =>\r\n      window.cancelAnimationFrame ||\r\n      // || window.webkitCancelRequestAnimationFrame\r\n      // || window.mozCancelRequestAnimationFrame\r\n      // || window.oCancelRequestAnimationFrame\r\n      // || window.msCancelRequestAnimationFrame\r\n      clearTimeout)();\r\n    cancelRequestAnimFrame(this.requestFrame);\r\n  };\r\n\r\n  /**\r\n   * Save target object as image\r\n   * @param {FabricObject} targetObject\r\n   * @param {string} [option={ name: 'New Image', format: 'png', quality: 1 }]\r\n   */\r\n  public saveImage = (\r\n    targetObject: FabricObject,\r\n    option = { name: \"New Image\", format: \"png\", quality: 1 }\r\n  ) => {\r\n    let dataUrl;\r\n    let target = targetObject;\r\n    if (target) {\r\n      dataUrl = target.toDataURL(option);\r\n    } else {\r\n      target = this.canvas.getActiveObject() as FabricObject;\r\n      if (target) {\r\n        dataUrl = target.toDataURL(option);\r\n      }\r\n    }\r\n    if (dataUrl) {\r\n      const anchorEl = document.createElement(\"a\");\r\n      anchorEl.href = dataUrl;\r\n      anchorEl.download = `${option.name}.png`;\r\n      document.body.appendChild(anchorEl); // required for firefox\r\n      anchorEl.click();\r\n      anchorEl.remove();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Save canvas as image\r\n   * @param {string} [option={ name: 'New Image', format: 'png', quality: 1 }]\r\n   */\r\n  public saveCanvasImage = (\r\n    option = { name: \"New Image\", format: \"png\", quality: 1 }\r\n  ) => {\r\n    const dataUrl = this.canvas.toDataURL(option);\r\n    if (dataUrl) {\r\n      const anchorEl = document.createElement(\"a\");\r\n      anchorEl.href = dataUrl;\r\n      anchorEl.download = `${option.name}.png`;\r\n      document.body.appendChild(anchorEl); // required for firefox\r\n      anchorEl.click();\r\n      anchorEl.remove();\r\n    }\r\n  };\r\n}\r\n\r\nexport default Handler;\r\n","import { fabric } from \"fabric\";\r\nimport isEqual from \"lodash/isEqual\";\r\n\r\nimport Handler from \"./Handler\";\r\n\r\nexport type GrayscaleModeType = \"average\" | \"luminosity\" | \"lightness\";\r\n\r\nexport interface RemoveColorFilter {\r\n  color?: string;\r\n  distance?: number;\r\n  fragmentSource?: any;\r\n  useAlpahe?: any;\r\n}\r\n\r\nexport interface BlendColorFilter {\r\n  color?: string;\r\n  mode?: string;\r\n  alpha?: number;\r\n}\r\n\r\nexport interface GammaFilter {\r\n  gamma?: number[];\r\n}\r\n\r\nexport interface BlendImageFilter {\r\n  image?: fabric.Image;\r\n  mode?: string;\r\n  alpha?: number;\r\n}\r\n\r\nexport interface HueRotationFilter {\r\n  rotation?: number;\r\n}\r\n\r\nexport type ResizeType = \"bilinear\" | \"hermite\" | \"sliceHack\" | \"lanczos\";\r\n\r\nexport interface ResizeFilter {\r\n  resizeType?: ResizeType;\r\n  scaleX?: number;\r\n  scaleY?: number;\r\n  lanczosLobes?: number;\r\n}\r\n\r\nexport interface TintFilter {\r\n  color?: string;\r\n  opacity?: number;\r\n}\r\n\r\nexport interface MaskFilter {\r\n  mask?: fabric.Image;\r\n  /**\r\n   * Rgb channel (0, 1, 2 or 3)\r\n   * @default 0\r\n   */\r\n  channel: number;\r\n}\r\n\r\nexport interface MultiplyFilter {\r\n  /**\r\n   * Color to multiply the image pixels with\r\n   * @default #000000\r\n   */\r\n  color: string;\r\n}\r\n\r\nexport interface GradientTransparencyFilter {\r\n  /** @default 100 */\r\n  threshold?: number;\r\n}\r\n\r\nexport interface ColorMatrixFilter {\r\n  /** Filter matrix */\r\n  matrix?: number[];\r\n}\r\n\r\nexport interface RemoveWhiteFilter {\r\n  /** @default 30 */\r\n  threshold?: number;\r\n  /** @default 20 */\r\n  distance?: number;\r\n}\r\n\r\nexport type ValuesOf<T extends any[]> = T[number];\r\n\r\nexport interface IFilter {\r\n  type: typeof FILTER_TYPES[number];\r\n  [key: string]: any;\r\n}\r\n\r\nexport const FILTER_TYPES = [\r\n  \"grayscale\",\r\n  \"invert\",\r\n  \"remove-color\",\r\n  \"sepia\",\r\n  \"brownie\",\r\n  \"brightness\",\r\n  \"contrast\",\r\n  \"saturation\",\r\n  \"noise\",\r\n  \"vintage\",\r\n  \"pixelate\",\r\n  \"blur\",\r\n  \"sharpen\",\r\n  \"emboss\",\r\n  \"technicolor\",\r\n  \"polaroid\",\r\n  \"blend-color\",\r\n  \"gamma\",\r\n  \"kodachrome\",\r\n  \"blackwhite\",\r\n  \"blend-image\",\r\n  \"hue\",\r\n  \"resize\",\r\n  \"tint\",\r\n  \"mask\",\r\n  \"multiply\",\r\n  \"sepia2\"\r\n];\r\n\r\nexport const capitalize = (str: string) =>\r\n  str ? str.charAt(0).toUpperCase() + str.slice(1) : false;\r\n\r\nconst SHARPEN_MATRIX = [0, -1, 0, -1, 5, -1, 0, -1, 0];\r\nconst EMBOSS_MATRIX = [1, 1, 1, 1, 0.7, -1, -1, -1, -1];\r\n\r\n/**\r\n * Image Handler\r\n * @author salgum1114\r\n * @date 2019-09-01\r\n * @class ImageHandler\r\n * @extends {Handler}\r\n */\r\nclass ImageHandler {\r\n  handler?: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Create filter by type\r\n   * @param {IFilter} filter\r\n   */\r\n  public createFilter = (filter: IFilter) => {\r\n    const { type: filterType, ...other } = filter;\r\n    const type = filterType.toLowerCase();\r\n    if (type === \"grayscale\") {\r\n      return new fabric.Image.filters.Grayscale(other);\r\n    } else if (type === \"invert\") {\r\n      return new fabric.Image.filters.Invert();\r\n      // } else if (type === 'remove-color') {\r\n      //     return new fabric.Image.filters.RemoveColor(other);\r\n    } else if (type === \"sepia\") {\r\n      return new fabric.Image.filters.Sepia();\r\n      // } else if (type === 'brownie') {\r\n      //     return new fabric.Image.filters.Brownie();\r\n    } else if (type === \"brightness\") {\r\n      return new fabric.Image.filters.Brightness({\r\n        brightness: other.brightness\r\n      });\r\n    } else if (type === \"contrast\") {\r\n      return new fabric.Image.filters.Contrast(other);\r\n    } else if (type === \"saturation\") {\r\n      return new fabric.Image.filters.Saturation(other);\r\n    } else if (type === \"noise\") {\r\n      return new fabric.Image.filters.Noise({ noise: other.noise });\r\n      // } else if (type === 'vintage') {\r\n      //     return new fabric.Image.filters.Vintage();\r\n    } else if (type === \"pixelate\") {\r\n      return new fabric.Image.filters.Pixelate(other);\r\n      // } else if (type === 'blur') {\r\n      //     return new fabric.Image.filters.Blur(other);\r\n    } else if (type === \"sharpen\") {\r\n      return new fabric.Image.filters.Convolute({\r\n        matrix: SHARPEN_MATRIX\r\n      });\r\n    } else if (type === \"emboss\") {\r\n      return new fabric.Image.filters.Convolute({\r\n        matrix: EMBOSS_MATRIX\r\n      });\r\n      // } else if (type === 'technicolor') {\r\n      //     return new fabric.Image.filters.Technicolor();\r\n      // } else if (type === 'polaroid') {\r\n      //     return new fabric.Image.filters.Polaroid();\r\n    } else if (type === \"blend-color\") {\r\n      return new fabric.Image.filters.BlendColor(other);\r\n      // } else if (type === 'gamma') {\r\n      //     return new fabric.Image.filters.Gamma(other);\r\n      // } else if (type === 'kodachrome') {\r\n      //     return new fabric.Image.filters.Kodachrome();\r\n      // } else if (type === 'blackwhite') {\r\n      //     return new fabric.Image.filters.BlackWhite();\r\n    } else if (type === \"blend-image\") {\r\n      return new fabric.Image.filters.BlendImage(other);\r\n      // } else if (type === 'hue') {\r\n      //     return new fabric.Image.filters.HueRotation(other);\r\n    } else if (type === \"resize\") {\r\n      return new fabric.Image.filters.Resize(other);\r\n    } else if (type === \"tint\") {\r\n      return new fabric.Image.filters.Tint(other);\r\n    } else if (type === \"mask\") {\r\n      return new fabric.Image.filters.Mask({\r\n        channel: other.channel,\r\n        mask: other.mask\r\n      });\r\n    } else if (type === \"multiply\") {\r\n      return new fabric.Image.filters.Multiply({\r\n        color: other.color\r\n      });\r\n    } else if (type === \"sepia2\") {\r\n      return new fabric.Image.filters.Sepia2(other);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Create filter by types\r\n   * @param {IFilter[]} filters\r\n   */\r\n  public createFilters = (filters: IFilter[]) => {\r\n    const createdFilters = filters.reduce((prev, filter) => {\r\n      let type = filter.type;\r\n      if (\r\n        type.toLowerCase() === \"convolute\" &&\r\n        isEqual(filter.matrix, SHARPEN_MATRIX)\r\n      ) {\r\n        type = \"sharpen\";\r\n      } else if (\r\n        type.toLowerCase() === \"convolute\" &&\r\n        isEqual(filter.matrix, EMBOSS_MATRIX)\r\n      ) {\r\n        type = \"emboss\";\r\n      }\r\n      const findIndex = FILTER_TYPES.findIndex(\r\n        filterType => type.toLowerCase() === filterType\r\n      );\r\n      if (findIndex > -1) {\r\n        prev[findIndex] = this.createFilter({\r\n          ...filter,\r\n          type\r\n        });\r\n      }\r\n      return prev;\r\n    }, []);\r\n    return createdFilters;\r\n  };\r\n\r\n  /**\r\n   * Apply filter by type\r\n   * @param {string} type\r\n   * @param {*} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyFilterByType = (\r\n    type: string,\r\n    apply = true,\r\n    value?: any,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    const obj = imageObj || (this.handler.canvas.getActiveObject() as any);\r\n    const findIndex = FILTER_TYPES.findIndex(ft => ft === type);\r\n    if (obj.filters && findIndex > -1) {\r\n      if (apply) {\r\n        obj.filters[findIndex] = this.createFilter({\r\n          type,\r\n          ...value\r\n        });\r\n        obj.applyFilters();\r\n      } else {\r\n        obj.filters[findIndex] = false;\r\n        obj.applyFilters();\r\n      }\r\n      this.handler.canvas.requestRenderAll();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Apply filter in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {number} index\r\n   * @param {fabric.IBaseFilter} filter\r\n   */\r\n  public applyFilter = (\r\n    index: number,\r\n    filter: fabric.IBaseFilter | boolean,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    const obj = imageObj || (this.handler.canvas.getActiveObject() as any);\r\n    if (obj.filters) {\r\n      obj.filters[index] = filter;\r\n      obj.applyFilters();\r\n      this.handler.canvas.requestRenderAll();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Apply filter value in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {number} index\r\n   * @param {string} prop\r\n   * @param {any} value\r\n   */\r\n  public applyFilterValue = (\r\n    index: number,\r\n    prop: string,\r\n    value: any,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    const obj =\r\n      imageObj || (this.handler.canvas.getActiveObject() as fabric.Image);\r\n    if (obj.filters) {\r\n      const filter = obj.filters[index];\r\n      if (filter) {\r\n        filter.setOptions({\r\n          [prop]: value\r\n        });\r\n        obj.applyFilters();\r\n        this.handler.canvas.requestRenderAll();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Apply grayscale in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {boolean} [grayscale=false]\r\n   * @param {GrayscaleModeType} [value]\r\n   */\r\n  public applyGrayscale = (\r\n    grayscale = false,\r\n    value?: GrayscaleModeType,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      0,\r\n      grayscale &&\r\n        new fabric.Image.filters.Grayscale(\r\n          value\r\n            ? {\r\n                mode: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply invert in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {boolean} [invert=false]\r\n   */\r\n  public applyInvert = (invert = false, imageObj?: fabric.Image): void => {\r\n    this.applyFilter(1, invert && new fabric.Image.filters.Invert(), imageObj);\r\n  };\r\n\r\n  /**\r\n   * Apply remove color in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {boolean} [removeColor=false]\r\n   * @param {RemoveColorFilter} [value]\r\n   */\r\n  // public applyRemoveColor = (removeColor = false, value?: RemoveColorFilter, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(2, removeColor && new fabric.Image.filters.RemoveColor(value), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply sepia in image\r\n   * @param {fabric.Image} [imageObj]\r\n   * @param {boolean} [sepia=false]\r\n   */\r\n  public applySepia = (sepia = false, imageObj?: fabric.Image): void => {\r\n    this.applyFilter(3, sepia && new fabric.Image.filters.Sepia(), imageObj);\r\n  };\r\n\r\n  /**\r\n   * Apply brownie in image\r\n   * @param {boolean} [brownie=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyBrownie = (brownie = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(4, brownie && new fabric.Image.filters.Brownie(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply brightness in image\r\n   * @param {boolean} [brightness=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyBrightness = (\r\n    brightness = false,\r\n    value?: number,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      5,\r\n      brightness &&\r\n        new fabric.Image.filters.Brightness(\r\n          value\r\n            ? {\r\n                brightness: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply contrast in image\r\n   * @param {boolean} [contrast=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyContrast = (\r\n    contrast = false,\r\n    value?: number,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      6,\r\n      contrast &&\r\n        new fabric.Image.filters.Contrast(\r\n          value\r\n            ? {\r\n                contrast: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply saturation in image\r\n   * @param {boolean} [saturation=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applySaturation = (\r\n    saturation = false,\r\n    value?: number,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      7,\r\n      saturation &&\r\n        new fabric.Image.filters.Saturation(\r\n          value\r\n            ? {\r\n                saturation: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply noise in image\r\n   * @param {boolean} [noise=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyNoise = (\r\n    noise = false,\r\n    value?: number,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      8,\r\n      noise &&\r\n        new fabric.Image.filters.Noise(\r\n          value\r\n            ? {\r\n                noise: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply vintage in image\r\n   * @param {boolean} [vintage=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyVintage = (vintage = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(9, vintage && new fabric.Image.filters.Vintage(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply pixelate in image\r\n   * @param {boolean} [pixelate=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyPixelate = (\r\n    pixelate = false,\r\n    value?: number,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      10,\r\n      pixelate &&\r\n        new fabric.Image.filters.Pixelate(\r\n          value\r\n            ? {\r\n                blocksize: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply blur in image\r\n   * @param {boolean} [blur=false]\r\n   * @param {number} [value]\r\n   * @param {fabric.Image} imageObj\r\n   */\r\n  // public applyBlur = (blur = false, value?: number, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(11, blur && new fabric.Image.filters.Blur(value ? {\r\n  //         value,\r\n  //     } : undefined), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply sharpen in image\r\n   * @param {boolean} [sharpen=false]\r\n   * @param {number[]} [value=[0, -1,  0, -1,  5, -1, 0, -1,  0]]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applySharpen = (\r\n    sharpen = false,\r\n    value: number[] = SHARPEN_MATRIX,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      12,\r\n      sharpen &&\r\n        new fabric.Image.filters.Convolute(\r\n          value\r\n            ? {\r\n                matrix: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply emboss in image\r\n   * @param {boolean} [emboss=false]\r\n   * @param {number[]} [value=[1, 1, 1, 1, 0.7, -1, -1, -1, -1]]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyEmboss = (\r\n    emboss = false,\r\n    value: number[] = EMBOSS_MATRIX,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      13,\r\n      emboss &&\r\n        new fabric.Image.filters.Convolute(\r\n          value\r\n            ? {\r\n                matrix: value\r\n              }\r\n            : undefined\r\n        ),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply technicolor in image\r\n   * @param {boolean} [technicolor=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyTechnicolor = (technicolor = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(14, technicolor && new fabric.Image.filters.Technicolor(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply polaroid in image\r\n   * @param {boolean} [polaroid=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyPolaroid = (polaroid = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(15, polaroid && new fabric.Image.filters.Polaroid(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply blend color in image\r\n   * @param {boolean} [blend=false]\r\n   * @param {BlendColorFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyBlendColor = (\r\n    blend = false,\r\n    value?: BlendColorFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      16,\r\n      blend && new fabric.Image.filters.BlendColor(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply gamma in image\r\n   * @param {boolean} [gamma=false]\r\n   * @param {GammaFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyGamma = (gamma = false, value?: GammaFilter, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(17, gamma && new fabric.Image.filters.Gamma(value), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply kodachrome in image\r\n   * @param {boolean} [kodachrome=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyKodachrome = (kodachrome = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(18, kodachrome && new fabric.Image.filters.Kodachrome(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply black white in image\r\n   * @param {boolean} [blackWhite=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyBlackWhite = (blackWhite = false, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(19, blackWhite && new fabric.Image.filters.BlackWhite(), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply blend image in image\r\n   * @param {boolean} [blendImage=false]\r\n   * @param {BlendImageFilter} value\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyBlendImage = (\r\n    blendImage = false,\r\n    value?: BlendImageFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      20,\r\n      blendImage && new fabric.Image.filters.BlendImage(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply hue rotation in image\r\n   * @param {boolean} [hue=false]\r\n   * @param {HueRotationFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  // public applyHue = (hue = false, value?: HueRotationFilter, imageObj?: fabric.Image): void => {\r\n  //     this.applyFilter(21, hue && new fabric.Image.filters.HueRotation(value ? {\r\n  //         rotation: value,\r\n  //     } : undefined), imageObj);\r\n  // }\r\n\r\n  /**\r\n   * Apply resize in image\r\n   * @param {boolean} [resize=false]\r\n   * @param {ResizeFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyResize = (\r\n    resize = false,\r\n    value?: ResizeFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      22,\r\n      resize && new fabric.Image.filters.Resize(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply tint in image\r\n   * @param {boolean} [tint=false]\r\n   * @param {TintFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyTint = (\r\n    tint = false,\r\n    value?: TintFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      23,\r\n      tint && new fabric.Image.filters.Tint(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply mask in image\r\n   * @param {boolean} [mask=false]\r\n   * @param {MaskFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyMask = (\r\n    mask = false,\r\n    value?: MaskFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      24,\r\n      mask && new fabric.Image.filters.Mask(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply multiply in image\r\n   * @param {boolean} [multiply=false]\r\n   * @param {MultiplyFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyMultiply = (\r\n    multiply = false,\r\n    value?: MultiplyFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      25,\r\n      multiply && new fabric.Image.filters.Multiply(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply sepia2 in image\r\n   * @param {boolean} [sepia2=false]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applySepia2 = (sepia2 = false, imageObj?: fabric.Image): void => {\r\n    this.applyFilter(26, sepia2 && new fabric.Image.filters.Sepia2(), imageObj);\r\n  };\r\n\r\n  /**\r\n   * Apply gradient transparency in image\r\n   * @param {boolean} [gradientTransparency=false]\r\n   * @param {GradientTransparencyFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyGradientTransparency = (\r\n    gradientTransparency = false,\r\n    value?: GradientTransparencyFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      27,\r\n      gradientTransparency &&\r\n        new fabric.Image.filters.GradientTransparency(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply color matrix in image\r\n   * @param {boolean} [colorMatrix=false]\r\n   * @param {ColorMatrixFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyColorMatrix = (\r\n    colorMatrix = false,\r\n    value?: ColorMatrixFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      28,\r\n      colorMatrix && new fabric.Image.filters.ColorMatrix(value),\r\n      imageObj\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Apply remove white in image\r\n   * @param {boolean} [removeWhite=false]\r\n   * @param {RemoveWhiteFilter} [value]\r\n   * @param {fabric.Image} [imageObj]\r\n   */\r\n  public applyRemoveWhite = (\r\n    removeWhite = false,\r\n    value?: RemoveWhiteFilter,\r\n    imageObj?: fabric.Image\r\n  ): void => {\r\n    this.applyFilter(\r\n      29,\r\n      removeWhite && new fabric.Image.filters.RemoveWhite(value),\r\n      imageObj\r\n    );\r\n  };\r\n}\r\n\r\nexport default ImageHandler;\r\n","import * as echarts from 'echarts';\r\n\r\nimport Handler from './Handler';\r\n\r\nclass ChartHandler {\r\n    handler?: Handler;\r\n    instance?: echarts.ECharts;\r\n\r\n    constructor(handler: Handler) {\r\n        this.handler = handler;\r\n    }\r\n}\r\n\r\nexport default ChartHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { VideoObject } from \"../objects/Video\";\r\nimport { ChartObject } from \"../objects/Chart\";\r\nimport { IframeObject } from \"../objects/Iframe\";\r\nimport { ElementObject } from \"../objects/Element\";\r\n\r\nexport type ElementType = \"container\" | \"script\" | \"style\";\r\n\r\nexport type ElementObjectType =\r\n  | VideoObject\r\n  | ChartObject\r\n  | IframeObject\r\n  | ElementObject;\r\n\r\nexport interface ElementCode {\r\n  html?: string;\r\n  css?: string;\r\n  js?: string;\r\n}\r\n\r\nclass ElementHandler {\r\n  handler?: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Set element by id\r\n   * @param {string} id\r\n   * @param {*} source\r\n   * @returns {void}\r\n   */\r\n  public setById = (id: string, source: any): void => {\r\n    const obj = this.handler.findById(id) as ElementObjectType;\r\n    if (!obj) {\r\n      return;\r\n    }\r\n    this.set(obj, source);\r\n  };\r\n\r\n  /**\r\n   * Set element\r\n   * @param {ElementObjectType} obj\r\n   * @param {*} source\r\n   */\r\n  public set = (obj: ElementObjectType, source: any) => {\r\n    obj.setSource(source);\r\n  };\r\n\r\n  /**\r\n   * Find element by id with type\r\n   * @param {string} id\r\n   * @param {ElementType} [type='container']\r\n   * @returns\r\n   */\r\n  public findById = (id: string, type: ElementType = \"container\") => {\r\n    return document.getElementById(`${id}_${type}`);\r\n  };\r\n\r\n  /**\r\n   * Remove element\r\n   * @param {HTMLElement} el\r\n   * @returns\r\n   */\r\n  public remove = (el: HTMLElement) => {\r\n    if (!el) {\r\n      return;\r\n    }\r\n    this.handler.container.removeChild(el);\r\n  };\r\n\r\n  /**\r\n   * Remove element by id\r\n   * @param {string} id\r\n   */\r\n  public removeById = (id: string) => {\r\n    const el = this.findById(id);\r\n    const scriptEl = this.findById(id, \"script\");\r\n    const styleEl = this.findById(id, \"style\");\r\n    if (el) {\r\n      if (el.remove) {\r\n        el.remove();\r\n      } else {\r\n        this.remove(el);\r\n      }\r\n    }\r\n    if (scriptEl) {\r\n      if (scriptEl.remove) {\r\n        scriptEl.remove();\r\n      } else {\r\n        document.head.removeChild(scriptEl);\r\n      }\r\n    }\r\n    if (styleEl) {\r\n      if (styleEl.remove) {\r\n        styleEl.remove();\r\n      } else {\r\n        document.head.removeChild(styleEl);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Remove element by ids\r\n   * @param {string[]} ids\r\n   */\r\n  public removeByIds = (ids: string[]) => {\r\n    ids.forEach(id => {\r\n      this.removeById(id);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Set position\r\n   * @param {HTMLElement} el\r\n   * @param {number} left\r\n   * @param {number} top\r\n   * @returns\r\n   */\r\n  public setPosition = (el: HTMLElement, obj: fabric.Object) => {\r\n    if (!el) {\r\n      return;\r\n    }\r\n    obj.setCoords();\r\n    const zoom = this.handler.canvas.getZoom();\r\n    const { scaleX, scaleY, width, height } = obj;\r\n    const { left, top } = obj.getBoundingRect(false);\r\n    const padLeft = (width * scaleX * zoom - width) / 2;\r\n    const padTop = (height * scaleY * zoom - height) / 2;\r\n    el.style.left = `${left + padLeft}px`;\r\n    el.style.top = `${top + padTop}px`;\r\n  };\r\n\r\n  public setPositionByOrigin = (\r\n    el: HTMLElement,\r\n    obj: fabric.Object,\r\n    left: number,\r\n    top: number\r\n  ) => {\r\n    if (!el) {\r\n      return;\r\n    }\r\n    obj.setCoords();\r\n    const zoom = this.handler.canvas.getZoom();\r\n    const { scaleX, scaleY, width, height } = obj;\r\n    const padLeft = (width * scaleX * zoom - width) / 2;\r\n    const padTop = (height * scaleY * zoom - height) / 2;\r\n    el.style.left = `${left + padLeft}px`;\r\n    el.style.top = `${top + padTop}px`;\r\n  };\r\n\r\n  /**\r\n   * Set size\r\n   * @param {HTMLElement} el\r\n   * @param {number} width\r\n   * @param {number} height\r\n   * @returns\r\n   */\r\n  public setSize = (el: HTMLElement, obj: fabric.Object) => {\r\n    if (!el) {\r\n      return;\r\n    }\r\n    const { width, height } = obj;\r\n    el.style.width = `${width}px`;\r\n    el.style.height = `${height}px`;\r\n  };\r\n\r\n  /**\r\n   * Set scale or angle\r\n   * @param {HTMLElement} el\r\n   * @param {number} scaleX\r\n   * @param {number} scaleY\r\n   * @param {number} angle\r\n   * @returns\r\n   */\r\n  public setScaleOrAngle = (el: HTMLElement, obj: fabric.Object) => {\r\n    if (!el) {\r\n      return;\r\n    }\r\n    const zoom = this.handler.canvas.getZoom();\r\n    const { scaleX, scaleY, angle } = obj;\r\n    el.style.transform = `rotate(${angle}deg) scale(${scaleX * zoom}, ${scaleY *\r\n      zoom})`;\r\n  };\r\n}\r\n\r\nexport default ElementHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { Handler } from \".\";\r\nimport { FabricImage } from \"../utils\";\r\n\r\nclass CropHandler {\r\n  handler: Handler;\r\n  cropRect: fabric.Rect;\r\n  cropObject: FabricImage;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n    this.cropRect = null;\r\n    this.cropObject = null;\r\n  }\r\n\r\n  /**\r\n   * Validate crop type\r\n   * @returns\r\n   */\r\n  public validType = () => {\r\n    const activeObject = this.handler.canvas.getActiveObject();\r\n    if (!activeObject) {\r\n      return false;\r\n    }\r\n    if (activeObject.type === \"image\") {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Start crop image\r\n   */\r\n  public start = () => {\r\n    if (this.validType()) {\r\n      this.handler.interactionMode = \"crop\";\r\n      this.cropObject = this.handler.canvas.getActiveObject() as FabricImage;\r\n      const { left, top } = this.cropObject;\r\n      this.cropRect = new fabric.Rect({\r\n        width: this.cropObject.width,\r\n        height: this.cropObject.height,\r\n        scaleX: this.cropObject.scaleX,\r\n        scaleY: this.cropObject.scaleY,\r\n        originX: \"left\",\r\n        originY: \"top\",\r\n        left,\r\n        top,\r\n        hasRotatingPoint: false,\r\n        fill: \"rgba(0, 0, 0, 0.2)\"\r\n      });\r\n      this.handler.canvas.add(this.cropRect);\r\n      this.handler.canvas.setActiveObject(this.cropRect);\r\n      this.cropObject.selectable = false;\r\n      this.cropObject.evented = false;\r\n      this.handler.canvas.renderAll();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Finish crop image\r\n   */\r\n  public finish = () => {\r\n    const { left, top, width, height, scaleX, scaleY } = this.cropRect;\r\n    const croppedImg = this.cropObject.toDataURL({\r\n      left: left - this.cropObject.left,\r\n      top: top - this.cropObject.top,\r\n      width: width * scaleX,\r\n      height: height * scaleY\r\n    });\r\n    this.handler.setImage(this.cropObject, croppedImg);\r\n    this.cancel();\r\n  };\r\n\r\n  /**\r\n   * Cancel crop\r\n   */\r\n  cancel = () => {\r\n    this.handler.interactionMode = \"selection\";\r\n    this.cropObject.selectable = true;\r\n    this.cropObject.evented = true;\r\n    this.handler.canvas.setActiveObject(this.cropObject);\r\n    this.handler.canvas.remove(this.cropRect);\r\n    this.cropRect = null;\r\n    this.cropObject = null;\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Resize crop\r\n   * @param {FabricEvent} opt\r\n   */\r\n  resize = (opt: fabric.IEvent) => {\r\n    const {\r\n      target,\r\n      transform: { original, corner }\r\n    } = opt;\r\n    const { left, top, width, height, scaleX, scaleY } = target;\r\n    const {\r\n      left: cropLeft,\r\n      top: cropTop,\r\n      width: cropWidth,\r\n      height: cropHeight,\r\n      scaleX: cropScaleX,\r\n      scaleY: cropScaleY\r\n    } = this.cropObject;\r\n    if (corner === \"tl\") {\r\n      if (Math.round(cropLeft) > Math.round(left)) {\r\n        // left\r\n        const originRight = Math.round(cropLeft + cropWidth);\r\n        const targetRight = Math.round(\r\n          target.getBoundingRect().left + target.getBoundingRect().width\r\n        );\r\n        const diffRightRatio = 1 - (originRight - targetRight) / cropWidth;\r\n        target.set({\r\n          left: cropLeft,\r\n          scaleX: diffRightRatio > 1 ? 1 : diffRightRatio\r\n        });\r\n      }\r\n      if (Math.round(cropTop) > Math.round(top)) {\r\n        // top\r\n        const originBottom = Math.round(cropTop + cropHeight);\r\n        const targetBottom = Math.round(\r\n          target.getBoundingRect().top + target.getBoundingRect().height\r\n        );\r\n        const diffBottomRatio = 1 - (originBottom - targetBottom) / cropHeight;\r\n        target.set({\r\n          top: cropTop,\r\n          scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio\r\n        });\r\n      }\r\n    } else if (corner === \"bl\") {\r\n      if (Math.round(cropLeft) > Math.round(left)) {\r\n        // left\r\n        const originRight = Math.round(cropLeft + cropWidth);\r\n        const targetRight = Math.round(\r\n          target.getBoundingRect().left + target.getBoundingRect().width\r\n        );\r\n        const diffRightRatio = 1 - (originRight - targetRight) / cropWidth;\r\n        target.set({\r\n          left: cropLeft,\r\n          scaleX: diffRightRatio > 1 ? 1 : diffRightRatio\r\n        });\r\n      }\r\n      if (\r\n        Math.round(cropTop + cropHeight * cropScaleY) <\r\n        Math.round(top + height * scaleY)\r\n      ) {\r\n        // bottom\r\n        const diffTopRatio = 1 - (original.top - cropTop) / cropHeight;\r\n        target.set({\r\n          top: original.top,\r\n          scaleY: diffTopRatio > 1 ? 1 : diffTopRatio\r\n        });\r\n      }\r\n    } else if (corner === \"tr\") {\r\n      if (\r\n        Math.round(cropLeft + cropWidth * cropScaleX) <\r\n        Math.round(left + width * scaleX)\r\n      ) {\r\n        // right\r\n        const diffLeftRatio = 1 - (original.left - cropLeft) / cropWidth;\r\n        target.set({\r\n          left: original.left,\r\n          scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio\r\n        });\r\n      }\r\n      if (Math.round(cropTop) > Math.round(top)) {\r\n        // top\r\n        const originBottom = Math.round(cropTop + cropHeight);\r\n        const targetBottom = Math.round(\r\n          target.getBoundingRect().top + target.getBoundingRect().height\r\n        );\r\n        const diffBottomRatio = 1 - (originBottom - targetBottom) / cropHeight;\r\n        target.set({\r\n          top: cropTop,\r\n          scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio\r\n        });\r\n      }\r\n    } else if (corner === \"br\") {\r\n      if (\r\n        Math.round(cropLeft + cropWidth * cropScaleX) <\r\n        Math.round(left + width * scaleX)\r\n      ) {\r\n        // right\r\n        const diffLeftRatio = 1 - (original.left - cropLeft) / cropWidth;\r\n        target.set({\r\n          left: original.left,\r\n          scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio\r\n        });\r\n      }\r\n      if (\r\n        Math.round(cropTop + cropHeight * cropScaleY) <\r\n        Math.round(top + height * scaleY)\r\n      ) {\r\n        // bottom\r\n        const diffTopRatio = 1 - (original.top - cropTop) / cropHeight;\r\n        target.set({\r\n          top: original.top,\r\n          scaleY: diffTopRatio > 1 ? 1 : diffTopRatio\r\n        });\r\n      }\r\n    } else if (corner === \"ml\") {\r\n      if (Math.round(cropLeft) > Math.round(left)) {\r\n        // left\r\n        const originRight = Math.round(cropLeft + cropWidth);\r\n        const targetRight = Math.round(\r\n          target.getBoundingRect().left + target.getBoundingRect().width\r\n        );\r\n        const diffRightRatio = 1 - (originRight - targetRight) / cropWidth;\r\n        target.set({\r\n          left: cropLeft,\r\n          scaleX: diffRightRatio > 1 ? 1 : diffRightRatio\r\n        });\r\n      }\r\n    } else if (corner === \"mt\") {\r\n      if (Math.round(cropTop) > Math.round(top)) {\r\n        // top\r\n        const originBottom = Math.round(cropTop + cropHeight);\r\n        const targetBottom = Math.round(\r\n          target.getBoundingRect().top + target.getBoundingRect().height\r\n        );\r\n        const diffBottomRatio = 1 - (originBottom - targetBottom) / cropHeight;\r\n        target.set({\r\n          top: cropTop,\r\n          scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio\r\n        });\r\n      }\r\n    } else if (corner === \"mb\") {\r\n      if (\r\n        Math.round(cropTop + cropHeight * cropScaleY) <\r\n        Math.round(top + height * scaleY)\r\n      ) {\r\n        // bottom\r\n        const diffTopRatio = 1 - (original.top - cropTop) / cropHeight;\r\n        target.set({\r\n          top: original.top,\r\n          scaleY: diffTopRatio > 1 ? 1 : diffTopRatio\r\n        });\r\n      }\r\n    } else if (corner === \"mr\") {\r\n      if (\r\n        Math.round(cropLeft + cropWidth * cropScaleX) <\r\n        Math.round(left + width * scaleX)\r\n      ) {\r\n        // right\r\n        const diffLeftRatio = 1 - (original.left - cropLeft) / cropWidth;\r\n        target.set({\r\n          left: original.left,\r\n          scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Resize crop\r\n   * @param {FabricEvent} opt\r\n   */\r\n  moving = (opt: fabric.IEvent) => {\r\n    const { target } = opt;\r\n    const { left, top, width, height, scaleX, scaleY } = target;\r\n    const {\r\n      left: cropLeft,\r\n      top: cropTop,\r\n      width: cropWidth,\r\n      height: cropHeight\r\n    } = this.cropObject.getBoundingRect();\r\n    const movedTop = () => {\r\n      if (Math.round(cropTop) >= Math.round(top)) {\r\n        target.set({\r\n          top: cropTop\r\n        });\r\n      } else if (\r\n        Math.round(cropTop + cropHeight) <= Math.round(top + height * scaleY)\r\n      ) {\r\n        target.set({\r\n          top: cropTop + cropHeight - height * scaleY\r\n        });\r\n      }\r\n    };\r\n    if (Math.round(cropLeft) >= Math.round(left)) {\r\n      target.set({\r\n        left: Math.max(left, cropLeft)\r\n      });\r\n      movedTop();\r\n    } else if (\r\n      Math.round(cropLeft + cropWidth) <= Math.round(left + width * scaleX)\r\n    ) {\r\n      target.set({\r\n        left: cropLeft + cropWidth - width * scaleX\r\n      });\r\n      movedTop();\r\n    } else if (Math.round(cropTop) >= Math.round(top)) {\r\n      target.set({\r\n        top: cropTop\r\n      });\r\n    } else if (\r\n      Math.round(cropTop + cropHeight) <= Math.round(top + height * scaleY)\r\n    ) {\r\n      target.set({\r\n        top: cropTop + cropHeight - height * scaleY\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport default CropHandler;\r\n","import anime from \"animejs\";\r\n\r\nimport { Handler } from \".\";\r\nimport { FabricObject } from \"../utils\";\r\n\r\nclass AnimationHandler {\r\n  handler: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Play the animation\r\n   * @param {string} id\r\n   * @param {boolean} [hasControls]\r\n   * @returns\r\n   */\r\n  public play = (id: string, hasControls?: boolean) => {\r\n    const findObject = this.handler.findById(id);\r\n    if (!findObject) {\r\n      return;\r\n    }\r\n    if (findObject.anime) {\r\n      findObject.anime.restart();\r\n      return;\r\n    }\r\n    if (findObject.animation.type === \"none\") {\r\n      return;\r\n    }\r\n    const instance = this.getAnimation(findObject, hasControls);\r\n    if (instance) {\r\n      findObject.set(\"anime\", instance);\r\n      findObject.set({\r\n        hasControls: false,\r\n        lockMovementX: true,\r\n        lockMovementY: true,\r\n        hoverCursor: \"pointer\"\r\n      });\r\n      this.handler.canvas.requestRenderAll();\r\n      instance.play();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Pause the animation\r\n   * @param {string} id\r\n   * @returns\r\n   */\r\n  public pause = (id: string) => {\r\n    const findObject = this.handler.findById(id);\r\n    if (!findObject) {\r\n      return;\r\n    }\r\n    findObject.anime.pause();\r\n  };\r\n\r\n  /**\r\n   * Stop the animation\r\n   * @param {string} id\r\n   * @param {boolean} [hasControls=true]\r\n   * @returns\r\n   */\r\n  public stop = (id: string, hasControls = true) => {\r\n    const findObject = this.handler.findById(id);\r\n    if (!findObject) {\r\n      return;\r\n    }\r\n    this.initAnimation(findObject, hasControls);\r\n  };\r\n\r\n  /**\r\n   * Restart the animation\r\n   * @param {string} id\r\n   * @returns\r\n   */\r\n  public restart = (id: string) => {\r\n    const findObject = this.handler.findById(id);\r\n    if (!findObject) {\r\n      return;\r\n    }\r\n    if (!findObject.anime) {\r\n      return;\r\n    }\r\n    this.stop(id);\r\n    this.play(id);\r\n  };\r\n\r\n  /**\r\n   * Init animation\r\n   * @param {FabricObject} obj\r\n   * @param {boolean} [hasControls=true]\r\n   * @returns\r\n   */\r\n  public initAnimation = (obj: FabricObject, hasControls = true) => {\r\n    if (!obj.anime) {\r\n      return;\r\n    }\r\n    let option;\r\n    if (this.handler.editable) {\r\n      option = {\r\n        anime: null,\r\n        hasControls,\r\n        lockMovementX: !hasControls,\r\n        lockMovementY: !hasControls,\r\n        hoverCursor: hasControls ? \"move\" : \"pointer\"\r\n      };\r\n    } else {\r\n      option = {\r\n        anime: null,\r\n        hasControls: false,\r\n        lockMovementX: true,\r\n        lockMovementY: true,\r\n        hoverCursor: \"pointer\"\r\n      };\r\n    }\r\n    anime.remove(obj);\r\n    const { type } = obj.animation;\r\n    if (type === \"fade\") {\r\n      Object.assign(option, {\r\n        opacity: obj.originOpacity,\r\n        originOpacity: null\r\n      });\r\n    } else if (type === \"bounce\") {\r\n      if (obj.animation.bounce === \"vertical\") {\r\n        Object.assign(option, {\r\n          top: obj.originTop,\r\n          originTop: null\r\n        });\r\n      } else {\r\n        Object.assign(option, {\r\n          left: obj.originLeft,\r\n          originLeft: null\r\n        });\r\n      }\r\n    } else if (type === \"shake\") {\r\n      if (obj.animation.shake === \"vertical\") {\r\n        Object.assign(option, {\r\n          top: obj.originTop,\r\n          originTop: null\r\n        });\r\n      } else {\r\n        Object.assign(option, {\r\n          left: obj.originLeft,\r\n          originLeft: null\r\n        });\r\n      }\r\n    } else if (type === \"scaling\") {\r\n      Object.assign(option, {\r\n        scaleX: obj.originScaleX,\r\n        scaleY: obj.originScaleY,\r\n        originScaleX: null,\r\n        originScaleY: null\r\n      });\r\n    } else if (type === \"rotation\") {\r\n      Object.assign(option, {\r\n        angle: obj.originAngle,\r\n        originAngle: null\r\n      });\r\n    } else if (type === \"flash\") {\r\n      Object.assign(option, {\r\n        fill: obj.originFill,\r\n        stroke: obj.originStroke,\r\n        originFill: null,\r\n        origniStroke: null\r\n      });\r\n    } else {\r\n      console.warn(\"Not supported type.\");\r\n    }\r\n    obj.set(option);\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Get animation option\r\n   * @param {FabricObject} obj\r\n   * @param {boolean} [hasControls]\r\n   * @returns\r\n   */\r\n  getAnimation = (obj: FabricObject, hasControls?: boolean) => {\r\n    const {\r\n      delay = 100,\r\n      duration = 100,\r\n      autoplay = true,\r\n      loop = true,\r\n      type,\r\n      ...other\r\n    } = obj.animation;\r\n    const option = {\r\n      targets: obj,\r\n      delay,\r\n      loop,\r\n      autoplay,\r\n      duration,\r\n      direction: \"alternate\",\r\n      begin: () => {\r\n        obj.set({\r\n          hasControls: false,\r\n          lockMovementX: true,\r\n          lockMovementY: true,\r\n          hoverCursor: \"pointer\"\r\n        });\r\n        this.handler.canvas.requestRenderAll();\r\n      },\r\n      update: (e: any) => {\r\n        if (type === \"flash\") {\r\n          // I do not know why it works. Magic code...\r\n          const fill = e.animations[0].currentValue;\r\n          const stroke = e.animations[1].currentValue;\r\n          obj.set(\"fill\", \"\");\r\n          obj.set(\"fill\", fill);\r\n          obj.set(\"stroke\", stroke);\r\n        }\r\n        obj.setCoords();\r\n        this.handler.canvas.requestRenderAll();\r\n      },\r\n      complete: () => {\r\n        this.initAnimation(obj, hasControls);\r\n      }\r\n    };\r\n    if (type === \"fade\") {\r\n      const { opacity = 0 } = other;\r\n      obj.set(\"originOpacity\", obj.opacity);\r\n      Object.assign(option, {\r\n        opacity,\r\n        easing: \"easeInQuad\"\r\n      });\r\n    } else if (type === \"bounce\") {\r\n      const { offset = 1 } = other;\r\n      if (other.bounce === \"vertical\") {\r\n        obj.set(\"originTop\", obj.top);\r\n        Object.assign(option, {\r\n          top: obj.top + offset,\r\n          easing: \"easeInQuad\"\r\n        });\r\n      } else {\r\n        obj.set(\"originLeft\", obj.left);\r\n        Object.assign(option, {\r\n          left: obj.left + offset,\r\n          easing: \"easeInQuad\"\r\n        });\r\n      }\r\n    } else if (type === \"shake\") {\r\n      const { offset = 1 } = other;\r\n      if (other.shake === \"vertical\") {\r\n        obj.set(\"originTop\", obj.top);\r\n        Object.assign(option, {\r\n          top: obj.top + offset,\r\n          delay: 0,\r\n          elasticity: 1000,\r\n          duration: 500\r\n        });\r\n      } else {\r\n        obj.set(\"originLeft\", obj.left);\r\n        Object.assign(option, {\r\n          left: obj.left + offset,\r\n          delay: 0,\r\n          elasticity: 1000,\r\n          duration: 500\r\n        });\r\n      }\r\n    } else if (type === \"scaling\") {\r\n      const { scale = 1 } = other;\r\n      obj.set(\"originScaleX\", obj.scaleX);\r\n      obj.set(\"originScaleY\", obj.scaleY);\r\n      const scaleX = obj.scaleX * scale;\r\n      const scaleY = obj.scaleY * scale;\r\n      Object.assign(option, {\r\n        scaleX,\r\n        scaleY,\r\n        easing: \"easeInQuad\"\r\n      });\r\n    } else if (type === \"rotation\") {\r\n      obj.set(\"originAngle\", obj.angle);\r\n      Object.assign(option, {\r\n        angle: other.angle,\r\n        easing: \"easeInQuad\"\r\n      });\r\n    } else if (type === \"flash\") {\r\n      const { fill = obj.fill, stroke = obj.stroke } = other;\r\n      obj.set(\"originFill\", obj.fill as string);\r\n      obj.set(\"originStroke\", obj.stroke);\r\n      Object.assign(option, {\r\n        fill,\r\n        stroke,\r\n        easing: \"easeInQuad\"\r\n      });\r\n    } else {\r\n      console.warn(\"Not supported type.\");\r\n      return null;\r\n    }\r\n    return anime(option);\r\n  };\r\n}\r\n\r\nexport default AnimationHandler;\r\n","import ReactDOM from \"react-dom\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nimport { Handler } from \".\";\r\n\r\nclass ContextmenuHandler {\r\n  handler: Handler;\r\n  contextmenuEl: HTMLDivElement;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Init context menu\r\n   *\r\n   */\r\n  public init = () => {\r\n    this.contextmenuEl = document.createElement(\"div\");\r\n    this.contextmenuEl.id = `${this.handler.id}_contextmenu`;\r\n    this.contextmenuEl.className = \"rde-contextmenu contextmenu-hidden\";\r\n    document.body.appendChild(this.contextmenuEl);\r\n  };\r\n\r\n  /**\r\n   * Show context menu\r\n   *\r\n   */\r\n  public show = debounce(async (e, target) => {\r\n    const { onContext } = this.handler;\r\n    while (this.contextmenuEl.hasChildNodes()) {\r\n      this.contextmenuEl.removeChild(this.contextmenuEl.firstChild);\r\n    }\r\n    const contextmenu = document.createElement(\"div\");\r\n    contextmenu.className = \"rde-contextmenu-right\";\r\n    const element = await onContext(this.contextmenuEl, e, target);\r\n    if (!element) {\r\n      return;\r\n    }\r\n    contextmenu.innerHTML = element;\r\n    this.contextmenuEl.appendChild(contextmenu);\r\n    ReactDOM.render(element, contextmenu);\r\n    this.contextmenuEl.classList.remove(\"contextmenu-hidden\");\r\n    const { clientX: left, clientY: top } = e;\r\n    this.contextmenuEl.style.left = `${left}px`;\r\n    this.contextmenuEl.style.top = `${top}px`;\r\n  }, 100);\r\n\r\n  /**\r\n   * Hide context menu\r\n   *\r\n   */\r\n  public hide = debounce(() => {\r\n    if (this.contextmenuEl) {\r\n      this.contextmenuEl.classList.add(\"contextmenu-hidden\");\r\n    }\r\n  }, 100);\r\n}\r\n\r\nexport default ContextmenuHandler;\r\n","import ReactDOM from \"react-dom\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject } from \"../utils\";\r\n\r\nclass TooltipHandler {\r\n  handler: Handler;\r\n  tooltipEl: HTMLDivElement;\r\n  target?: fabric.Object;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n    if (!handler.editable) {\r\n      this.init();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init tooltip\r\n   */\r\n  init = () => {\r\n    this.tooltipEl = document.createElement(\"div\");\r\n    this.tooltipEl.id = `${this.handler.id}_tooltip`;\r\n    this.tooltipEl.className = \"rde-tooltip tooltip-hidden\";\r\n    document.body.appendChild(this.tooltipEl);\r\n  };\r\n\r\n  /**\r\n   * Show tooltip\r\n   * @param {FabricObject} [target]\r\n   */\r\n  show = debounce(async (target?: FabricObject) => {\r\n    if (target.tooltip && target.tooltip.enabled) {\r\n      while (this.tooltipEl.hasChildNodes()) {\r\n        this.tooltipEl.removeChild(this.tooltipEl.firstChild);\r\n      }\r\n      const tooltip = document.createElement(\"div\");\r\n      tooltip.className = \"rde-tooltip-right\";\r\n      let element = target.name as any;\r\n      const { onTooltip } = this.handler;\r\n      if (onTooltip) {\r\n        element = await onTooltip(this.tooltipEl, target);\r\n        if (!element) {\r\n          return;\r\n        }\r\n      }\r\n      tooltip.innerHTML = element;\r\n      this.tooltipEl.appendChild(tooltip);\r\n      ReactDOM.render(element, tooltip);\r\n      this.tooltipEl.classList.remove(\"tooltip-hidden\");\r\n      const zoom = this.handler.canvas.getZoom();\r\n      const { clientHeight } = this.tooltipEl;\r\n      const { width, height, scaleX, scaleY } = target;\r\n      const { left, top } = target.getBoundingRect();\r\n      const { _offset: offset } = this.handler.canvas.calcOffset() as any;\r\n      const objWidthDiff = width * scaleX * zoom;\r\n      const objHeightDiff = (height * scaleY * zoom) / 2 - clientHeight / 2;\r\n      const calcLeft = offset.left + left + objWidthDiff;\r\n      const calcTop = offset.top + top + objHeightDiff;\r\n      if (document.body.clientWidth <= calcLeft + this.tooltipEl.offsetWidth) {\r\n        this.tooltipEl.style.left = `${left +\r\n          offset.left -\r\n          this.tooltipEl.offsetWidth}px`;\r\n        tooltip.className = \"rde-tooltip-left\";\r\n      } else {\r\n        this.tooltipEl.style.left = `${calcLeft}px`;\r\n      }\r\n      this.tooltipEl.style.top = `${calcTop}px`;\r\n      this.handler.target = target;\r\n    }\r\n  }, 100);\r\n\r\n  /**\r\n   * Hide tooltip\r\n   * @param {fabric.Object} [_target]\r\n   */\r\n  hide = debounce((_target?: fabric.Object) => {\r\n    this.handler.target = null;\r\n    if (this.tooltipEl) {\r\n      this.tooltipEl.classList.add(\"tooltip-hidden\");\r\n    }\r\n  }, 100);\r\n}\r\n\r\nexport default TooltipHandler;\r\n","import { fabric } from \"fabric\";\r\nimport throttle from \"lodash/throttle\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject } from \"../utils\";\r\nimport { NodeObject } from \"../objects/Node\";\r\nimport { LinkObject } from \"../objects/Link\";\r\n\r\nexport type TransactionType =\r\n  | \"add\"\r\n  | \"remove\"\r\n  | \"moved\"\r\n  | \"scaled\"\r\n  | \"rotated\"\r\n  | \"skewed\"\r\n  | \"group\"\r\n  | \"ungroup\"\r\n  | \"paste\"\r\n  | \"bringForward\"\r\n  | \"bringToFront\"\r\n  | \"sendBackwards\"\r\n  | \"sendToBack\"\r\n  | \"redo\"\r\n  | \"undo\";\r\n\r\nexport interface TransactionTransform {\r\n  scaleX?: number;\r\n  scaleY?: number;\r\n  skewX?: number;\r\n  skewY?: number;\r\n  angle?: number;\r\n  left?: number;\r\n  top?: number;\r\n  flipX?: number;\r\n  flipY?: number;\r\n  originX?: string;\r\n  originY?: string;\r\n}\r\n\r\nexport interface TransactionEvent {\r\n  json: string;\r\n  type: TransactionType;\r\n}\r\n\r\nclass TransactionHandler {\r\n  handler: Handler;\r\n  redos: TransactionEvent[];\r\n  undos: TransactionEvent[];\r\n  active: boolean = false;\r\n  state: FabricObject[] = [];\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Init transaction\r\n   */\r\n  init = () => {\r\n    this.redos = [];\r\n    this.undos = [];\r\n  };\r\n\r\n  /**\r\n   * Save transaction\r\n   * @param {TransactionType} type\r\n   * @param {*} [canvasJSON]\r\n   * @param {boolean} [isWorkarea=true]\r\n   */\r\n  save = (\r\n    type: TransactionType,\r\n    canvasJSON?: any,\r\n    _isWorkarea: boolean = true\r\n  ) => {\r\n    if (!this.handler.keyEvent.transaction) {\r\n      return;\r\n    }\r\n    try {\r\n      if (this.state) {\r\n        const json = JSON.stringify(this.state);\r\n        this.redos = [];\r\n        this.undos.push({\r\n          type,\r\n          json\r\n        });\r\n      }\r\n      const { objects }: { objects: FabricObject[] } =\r\n        canvasJSON ||\r\n        this.handler.canvas.toJSON(this.handler.propertiesToInclude);\r\n      this.state = objects.filter(obj => {\r\n        if (obj.id === \"workarea\") {\r\n          return false;\r\n        } else if (obj.id === \"grid\") {\r\n          return false;\r\n        } else if (obj.superType === \"port\") {\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Undo transaction\r\n   */\r\n  undo = throttle(() => {\r\n    const undo = this.undos.pop();\r\n    if (!undo) {\r\n      return;\r\n    }\r\n    this.redos.push({\r\n      type: \"redo\",\r\n      json: JSON.stringify(this.state)\r\n    });\r\n    this.replay(undo);\r\n  }, 100);\r\n\r\n  /**\r\n   * Redo transaction\r\n   */\r\n  redo = throttle(() => {\r\n    const redo = this.redos.pop();\r\n    if (!redo) {\r\n      return;\r\n    }\r\n    this.undos.push({\r\n      type: \"undo\",\r\n      json: JSON.stringify(this.state)\r\n    });\r\n    this.replay(redo);\r\n  }, 100);\r\n\r\n  /**\r\n   * Replay transaction\r\n   * @param {TransactionEvent} transaction\r\n   */\r\n  replay = (transaction: TransactionEvent) => {\r\n    const objects = JSON.parse(transaction.json) as FabricObject[];\r\n    this.state = objects;\r\n    this.active = true;\r\n    this.handler.canvas.renderOnAddRemove = false;\r\n    this.handler.clear();\r\n    this.handler.canvas.discardActiveObject();\r\n    fabric.util.enlivenObjects(\r\n      objects,\r\n      (enlivenObjects: FabricObject[]) => {\r\n        enlivenObjects.forEach(obj => {\r\n          const targetIndex = this.handler.canvas._objects.length;\r\n          if (obj.superType === \"node\") {\r\n            this.handler.canvas.insertAt(obj, targetIndex, false);\r\n            this.handler.portHandler.create(obj as NodeObject);\r\n          } else if (obj.superType === \"link\") {\r\n            const link = obj as LinkObject;\r\n            this.handler.objects = this.handler.getObjects();\r\n            this.handler.linkHandler.create({\r\n              type: \"curvedLink\",\r\n              fromNodeId: link.fromNode.id,\r\n              fromPortId: link.fromPort.id,\r\n              toNodeId: link.toNode.id,\r\n              toPortId: link.toPort.id\r\n            });\r\n          } else {\r\n            this.handler.canvas.insertAt(obj, targetIndex, false);\r\n          }\r\n        });\r\n        this.handler.canvas.renderOnAddRemove = true;\r\n        this.active = false;\r\n        this.handler.canvas.renderAll();\r\n        this.handler.objects = this.handler.getObjects();\r\n        if (this.handler.onTransaction) {\r\n          this.handler.onTransaction(transaction);\r\n        }\r\n      },\r\n      null\r\n    );\r\n  };\r\n}\r\n\r\nexport default TransactionHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { VideoObject } from \"../objects/Video\";\r\n\r\nclass ZoomHandler {\r\n  handler?: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Zoom to point\r\n   * @param {fabric.Point} point\r\n   * @param {number} zoom\r\n   */\r\n  public zoomToPoint = (point: fabric.Point, zoom: number) => {\r\n    const { minZoom, maxZoom } = this.handler;\r\n    let zoomRatio = zoom;\r\n    if (zoom <= minZoom / 100) {\r\n      zoomRatio = minZoom / 100;\r\n    } else if (zoom >= maxZoom / 100) {\r\n      zoomRatio = maxZoom / 100;\r\n    }\r\n    this.handler.canvas.zoomToPoint(point, zoomRatio);\r\n    this.handler.getObjects().forEach(obj => {\r\n      if (obj.superType === \"element\") {\r\n        const { id, width, height, player } = obj as VideoObject;\r\n        const el = this.handler.elementHandler.findById(id);\r\n        // update the element\r\n        this.handler.elementHandler.setScaleOrAngle(el, obj);\r\n        this.handler.elementHandler.setSize(el, obj);\r\n        this.handler.elementHandler.setPosition(el, obj);\r\n        if (player) {\r\n          player.setPlayerSize(width, height);\r\n        }\r\n      }\r\n    });\r\n    if (this.handler.onZoom) {\r\n      this.handler.onZoom(zoomRatio);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Zoom one to one\r\n   */\r\n  public zoomOneToOne = () => {\r\n    const center = this.handler.canvas.getCenter();\r\n    this.handler.canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n    this.zoomToPoint(new fabric.Point(center.left, center.top), 1);\r\n  };\r\n\r\n  /**\r\n   * Zoom to fit\r\n   */\r\n  public zoomToFit = () => {\r\n    let scaleX;\r\n    let scaleY;\r\n    scaleX = this.handler.canvas.getWidth() / this.handler.workarea.width;\r\n    scaleY = this.handler.canvas.getHeight() / this.handler.workarea.height;\r\n    if (this.handler.workarea.height > this.handler.workarea.width) {\r\n      scaleX = scaleY;\r\n      if (\r\n        this.handler.canvas.getWidth() <\r\n        this.handler.workarea.width * scaleX\r\n      ) {\r\n        scaleX =\r\n          scaleX *\r\n          (this.handler.canvas.getWidth() /\r\n            (this.handler.workarea.width * scaleX));\r\n      }\r\n    } else {\r\n      scaleY = scaleX;\r\n      if (\r\n        this.handler.canvas.getHeight() <\r\n        this.handler.workarea.height * scaleX\r\n      ) {\r\n        scaleX =\r\n          scaleX *\r\n          (this.handler.canvas.getHeight() /\r\n            (this.handler.workarea.height * scaleX));\r\n      }\r\n    }\r\n    const center = this.handler.canvas.getCenter();\r\n    this.handler.canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n    this.zoomToPoint(new fabric.Point(center.left, center.top), scaleX);\r\n  };\r\n\r\n  /**\r\n   * Zoom in\r\n   */\r\n  public zoomIn = () => {\r\n    let zoomRatio = this.handler.canvas.getZoom();\r\n    zoomRatio += 0.05;\r\n    const center = this.handler.canvas.getCenter();\r\n    this.zoomToPoint(new fabric.Point(center.left, center.top), zoomRatio);\r\n  };\r\n\r\n  /**\r\n   * Zoom out\r\n   */\r\n  public zoomOut = () => {\r\n    let zoomRatio = this.handler.canvas.getZoom();\r\n    zoomRatio -= 0.05;\r\n    const center = this.handler.canvas.getCenter();\r\n    this.zoomToPoint(new fabric.Point(center.left, center.top), zoomRatio);\r\n  };\r\n}\r\n\r\nexport default ZoomHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport { Handler } from \".\";\r\nimport { WorkareaLayout, WorkareaObject } from \"../utils\";\r\nimport { VideoObject } from \"../objects/Video\";\r\n\r\nconst defaultWorkareaOption: Partial<WorkareaObject> = {\r\n  width: 600,\r\n  height: 400,\r\n  workareaWidth: 600,\r\n  workareaHeight: 400,\r\n  lockScalingX: true,\r\n  lockScalingY: true,\r\n  scaleX: 1,\r\n  scaleY: 1,\r\n  backgroundColor: \"#fff\",\r\n  hasBorders: false,\r\n  hasControls: false,\r\n  selectable: false,\r\n  lockMovementX: true,\r\n  lockMovementY: true,\r\n  hoverCursor: \"default\",\r\n  name: \"\",\r\n  id: \"workarea\",\r\n  type: \"image\",\r\n  layout: \"responsive\", // fixed, responsive, fullscreen\r\n  link: {},\r\n  tooltip: {\r\n    enabled: false\r\n  },\r\n  isElement: false\r\n};\r\n\r\nclass WorkareaHandler {\r\n  handler: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Init workarea\r\n   */\r\n  public init = () => {\r\n    const { workareaOption } = this.handler;\r\n    const mergedWorkareaOption = Object.assign(\r\n      {},\r\n      defaultWorkareaOption,\r\n      workareaOption\r\n    );\r\n    const image = new Image(\r\n      mergedWorkareaOption.width,\r\n      mergedWorkareaOption.height\r\n    );\r\n    image.width = mergedWorkareaOption.width;\r\n    image.height = mergedWorkareaOption.height;\r\n    this.handler.workarea = new fabric.Image(\r\n      image,\r\n      mergedWorkareaOption\r\n    ) as WorkareaObject;\r\n    this.handler.canvas.add(this.handler.workarea);\r\n    this.handler.objects = this.handler.getObjects();\r\n    this.handler.canvas.centerObject(this.handler.workarea);\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Set the layout on workarea\r\n   * @param {WorkareaLayout} layout\r\n   * @returns\r\n   */\r\n  public setLayout = (layout: WorkareaLayout) => {\r\n    this.handler.workarea.set(\"layout\", layout);\r\n    const {\r\n      _element,\r\n      isElement,\r\n      workareaWidth,\r\n      workareaHeight\r\n    } = this.handler.workarea;\r\n    const { canvas } = this.handler;\r\n    let scaleX = 1;\r\n    let scaleY = 1;\r\n    const isFixed = layout === \"fixed\";\r\n    const isResponsive = layout === \"responsive\";\r\n    const isFullscreen = layout === \"fullscreen\";\r\n    if (isElement) {\r\n      if (isFixed) {\r\n        scaleX = workareaWidth / _element.width;\r\n        scaleY = workareaHeight / _element.height;\r\n      } else if (isResponsive) {\r\n        scaleX = canvas.getWidth() / _element.width;\r\n        scaleY = canvas.getHeight() / _element.height;\r\n        if (_element.height >= _element.width) {\r\n          scaleX = scaleY;\r\n        } else {\r\n          scaleY = scaleX;\r\n        }\r\n      } else {\r\n        scaleX = canvas.getWidth() / _element.width;\r\n        scaleY = canvas.getHeight() / _element.height;\r\n      }\r\n    }\r\n    this.handler.getObjects().forEach(obj => {\r\n      const { id, player } = obj as VideoObject;\r\n      if (id !== \"workarea\") {\r\n        const objScaleX = !isFullscreen ? 1 : scaleX;\r\n        const objScaleY = !isFullscreen ? 1 : scaleY;\r\n        const objWidth = obj.width * objScaleX * canvas.getZoom();\r\n        const objHeight = obj.height * objScaleY * canvas.getZoom();\r\n        const el = this.handler.elementHandler.findById(obj.id);\r\n        this.handler.elementHandler.setSize(el, obj);\r\n        if (player) {\r\n          player.setPlayerSize(objWidth, objHeight);\r\n        }\r\n        obj.set({\r\n          scaleX: !isFullscreen ? 1 : objScaleX,\r\n          scaleY: !isFullscreen ? 1 : objScaleY\r\n        });\r\n      }\r\n    });\r\n    if (isResponsive) {\r\n      if (isElement) {\r\n        const center = canvas.getCenter();\r\n        this.handler.workarea.set({\r\n          scaleX: 1,\r\n          scaleY: 1\r\n        });\r\n        this.handler.zoomHandler.zoomToPoint(\r\n          new fabric.Point(center.left, center.top),\r\n          scaleX\r\n        );\r\n      } else {\r\n        this.handler.workarea.set({\r\n          width: 0,\r\n          height: 0,\r\n          backgroundColor: \"rgba(255, 255, 255, 0)\"\r\n        });\r\n      }\r\n      canvas.centerObject(this.handler.workarea);\r\n      canvas.renderAll();\r\n      return;\r\n    }\r\n    if (isElement) {\r\n      this.handler.workarea.set({\r\n        width: _element.width,\r\n        height: _element.height,\r\n        scaleX,\r\n        scaleY\r\n      });\r\n    } else {\r\n      const width = isFixed\r\n        ? this.handler.workarea.workareaWidth\r\n        : this.handler.canvas.getWidth();\r\n      const height = isFixed\r\n        ? this.handler.workarea.workareaHeight\r\n        : this.handler.canvas.getHeight();\r\n      this.handler.workarea.set({\r\n        width,\r\n        height,\r\n        backgroundColor: \"rgba(255, 255, 255, 1)\"\r\n      });\r\n      this.handler.canvas.renderAll();\r\n      if (isFixed) {\r\n        canvas.centerObject(this.handler.workarea);\r\n      } else {\r\n        this.handler.workarea.set({\r\n          left: 0,\r\n          top: 0\r\n        });\r\n      }\r\n    }\r\n    canvas.centerObject(this.handler.workarea);\r\n    const center = canvas.getCenter();\r\n    canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n    this.handler.zoomHandler.zoomToPoint(\r\n      new fabric.Point(center.left, center.top),\r\n      1\r\n    );\r\n    canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Set the responsive image on Workarea\r\n   * @param {string | File} [source]\r\n   * @param {boolean} [loaded]\r\n   * @returns\r\n   */\r\n  public setResponsiveImage = (\r\n    source: string | File,\r\n    loaded?: boolean,\r\n    onFinish = () => {}\r\n  ) => {\r\n    const { canvas, workarea, editable } = this.handler;\r\n    const imageFromUrl = (src: string) => {\r\n      fabric.Image.fromURL(src, (img: any) => {\r\n        let scaleX = canvas.getWidth() / img.width;\r\n        let scaleY = canvas.getHeight() / img.height;\r\n        if (img.height >= img.width) {\r\n          scaleX = scaleY;\r\n          if (canvas.getWidth() < img.width * scaleX) {\r\n            scaleX = scaleX * (canvas.getWidth() / (img.width * scaleX));\r\n          }\r\n        } else {\r\n          scaleY = scaleX;\r\n          if (canvas.getHeight() < img.height * scaleX) {\r\n            scaleX = scaleX * (canvas.getHeight() / (img.height * scaleX));\r\n          }\r\n        }\r\n        img.set({\r\n          originX: \"left\",\r\n          originY: \"top\"\r\n        });\r\n        if (!img._element) {\r\n          workarea.setElement(new Image());\r\n          workarea.set({\r\n            isElement: false,\r\n            selectable: false\r\n          });\r\n        } else {\r\n          workarea.set({\r\n            ...img,\r\n            isElement: true,\r\n            selectable: false\r\n          });\r\n        }\r\n        if (!src) {\r\n          scaleX = 1;\r\n        }\r\n        canvas.centerObject(workarea);\r\n        if (editable && !loaded) {\r\n          canvas.getObjects().forEach(obj => {\r\n            const { id, player } = obj as VideoObject;\r\n            if (id !== \"workarea\") {\r\n              const objWidth = obj.width * scaleX;\r\n              const objHeight = obj.height * scaleY;\r\n              const el = this.handler.elementHandler.findById(id);\r\n              this.handler.elementHandler.setScaleOrAngle(el, obj);\r\n              this.handler.elementHandler.setSize(el, obj);\r\n              if (player) {\r\n                player.setPlayerSize(objWidth, objHeight);\r\n              }\r\n              obj.set({\r\n                scaleX: 1,\r\n                scaleY: 1\r\n              });\r\n              obj.setCoords();\r\n            }\r\n          });\r\n        }\r\n        const center = canvas.getCenter();\r\n        canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n        this.handler.zoomHandler.zoomToPoint(\r\n          new fabric.Point(center.left, center.top),\r\n          scaleX\r\n        );\r\n        canvas.renderAll();\r\n        onFinish();\r\n      });\r\n    };\r\n    if (!source) {\r\n      workarea.set({\r\n        src: null,\r\n        file: null\r\n      });\r\n      imageFromUrl(source as string);\r\n      return;\r\n    }\r\n    if (source instanceof File) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        workarea.set({\r\n          file: source\r\n        });\r\n        imageFromUrl(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(source);\r\n    } else {\r\n      workarea.set({\r\n        src: source\r\n      });\r\n      imageFromUrl(source);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the image on Workarea\r\n   * @param {string | File} source\r\n   * @param {boolean} [loaded=false]\r\n   * @returns\r\n   */\r\n  setImage = (source: string | File, loaded = false, onFinish = () => {}) => {\r\n    const { canvas, workarea, editable } = this.handler;\r\n    if (workarea.layout === \"responsive\") {\r\n      this.setResponsiveImage(source, loaded, onFinish);\r\n      return;\r\n    }\r\n    const imageFromUrl = (src: string) => {\r\n      fabric.Image.fromURL(src, (img: any) => {\r\n        let width = canvas.getWidth();\r\n        let height = canvas.getHeight();\r\n        if (workarea.layout === \"fixed\") {\r\n          width = workarea.width * workarea.scaleX;\r\n          height = workarea.height * workarea.scaleY;\r\n        }\r\n        let scaleX = 1;\r\n        let scaleY = 1;\r\n        if (img._element) {\r\n          scaleX = width / img.width;\r\n          scaleY = height / img.height;\r\n          img.set({\r\n            originX: \"left\",\r\n            originY: \"top\",\r\n            scaleX,\r\n            scaleY\r\n          });\r\n          workarea.set({\r\n            ...img,\r\n            isElement: true,\r\n            selectable: false\r\n          });\r\n        } else {\r\n          workarea.setElement(new Image());\r\n          workarea.set({\r\n            width,\r\n            height,\r\n            scaleX,\r\n            scaleY,\r\n            isElement: false,\r\n            selectable: false\r\n          });\r\n        }\r\n        canvas.centerObject(workarea);\r\n        if (editable && !loaded) {\r\n          const { layout } = workarea;\r\n          canvas.getObjects().forEach(obj => {\r\n            const { id, player } = obj as VideoObject;\r\n            if (id !== \"workarea\") {\r\n              scaleX = layout !== \"fullscreen\" ? 1 : scaleX;\r\n              scaleY = layout !== \"fullscreen\" ? 1 : scaleY;\r\n              const objWidth = obj.width * scaleX;\r\n              const objHeight = obj.height * scaleY;\r\n              const el = this.handler.elementHandler.findById(id);\r\n              this.handler.elementHandler.setSize(el, obj);\r\n              if (player) {\r\n                player.setPlayerSize(objWidth, objHeight);\r\n              }\r\n              obj.set({\r\n                scaleX,\r\n                scaleY\r\n              });\r\n              obj.setCoords();\r\n            }\r\n          });\r\n        }\r\n        const center = canvas.getCenter();\r\n        canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n        this.handler.zoomHandler.zoomToPoint(\r\n          new fabric.Point(center.left, center.top),\r\n          1\r\n        );\r\n        canvas.renderAll();\r\n        onFinish();\r\n      });\r\n    };\r\n    if (!source) {\r\n      workarea.set({\r\n        src: null,\r\n        file: null\r\n      });\r\n      imageFromUrl(source as string);\r\n      return;\r\n    }\r\n    if (source instanceof File) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        workarea.set({\r\n          file: source\r\n        });\r\n        imageFromUrl(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(source);\r\n    } else {\r\n      workarea.set({\r\n        src: source\r\n      });\r\n      imageFromUrl(source);\r\n    }\r\n  };\r\n}\r\n\r\nexport default WorkareaHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject, InteractionMode } from \"../utils\";\r\n\r\ntype IReturnType = { selectable?: boolean; evented?: boolean } | boolean;\r\n\r\nclass InteractionHandler {\r\n  handler: Handler;\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Change selection mode\r\n   * @param {(obj: FabricObject) => IReturnType} [callback]\r\n   */\r\n  public selection = (callback?: (obj: FabricObject) => IReturnType) => {\r\n    if (this.handler.interactionMode === \"selection\") {\r\n      return;\r\n    }\r\n    this.handler.interactionMode = \"selection\";\r\n    if (typeof this.handler.canvasOption.selection === \"undefined\") {\r\n      this.handler.canvas.selection = true;\r\n    } else {\r\n      this.handler.canvas.selection = this.handler.canvasOption.selection;\r\n    }\r\n    this.handler.canvas.defaultCursor = \"default\";\r\n    this.handler.workarea.hoverCursor = \"default\";\r\n    this.handler.canvas.getObjects().forEach((obj: any) => {\r\n      if (obj.id !== \"workarea\") {\r\n        if (obj.id === \"grid\") {\r\n          obj.selectable = false;\r\n          obj.evented = false;\r\n          return;\r\n        }\r\n        if (callback) {\r\n          const ret = callback(obj);\r\n          if (typeof ret === \"object\") {\r\n            obj.selectable = ret.selectable;\r\n            obj.evented = ret.evented;\r\n          } else {\r\n            obj.selectable = ret;\r\n            obj.evented = ret;\r\n          }\r\n        } else {\r\n          obj.selectable = true;\r\n          obj.evented = true;\r\n        }\r\n      }\r\n    });\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Change grab mode\r\n   * @param {(obj: FabricObject) => IReturnType} [callback]\r\n   */\r\n  public grab = (callback?: (obj: FabricObject) => IReturnType) => {\r\n    if (this.handler.interactionMode === \"grab\") {\r\n      return;\r\n    }\r\n    this.handler.interactionMode = \"grab\";\r\n    this.handler.canvas.selection = false;\r\n    this.handler.canvas.defaultCursor = \"grab\";\r\n    this.handler.workarea.hoverCursor = \"grab\";\r\n    this.handler.canvas.getObjects().forEach((obj: any) => {\r\n      if (obj.id !== \"workarea\") {\r\n        if (callback) {\r\n          const ret = callback(obj);\r\n          if (typeof ret === \"object\") {\r\n            obj.selectable = ret.selectable;\r\n            obj.evented = ret.evented;\r\n          } else {\r\n            obj.selectable = ret;\r\n            obj.evented = ret;\r\n          }\r\n        } else {\r\n          obj.selectable = false;\r\n          obj.evented = this.handler.editable ? false : true;\r\n        }\r\n      }\r\n    });\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Change drawing mode\r\n   * @param {InteractionMode} [type]\r\n   * @param {(obj: FabricObject) => IReturnType} [callback]\r\n   */\r\n  public drawing = (\r\n    type?: InteractionMode,\r\n    callback?: (obj: FabricObject) => IReturnType\r\n  ) => {\r\n    if (this.isDrawingMode()) {\r\n      return;\r\n    }\r\n    this.handler.interactionMode = type;\r\n    this.handler.canvas.selection = false;\r\n    this.handler.canvas.defaultCursor = \"pointer\";\r\n    this.handler.workarea.hoverCursor = \"pointer\";\r\n    this.handler.canvas.getObjects().forEach((obj: any) => {\r\n      if (obj.id !== \"workarea\") {\r\n        if (callback) {\r\n          const ret = callback(obj);\r\n          if (typeof ret === \"object\") {\r\n            obj.selectable = ret.selectable;\r\n            obj.evented = ret.evented;\r\n          } else {\r\n            obj.selectable = ret;\r\n            obj.evented = ret;\r\n          }\r\n        } else {\r\n          obj.selectable = false;\r\n          obj.evented = this.handler.editable ? false : true;\r\n        }\r\n      }\r\n    });\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Moving objects in grap mode\r\n   * @param {MouseEvent} e\r\n   */\r\n  public moving = (e: MouseEvent) => {\r\n    if (this.isDrawingMode()) {\r\n      return;\r\n    }\r\n    const delta = new fabric.Point(e.movementX, e.movementY);\r\n    this.handler.getObjects().forEach(obj => {\r\n      if (obj.superType === \"element\") {\r\n        const { id } = obj;\r\n        const el = this.handler.elementHandler.findById(id);\r\n        // update the element\r\n        this.handler.elementHandler.setPosition(el, obj);\r\n      }\r\n    });\r\n    this.handler.canvas.relativePan(delta);\r\n  };\r\n\r\n  /**\r\n   * Whether is drawing mode\r\n   * @returns\r\n   */\r\n  public isDrawingMode = () => {\r\n    return (\r\n      this.handler.interactionMode === \"link\" ||\r\n      this.handler.interactionMode === \"arrow\" ||\r\n      this.handler.interactionMode === \"line\" ||\r\n      this.handler.interactionMode === \"polygon\"\r\n    );\r\n  };\r\n}\r\n\r\nexport default InteractionHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject } from \"../utils\";\r\nimport { NodeObject } from \"../objects/Node\";\r\n\r\nclass GridHandler {\r\n  handler?: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Init grid\r\n   */\r\n  public init = () => {\r\n    const { gridOption } = this.handler;\r\n    if (gridOption.enabled && gridOption.grid) {\r\n      const width = 5000;\r\n      const gridLength = width / gridOption.grid;\r\n      const lineOptions = {\r\n        stroke: \"#ebebeb\",\r\n        selectable: false,\r\n        evented: false,\r\n        id: \"grid\"\r\n      };\r\n      for (let i = 0; i < gridLength; i++) {\r\n        const distance = i * gridOption.grid;\r\n        const fhorizontal = new fabric.Line(\r\n          [distance, -width, distance, width],\r\n          lineOptions\r\n        );\r\n        const shorizontal = new fabric.Line(\r\n          [distance - width, -width, distance - width, width],\r\n          lineOptions\r\n        );\r\n        this.handler.canvas.add(fhorizontal);\r\n        this.handler.canvas.add(shorizontal);\r\n        const fvertical = new fabric.Line(\r\n          [-width, distance - width, width, distance - width],\r\n          lineOptions\r\n        );\r\n        const svertical = new fabric.Line(\r\n          [-width, distance, width, distance],\r\n          lineOptions\r\n        );\r\n        this.handler.canvas.add(fvertical);\r\n        this.handler.canvas.add(svertical);\r\n        if (i % 5 === 0) {\r\n          fhorizontal.set({ stroke: \"#cccccc\" });\r\n          shorizontal.set({ stroke: \"#cccccc\" });\r\n          fvertical.set({ stroke: \"#cccccc\" });\r\n          svertical.set({ stroke: \"#cccccc\" });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set coords in grid\r\n   * @param {(FabricObject | fabric.ActiveSelection)} target\r\n   * @returns\r\n   */\r\n  public setCoords = (target: FabricObject | fabric.ActiveSelection) => {\r\n    const {\r\n      gridOption: { enabled, grid, snapToGrid }\r\n    } = this.handler;\r\n    if (enabled && grid && snapToGrid) {\r\n      if (target.type === \"activeSelection\") {\r\n        const activeSelection = target as fabric.ActiveSelection;\r\n        activeSelection.set({\r\n          left: Math.round(target.left / grid) * grid,\r\n          top: Math.round(target.top / grid) * grid\r\n        });\r\n        activeSelection.setCoords();\r\n        activeSelection.getObjects().forEach((obj: any) => {\r\n          if (obj.superType === \"node\") {\r\n            const left = target.left + obj.left + target.width / 2;\r\n            const top = target.top + obj.top + target.height / 2;\r\n            this.handler.portHandler.setCoords({ ...obj, left, top });\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      const obj = target as FabricObject;\r\n      obj.set({\r\n        left: Math.round(target.left / grid) * grid,\r\n        top: Math.round(target.top / grid) * grid\r\n      });\r\n      target.setCoords();\r\n      this.handler.portHandler.setCoords(target as NodeObject);\r\n    }\r\n  };\r\n}\r\n\r\nexport default GridHandler;\r\n","import Handler from './Handler';\r\nimport { NodeObject } from '../objects/Node';\r\nimport { PortObject } from '../objects/Port';\r\n\r\nclass PortHandler {\r\n    handler?: Handler;\r\n\r\n    constructor(handler: Handler) {\r\n        this.handler = handler;\r\n    }\r\n\r\n    /**\r\n     * Create port\r\n     * @param {NodeObject} target\r\n     */\r\n    create = (target: NodeObject) => {\r\n        if (!target.createToPort) {\r\n            return;\r\n        }\r\n        const toPort = target.createToPort(target.left + (target.width / 2), target.top);\r\n        if (toPort) {\r\n            toPort.on('mouseover', () => {\r\n                if (this.handler.interactionMode === 'link' && this.handler.activeLine && this.handler.activeLine.class === 'line') {\r\n                    if (toPort.links.some(link => link.fromNode ===  this.handler.activeLine.fromNode)) {\r\n                        toPort.set({\r\n                            fill: toPort.errorFill,\r\n                        });\r\n                        this.handler.canvas.renderAll();\r\n                        return;\r\n                    }\r\n                    toPort.set({\r\n                        fill: toPort.hoverFill,\r\n                    });\r\n                    this.handler.canvas.renderAll();\r\n                }\r\n            });\r\n            toPort.on('mouseout', () => {\r\n                toPort.set({\r\n                    fill: toPort.originFill,\r\n                });\r\n                this.handler.canvas.renderAll();\r\n            });\r\n            this.handler.canvas.add(toPort);\r\n            toPort.setCoords();\r\n            this.handler.canvas.bringToFront(toPort);\r\n        }\r\n        const fromPort = target.createFromPort(target.left + (target.width / 2), target.top + target.height);\r\n        if (fromPort && fromPort.length) {\r\n            fromPort.forEach(port => {\r\n                if (port) {\r\n                    port.on('mouseover', () => {\r\n                        if (port.enabled) {\r\n                            if (this.handler.activeLine) {\r\n                                port.set({\r\n                                    fill: port.errorFill,\r\n                                });\r\n                                this.handler.canvas.renderAll();\r\n                                return;\r\n                            }\r\n                            port.set({\r\n                                fill: port.hoverFill,\r\n                            });\r\n                            this.handler.canvas.renderAll();\r\n                            return;\r\n                        }\r\n                        port.set({\r\n                            fill: port.errorFill,\r\n                        });\r\n                        this.handler.canvas.renderAll();\r\n                    });\r\n                    port.on('mouseout', () => {\r\n                        port.set({\r\n                            fill: port.originFill,\r\n                        });\r\n                        this.handler.canvas.renderAll();\r\n                    });\r\n                    this.handler.canvas.add(port);\r\n                    port.setCoords();\r\n                    this.handler.canvas.bringToFront(port);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set coords port\r\n     * @param {NodeObject} target\r\n     */\r\n    setCoords = (target: NodeObject) => {\r\n        if (target.toPort) {\r\n            const toCoords = {\r\n                left: target.left + (target.width / 2),\r\n                top: target.top,\r\n            };\r\n            target.toPort.set({\r\n                ...toCoords,\r\n            });\r\n            target.toPort.setCoords();\r\n            if (target.toPort.links.length) {\r\n                target.toPort.links.forEach(link => {\r\n                    const fromPort = link.fromNode.fromPort.filter(port => port.id === link.fromPort.id)[0];\r\n                    this.handler.linkHandler.setCoords(fromPort.left, fromPort.top, toCoords.left, toCoords.top, link);\r\n                });\r\n            }\r\n        }\r\n        if (target.fromPort) {\r\n            const fromCoords = {\r\n                left: target.left + (target.width / 2),\r\n                top: target.top + target.height,\r\n            };\r\n            target.fromPort.forEach(port => {\r\n                const left = port.leftDiff ? fromCoords.left + port.leftDiff : fromCoords.left;\r\n                const top = port.topDiff ? fromCoords.top + port.topDiff : fromCoords.top;\r\n                port.set({\r\n                    left,\r\n                    top,\r\n                });\r\n                port.setCoords();\r\n                if (port.links.length) {\r\n                    port.links.forEach((link: any) => {\r\n                        this.handler.linkHandler.setCoords(left, top, link.toNode.toPort.left, link.toNode.toPort.top, link);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Recreate port\r\n     * @param {NodeObject} target\r\n     */\r\n    recreate = (target: NodeObject) => {\r\n        const { fromPort, toPort } = target;\r\n        const ports = target.ports as PortObject[];\r\n        if (ports) {\r\n            ports.forEach(port => {\r\n                target.removeWithUpdate(port);\r\n                this.handler.canvas.remove(port.fromPort);\r\n            });\r\n        }\r\n        this.handler.canvas.remove(target.toPort);\r\n        if (target.toPort) {\r\n            target.toPort.links.forEach(link => {\r\n                this.handler.linkHandler.remove(link, 'from');\r\n            });\r\n        }\r\n        if (target.fromPort) {\r\n            target.fromPort.forEach((port: any) => {\r\n                if (port.links.length) {\r\n                    port.links.forEach((link: any) => {\r\n                        this.handler.linkHandler.remove(link, 'to');\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        this.create(target);\r\n        toPort.links.forEach((link: any) => {\r\n            link.fromNode = link.fromNode.id;\r\n            link.fromPort = link.fromPort.id;\r\n            link.toNode = target.toPort.nodeId;\r\n            link.toPort = target.toPort.id;\r\n            this.handler.linkHandler.create(link);\r\n        });\r\n        fromPort.filter(op => target.fromPort.some(np => np.id === op.id)).forEach(port => {\r\n            port.links.forEach((link: any) => {\r\n                if (link.fromPort.id === port.id) {\r\n                    link.fromNode = port.nodeId;\r\n                    link.fromPort = port.id;\r\n                    link.toNode = link.toNode.id;\r\n                    link.toPort = link.toPort.id;\r\n                    this.handler.linkHandler.create(link);\r\n                    this.setCoords(target);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default PortHandler;\r\n","import warning from \"warning\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { CurvedLink } from \"../objects\";\r\nimport { NodeObject } from \"../objects/Node\";\r\nimport { PortObject } from \"../objects/Port\";\r\nimport { LinkObject } from \"../objects/Link\";\r\n\r\nexport interface LinkOption {\r\n  /**\r\n   * Link Type\r\n   * @type {string}\r\n   */\r\n  type: string;\r\n  /**\r\n   * FromNode id of Link\r\n   * @type {string}\r\n   */\r\n  fromNodeId?: string;\r\n  /**\r\n   * FromPort id of Link\r\n   * @type {string}\r\n   */\r\n  fromPortId?: string;\r\n  /**\r\n   * ToNode id of Link\r\n   * @type {string}\r\n   */\r\n  toNodeId?: string;\r\n  /**\r\n   * ToPort id of Link\r\n   * @type {string}\r\n   */\r\n  toPortId?: string;\r\n}\r\n\r\n/**\r\n * Link Handler Class\r\n * @author salgum1114\r\n * @class LinkHandler\r\n */\r\nclass LinkHandler {\r\n  handler: Handler;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * On source port click, start link\r\n   * @param {PortObject} port\r\n   */\r\n  init = (port: PortObject) => {\r\n    if (this.isDrawing()) {\r\n      return;\r\n    }\r\n    if (this.isConnected(port)) {\r\n      return;\r\n    }\r\n    this.handler.interactionMode = \"link\";\r\n    const { left, top, nodeId, id } = port;\r\n    const fromPort = { left, top, id };\r\n    const toPort = { left, top };\r\n    const fromNode = this.handler.objectMap[nodeId];\r\n    this.handler.activeLine = new CurvedLink(fromNode, fromPort, null, toPort, {\r\n      strokeWidth: 2,\r\n      fill: \"#999999\",\r\n      stroke: \"#999999\",\r\n      class: \"line\",\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      selectable: false,\r\n      hasBorders: false,\r\n      hasControls: false,\r\n      evented: false\r\n    });\r\n    this.handler.canvas.add(this.handler.activeLine);\r\n  };\r\n\r\n  /**\r\n   * End drawing link.\r\n   */\r\n  finish = () => {\r\n    this.handler.interactionMode = \"selection\";\r\n    this.handler.canvas.remove(this.handler.activeLine);\r\n    this.handler.activeLine = null;\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * On dest port click, finish link\r\n   * @param {PortObject} port\r\n   */\r\n  generate = (port: PortObject) => {\r\n    if (!port) {\r\n      warning(!port, \"Does not exist target port.\");\r\n      return;\r\n    }\r\n    if (this.isDuplicate(port)) {\r\n      return;\r\n    }\r\n    if (this.isSameNode(port)) {\r\n      return;\r\n    }\r\n    const link = {\r\n      type: \"curvedLink\",\r\n      fromNodeId: this.handler.activeLine.fromNode.id,\r\n      fromPortId: this.handler.activeLine.fromPort.id,\r\n      toNodeId: port.nodeId,\r\n      toPortId: port.id\r\n    };\r\n    this.finish();\r\n    this.create(link);\r\n  };\r\n\r\n  /**\r\n   * Add link in Canvas\r\n   * @param {LinkOption} link\r\n   * @param {boolean} [loaded=false]\r\n   * @param {boolean} [transaction=true]\r\n   * @returns\r\n   */\r\n  create = (link: LinkOption, loaded = false, transaction = true) => {\r\n    const fromNode = this.handler.objectMap[link.fromNodeId] as NodeObject;\r\n    const fromPort = fromNode.fromPort.filter(\r\n      port => port.id === link.fromPortId || !port.id\r\n    )[0];\r\n    const toNode = this.handler.objectMap[link.toNodeId] as NodeObject;\r\n    const { toPort } = toNode;\r\n    const createdObj = this.handler.fabricObjects[link.type].create(\r\n      fromNode,\r\n      fromPort,\r\n      toNode,\r\n      toPort,\r\n      { ...link }\r\n    ) as LinkObject;\r\n    this.handler.canvas.add(createdObj);\r\n    this.handler.objects = this.handler.getObjects();\r\n    const { editable } = this.handler;\r\n    if (this.handler.onAdd && editable && !loaded) {\r\n      this.handler.onAdd(createdObj);\r\n    }\r\n    this.handler.canvas.renderAll();\r\n    createdObj.setPort(fromNode, fromPort, toNode, toPort);\r\n    this.handler.portHandler.setCoords(fromNode);\r\n    this.handler.portHandler.setCoords(toNode);\r\n    this.handler.canvas.requestRenderAll();\r\n    if (!this.handler.transactionHandler.active && transaction) {\r\n      this.handler.transactionHandler.save(\"add\");\r\n    }\r\n    return createdObj;\r\n  };\r\n\r\n  /**\r\n   * Set coordinate of link\r\n   * @param {number} x1\r\n   * @param {number} y1\r\n   * @param {number} x2\r\n   * @param {number} y2\r\n   * @param {LinkObject} link\r\n   */\r\n  setCoords = (\r\n    x1: number,\r\n    y1: number,\r\n    x2: number,\r\n    y2: number,\r\n    link: LinkObject\r\n  ) => {\r\n    link.set({\r\n      x1,\r\n      y1,\r\n      x2,\r\n      y2\r\n    });\r\n    link.setCoords();\r\n  };\r\n\r\n  /**\r\n   * When the link is deleted, linked FromNode delete\r\n   * @param {LinkObject} link\r\n   */\r\n  removeFrom = (link: LinkObject) => {\r\n    if (link.fromNode.fromPort.length) {\r\n      let index = -1;\r\n      link.fromNode.fromPort.forEach((port: any) => {\r\n        if (port.links.length) {\r\n          port.links.some((portLink: any, i: number) => {\r\n            if (link.id === portLink.id) {\r\n              index = i;\r\n              return true;\r\n            }\r\n            return false;\r\n          });\r\n          if (index > -1) {\r\n            port.links.splice(index, 1);\r\n          }\r\n        }\r\n        link.setPortEnabled(link.fromNode, port, true);\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * When the link is deleted, linked ToNode delete\r\n   * @param {LinkObject} link\r\n   */\r\n  removeTo = (link: LinkObject) => {\r\n    if (link.toNode.toPort.links.length) {\r\n      let index = -1;\r\n      link.toNode.toPort.links.some((portLink: any, i: number) => {\r\n        if (link.id === portLink.id) {\r\n          index = i;\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      if (index > -1) {\r\n        link.toNode.toPort.links.splice(index, 1);\r\n      }\r\n      link.setPortEnabled(link.toNode, link.toNode.toPort, true);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * When the link is deleted, linked node delete\r\n   * @param {LinkObject} link\r\n   */\r\n  removeAll = (link: LinkObject) => {\r\n    this.removeFrom(link);\r\n    this.removeTo(link);\r\n  };\r\n\r\n  /**\r\n   * Remove link in canvas\r\n   * @param {LinkObject} link\r\n   * @param {string} [type]\r\n   */\r\n  remove = (link: LinkObject, type?: string) => {\r\n    if (type === \"from\") {\r\n      this.removeFrom(link);\r\n    } else if (type === \"to\") {\r\n      this.removeTo(link);\r\n    } else {\r\n      this.removeAll(link);\r\n    }\r\n    this.handler.canvas.remove(link);\r\n    this.handler.objects = this.handler.getObjects();\r\n  };\r\n\r\n  /**\r\n   * Check if there is a port connected\r\n   * @param {PortObject} port\r\n   * @returns\r\n   */\r\n  isConnected = (port: PortObject) => {\r\n    warning(port.enabled, \"A connected node already exists.\");\r\n    return !port.enabled;\r\n  };\r\n\r\n  /**\r\n   * Check if select same node\r\n   * @param {PortObject} port\r\n   * @returns\r\n   */\r\n  isSameNode = (port: PortObject) => {\r\n    const validate = port.nodeId === this.handler.activeLine.fromNode.id;\r\n    warning(!validate, \"Cannot select the same node.\");\r\n    return validate;\r\n  };\r\n\r\n  /**\r\n   * Check if select same node\r\n   * @param {PortObject} port\r\n   * @returns\r\n   */\r\n  isDuplicate = (port: PortObject) => {\r\n    const validate = port.links.some(\r\n      link => link.fromNode.id === this.handler.activeLine.fromNode.id\r\n    );\r\n    warning(!validate, \"Duplicate connections cannot be made.\");\r\n    return validate;\r\n  };\r\n\r\n  /**\r\n   * Check if draw the link\r\n   * @returns\r\n   */\r\n  isDrawing = () => {\r\n    const validate =\r\n      this.handler.interactionMode === \"link\" && this.handler.activeLine;\r\n    warning(!validate, \"Already drawing links.\");\r\n    return validate;\r\n  };\r\n}\r\n\r\nexport default LinkHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject } from \"../utils\";\r\nimport { NodeObject } from \"../objects/Node\";\r\nimport { LinkObject } from \"../objects/Link\";\r\n\r\nclass NodeHandler {\r\n  handler: Handler;\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Get the node path by target object\r\n   * @param {NodeObject} target\r\n   * @param {NodeObject[]} [nodes=[]]\r\n   * @param {string} [direction='init']\r\n   */\r\n  getNodePath = (\r\n    target: NodeObject,\r\n    nodes: NodeObject[] = [],\r\n    direction = \"init\"\r\n  ) => {\r\n    if (target) {\r\n      if (direction === \"to\" || direction === \"init\") {\r\n        if (target.toPort) {\r\n          target.toPort.links.forEach(link => {\r\n            if (link.fromNode) {\r\n              nodes.push(link.fromNode);\r\n              this.getNodePath(link.fromNode, nodes, \"to\");\r\n            }\r\n          });\r\n        }\r\n        if (direction === \"init\") {\r\n          nodes.push(target);\r\n        }\r\n      }\r\n      if (direction === \"from\" || direction === \"init\") {\r\n        target.fromPort.forEach(port => {\r\n          port.links.forEach(link => {\r\n            if (link.toNode) {\r\n              nodes.push(link.toNode);\r\n              this.getNodePath(link.toNode, nodes, \"from\");\r\n            }\r\n          });\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Select the node path\r\n   * @param {string[]} [path]\r\n   */\r\n  selectByPath = (path?: string[]) => {\r\n    if (!path || !path.length) {\r\n      return;\r\n    }\r\n    const targetObjects = this.handler.objects.filter(object =>\r\n      path.some(id => id === object.id)\r\n    );\r\n    const nonTargetObjects = this.handler.objects.filter(object =>\r\n      path.some(id => id !== object.id)\r\n    );\r\n    nonTargetObjects.forEach((object: any) => {\r\n      if (object.superType === \"link\") {\r\n        const { fromNode, toNode } = object as LinkObject;\r\n        if (fromNode && toNode) {\r\n          const fromIndex = targetObjects.findIndex(\r\n            obj => obj.id === fromNode.id\r\n          );\r\n          const toIndex = targetObjects.findIndex(obj => obj.id === toNode.id);\r\n          if (\r\n            fromIndex >= 0 &&\r\n            targetObjects[fromIndex] &&\r\n            toIndex >= 0 &&\r\n            targetObjects[toIndex]\r\n          ) {\r\n            object.set({\r\n              opacity: 1\r\n            });\r\n            object.setShadow({\r\n              color: object.stroke\r\n            });\r\n            this.highlightingNode(object, 300);\r\n            this.handler.canvas.requestRenderAll();\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      object.set({\r\n        opacity: 0.2\r\n      });\r\n      if (object.superType === \"node\") {\r\n        if (object.toPort) {\r\n          object.toPort.set({\r\n            opacity: 0.2\r\n          });\r\n        }\r\n        object.fromPort.forEach((port: any) => {\r\n          port.set({\r\n            opacity: 0.2\r\n          });\r\n        });\r\n      }\r\n      if (!object.animating) {\r\n        object.setShadow({\r\n          blur: 0\r\n        });\r\n      }\r\n    });\r\n    targetObjects.forEach((object: any) => {\r\n      object.set({\r\n        opacity: 1\r\n      });\r\n      object.setShadow({\r\n        color: object.fill\r\n      });\r\n      this.highlightingNode(object, 300);\r\n      if (object.toPort) {\r\n        object.toPort.set({\r\n          opacity: 1\r\n        });\r\n      }\r\n      if (object.fromPort) {\r\n        object.fromPort.forEach((port: any) => {\r\n          port.set({\r\n            opacity: 1\r\n          });\r\n        });\r\n      }\r\n    });\r\n    this.handler.canvas.requestRenderAll();\r\n  };\r\n\r\n  /**\r\n   * Select node by id\r\n   * @param {string} id\r\n   */\r\n  selectById = (id: string) => {\r\n    this.handler.objects.forEach((object: any) => {\r\n      if (id === object.id) {\r\n        object.setShadow({\r\n          color: object.fill,\r\n          blur: 50\r\n        });\r\n        return;\r\n      } else if (id === object.nodeId) {\r\n        return;\r\n      }\r\n      object.setShadow({\r\n        blur: 0\r\n      });\r\n    });\r\n    this.handler.canvas.requestRenderAll();\r\n  };\r\n\r\n  /**\r\n   * Deselect nodes\r\n   */\r\n  deselect = () => {\r\n    this.handler.objects.forEach((object: FabricObject) => {\r\n      object.set({\r\n        opacity: 1\r\n      });\r\n      if (object.superType === \"node\") {\r\n        const node = object as NodeObject;\r\n        if (node.toPort) {\r\n          node.toPort.set({\r\n            opacity: 1\r\n          });\r\n        }\r\n        node.fromPort.forEach(port => {\r\n          port.set({\r\n            opacity: 1\r\n          });\r\n        });\r\n      }\r\n      if (!object.animating) {\r\n        const node = object as any;\r\n        node.setShadow({\r\n          blur: 0\r\n        });\r\n      }\r\n    });\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Highlight node path\r\n   * @param {string[]} [path]\r\n   */\r\n  highlightingByPath = (path?: string[]) => {\r\n    if (!path || !path.length) {\r\n      return;\r\n    }\r\n    const targetObjects = this.handler.objects.filter((obj: FabricObject) =>\r\n      path.some(id => id === obj.id)\r\n    );\r\n    const nonTargetObjects = this.handler.objects.filter((obj: FabricObject) =>\r\n      path.some(id => id !== obj.id)\r\n    );\r\n    const lastObject = targetObjects.filter(\r\n      (obj: FabricObject) => obj.id === path[path.length - 1]\r\n    )[0];\r\n    targetObjects.forEach((object: any) => {\r\n      if (lastObject) {\r\n        object.setShadow({\r\n          color: lastObject.fill\r\n        });\r\n      } else {\r\n        object.setShadow({\r\n          color: object.fill\r\n        });\r\n      }\r\n      this.highlightingNode(object);\r\n      this.handler.canvas.requestRenderAll();\r\n    });\r\n    nonTargetObjects.forEach((object: any) => {\r\n      if (object.superType === \"link\") {\r\n        const { fromNode, toNode } = object;\r\n        if (fromNode && toNode) {\r\n          const fromIndex = targetObjects.findIndex(\r\n            (obj: FabricObject) => obj.id === fromNode.id\r\n          );\r\n          const toIndex = targetObjects.findIndex(\r\n            (obj: FabricObject) => obj.id === toNode.id\r\n          );\r\n          if (\r\n            fromIndex >= 0 &&\r\n            targetObjects[fromIndex] &&\r\n            toIndex >= 0 &&\r\n            targetObjects[toIndex]\r\n          ) {\r\n            if (lastObject) {\r\n              object.setShadow({\r\n                color: lastObject.stroke\r\n              });\r\n            } else {\r\n              object.setShadow({\r\n                color: object.stroke\r\n              });\r\n            }\r\n            this.highlightingNode(object);\r\n            this.highlightingLink(object, lastObject);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    this.handler.canvas.requestRenderAll();\r\n  };\r\n\r\n  /**\r\n   * Highlight link\r\n   * @param {FabricObject} object\r\n   * @param {FabricObject} targetObject\r\n   * @param {number} [duration=500]\r\n   */\r\n  highlightingLink = (\r\n    object: FabricObject,\r\n    targetObject: FabricObject,\r\n    duration = 500\r\n  ) => {\r\n    object.animation = {\r\n      duration,\r\n      type: \"flash\",\r\n      stroke: targetObject ? targetObject.stroke : object.stroke,\r\n      loop: 1,\r\n      delay: 0\r\n    };\r\n    this.handler.animationHandler.play(object.id, false);\r\n  };\r\n\r\n  /**\r\n   * Highlight node\r\n   * @param {*} object\r\n   * @param {number} [duration=500]\r\n   */\r\n  highlightingNode = (object: any, duration = 500) => {\r\n    const maxBlur = 50;\r\n    const minBlur = 0;\r\n    const onComplete = () => {\r\n      if (object.shadow.blur === maxBlur) {\r\n        object.animating = true;\r\n        object.animate(\"shadow.blur\", minBlur, {\r\n          easing: fabric.util.ease.easeInOutQuad,\r\n          onChange: (value: number) => {\r\n            object.shadow.blur = value;\r\n            this.handler.canvas.requestRenderAll();\r\n          },\r\n          onComplete: () => {\r\n            object.animating = false;\r\n            if (object.superType === \"link\") {\r\n              object.set({\r\n                stroke: object.originStroke\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    };\r\n    object.animating = true;\r\n    object.animate(\"shadow.blur\", maxBlur, {\r\n      easing: fabric.util.ease.easeInOutQuad,\r\n      duration,\r\n      onChange: (value: number) => {\r\n        object.shadow.blur = value;\r\n        this.handler.canvas.requestRenderAll();\r\n      },\r\n      onComplete\r\n    });\r\n  };\r\n}\r\n\r\nexport default NodeHandler;\r\n","import Handler from './Handler';\r\n\r\nclass AlignmentHandler {\r\n    handler: Handler;\r\n    constructor(handler: Handler) {\r\n        this.handler = handler;\r\n    }\r\n\r\n    /**\r\n     * Align left at selection\r\n     */\r\n    public left = () => {\r\n        const activeObject = this.handler.canvas.getActiveObject();\r\n        if (activeObject && activeObject.type === 'activeSelection') {\r\n            const activeSelection = activeObject as fabric.ActiveSelection;\r\n            const activeObjectLeft = -(activeObject.width / 2);\r\n            activeSelection.forEachObject(obj => {\r\n                obj.set({\r\n                    left: activeObjectLeft,\r\n                });\r\n                obj.setCoords();\r\n                this.handler.canvas.renderAll();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Align center at selection\r\n     */\r\n    public center = () => {\r\n        const activeObject = this.handler.canvas.getActiveObject();\r\n        if (activeObject && activeObject.type === 'activeSelection') {\r\n            const activeSelection = activeObject as fabric.ActiveSelection;\r\n            activeSelection.forEachObject(obj => {\r\n                obj.set({\r\n                    left: 0 - ((obj.width * obj.scaleX) / 2),\r\n                });\r\n                obj.setCoords();\r\n                this.handler.canvas.renderAll();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Align right at selection\r\n     */\r\n    public right = () => {\r\n        const activeObject = this.handler.canvas.getActiveObject();\r\n        if (activeObject && activeObject.type === 'activeSelection') {\r\n            const activeSelection = activeObject as fabric.ActiveSelection;\r\n            const activeObjectLeft = (activeObject.width / 2);\r\n            activeSelection.forEachObject(obj => {\r\n                obj.set({\r\n                    left: activeObjectLeft - (obj.width * obj.scaleX),\r\n                });\r\n                obj.setCoords();\r\n                this.handler.canvas.renderAll();\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default AlignmentHandler;\r\n","import { fabric } from \"fabric\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { WorkareaObject, FabricObject } from \"../utils\";\r\n\r\nclass GuidelineHandler {\r\n  handler: Handler;\r\n  verticalLines: { x?: number; y1?: number; y2?: number }[];\r\n  horizontalLines: { y?: number; x1?: number; x2?: number }[];\r\n  ctx: CanvasRenderingContext2D;\r\n  viewportTransform: number[];\r\n\r\n  aligningLineOffset = 5;\r\n  aligningLineMargin = 4;\r\n  aligningLineWidth = 1;\r\n  aligningLineColor = \"rgb(255, 0, 0)\";\r\n  zoom = 1;\r\n\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  init = () => {\r\n    this.ctx = this.handler.canvas.getSelectionContext();\r\n    this.aligningLineOffset = 5;\r\n    this.aligningLineMargin = 4;\r\n    this.aligningLineWidth = 1;\r\n    this.aligningLineColor = \"rgb(255, 0, 0)\";\r\n    this.viewportTransform = this.handler.canvas.viewportTransform;\r\n    this.zoom = 1;\r\n    this.verticalLines = [];\r\n    this.horizontalLines = [];\r\n  };\r\n\r\n  drawVerticalLine = (coords: { x?: number; y1?: number; y2?: number }) => {\r\n    this.drawLine(\r\n      coords.x + 0.5,\r\n      coords.y1 > coords.y2 ? coords.y2 : coords.y1,\r\n      coords.x + 0.5,\r\n      coords.y2 > coords.y1 ? coords.y2 : coords.y1\r\n    );\r\n  };\r\n\r\n  drawHorizontalLine = (coords: { y?: number; x1?: number; x2?: number }) => {\r\n    this.drawLine(\r\n      coords.x1 > coords.x2 ? coords.x2 : coords.x1,\r\n      coords.y + 0.5,\r\n      coords.x2 > coords.x1 ? coords.x2 : coords.x1,\r\n      coords.y + 0.5\r\n    );\r\n  };\r\n\r\n  drawLine = (x1: number, y1: number, x2: number, y2: number) => {\r\n    const {\r\n      ctx,\r\n      aligningLineWidth,\r\n      aligningLineColor,\r\n      viewportTransform,\r\n      zoom\r\n    } = this;\r\n    ctx.save();\r\n    ctx.lineWidth = aligningLineWidth;\r\n    ctx.strokeStyle = aligningLineColor;\r\n    ctx.beginPath();\r\n    ctx.moveTo(\r\n      x1 * zoom + viewportTransform[4],\r\n      y1 * zoom + viewportTransform[5]\r\n    );\r\n    ctx.lineTo(\r\n      x2 * zoom + viewportTransform[4],\r\n      y2 * zoom + viewportTransform[5]\r\n    );\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  };\r\n\r\n  isInRange = (v1: number, v2: number) => {\r\n    const { aligningLineMargin } = this;\r\n    v1 = Math.round(v1);\r\n    v2 = Math.round(v2);\r\n    for (\r\n      let i = v1 - aligningLineMargin, len = v1 + aligningLineMargin;\r\n      i <= len;\r\n      i++\r\n    ) {\r\n      if (i === v2) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  movingGuidelines = (target: FabricObject) => {\r\n    const canvasObjects = this.handler.canvas.getObjects() as FabricObject[];\r\n    const activeObjectCenter = target.getCenterPoint();\r\n    const activeObjectLeft = activeObjectCenter.x;\r\n    const activeObjectTop = activeObjectCenter.y;\r\n    const activeObjectBoundingRect = target.getBoundingRect();\r\n    const activeObjectHeight =\r\n      activeObjectBoundingRect.height / this.viewportTransform[3];\r\n    const activeObjectWidth =\r\n      activeObjectBoundingRect.width / this.viewportTransform[0];\r\n    let horizontalInTheRange = false;\r\n    let verticalInTheRange = false;\r\n    const { _currentTransform: transform } = this.handler.canvas as any;\r\n    if (!transform) {\r\n      return;\r\n    }\r\n\r\n    // It should be trivial to DRY this up by encapsulating (repeating) creation of x1, x2, y1, and y2 into functions,\r\n    // but we're not doing it here for perf. reasons -- as this a function that's invoked on every mouse move\r\n\r\n    for (let i = canvasObjects.length; i--; ) {\r\n      if (\r\n        canvasObjects[i] === target ||\r\n        canvasObjects[i].superType === \"port\" ||\r\n        canvasObjects[i].superType === \"link\" ||\r\n        !canvasObjects[i].evented\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      const objectCenter = canvasObjects[i].getCenterPoint();\r\n      const objectLeft = objectCenter.x;\r\n      const objectTop = objectCenter.y;\r\n      const objectBoundingRect = canvasObjects[i].getBoundingRect();\r\n      const objectHeight =\r\n        objectBoundingRect.height / this.viewportTransform[3];\r\n      const objectWidth = objectBoundingRect.width / this.viewportTransform[0];\r\n\r\n      // snap by the horizontal center line\r\n      if (this.isInRange(objectLeft, activeObjectLeft)) {\r\n        verticalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const y1 = -5000;\r\n          const y2 = 5000;\r\n          this.verticalLines.push({\r\n            x: objectLeft,\r\n            y1,\r\n            y2\r\n          });\r\n        } else {\r\n          this.verticalLines.push({\r\n            x: objectLeft,\r\n            y1:\r\n              objectTop < activeObjectTop\r\n                ? objectTop - objectHeight / 2 - this.aligningLineOffset\r\n                : objectTop + objectHeight / 2 + this.aligningLineOffset,\r\n            y2:\r\n              activeObjectTop > objectTop\r\n                ? activeObjectTop +\r\n                  activeObjectHeight / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectTop -\r\n                  activeObjectHeight / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(objectLeft, activeObjectTop),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n\r\n      // snap by the left edge\r\n      if (\r\n        this.isInRange(\r\n          objectLeft - objectWidth / 2,\r\n          activeObjectLeft - activeObjectWidth / 2\r\n        )\r\n      ) {\r\n        verticalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const workarea = canvasObjects[i] as WorkareaObject;\r\n          const y1 = -5000;\r\n          const y2 = 5000;\r\n          let x = objectLeft - objectWidth / 2;\r\n          if (workarea.layout === \"fullscreen\") {\r\n            x = 0;\r\n          }\r\n          this.verticalLines.push({\r\n            x,\r\n            y1,\r\n            y2\r\n          });\r\n        } else {\r\n          this.verticalLines.push({\r\n            x: objectLeft - objectWidth / 2,\r\n            y1:\r\n              objectTop < activeObjectTop\r\n                ? objectTop - objectHeight / 2 - this.aligningLineOffset\r\n                : objectTop + objectHeight / 2 + this.aligningLineOffset,\r\n            y2:\r\n              activeObjectTop > objectTop\r\n                ? activeObjectTop +\r\n                  activeObjectHeight / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectTop -\r\n                  activeObjectHeight / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(\r\n            objectLeft - objectWidth / 2 + activeObjectWidth / 2,\r\n            activeObjectTop\r\n          ),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n\r\n      // snap by the right edge\r\n      if (\r\n        this.isInRange(\r\n          objectLeft + objectWidth / 2,\r\n          activeObjectLeft + activeObjectWidth / 2\r\n        )\r\n      ) {\r\n        verticalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const workarea = canvasObjects[i] as WorkareaObject;\r\n          const y1 = -5000;\r\n          const y2 = 5000;\r\n          let x = objectLeft + objectWidth / 2;\r\n          if (workarea.layout === \"fullscreen\") {\r\n            x = this.handler.canvas.getWidth();\r\n          }\r\n          this.verticalLines.push({\r\n            x,\r\n            y1,\r\n            y2\r\n          });\r\n        } else {\r\n          this.verticalLines.push({\r\n            x: objectLeft + objectWidth / 2,\r\n            y1:\r\n              objectTop < activeObjectTop\r\n                ? objectTop - objectHeight / 2 - this.aligningLineOffset\r\n                : objectTop + objectHeight / 2 + this.aligningLineOffset,\r\n            y2:\r\n              activeObjectTop > objectTop\r\n                ? activeObjectTop +\r\n                  activeObjectHeight / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectTop -\r\n                  activeObjectHeight / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(\r\n            objectLeft + objectWidth / 2 - activeObjectWidth / 2,\r\n            activeObjectTop\r\n          ),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n\r\n      // snap by the vertical center line\r\n      if (this.isInRange(objectTop, activeObjectTop)) {\r\n        horizontalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const x1 = -5000;\r\n          const x2 = 5000;\r\n          this.horizontalLines.push({\r\n            y: objectTop,\r\n            x1,\r\n            x2\r\n          });\r\n        } else {\r\n          this.horizontalLines.push({\r\n            y: objectTop,\r\n            x1:\r\n              objectLeft < activeObjectLeft\r\n                ? objectLeft - objectWidth / 2 - this.aligningLineOffset\r\n                : objectLeft + objectWidth / 2 + this.aligningLineOffset,\r\n            x2:\r\n              activeObjectLeft > objectLeft\r\n                ? activeObjectLeft +\r\n                  activeObjectWidth / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectLeft -\r\n                  activeObjectWidth / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(activeObjectLeft, objectTop),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n\r\n      // snap by the top edge\r\n      if (\r\n        this.isInRange(\r\n          objectTop - objectHeight / 2,\r\n          activeObjectTop - activeObjectHeight / 2\r\n        )\r\n      ) {\r\n        horizontalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const workarea = canvasObjects[i] as WorkareaObject;\r\n          const x1 = -5000;\r\n          const x2 = 5000;\r\n          let y = objectTop - objectHeight / 2;\r\n          if (workarea.layout === \"fullscreen\") {\r\n            y = 0;\r\n          }\r\n          this.horizontalLines.push({\r\n            y,\r\n            x1,\r\n            x2\r\n          });\r\n        } else {\r\n          this.horizontalLines.push({\r\n            y: objectTop - objectHeight / 2,\r\n            x1:\r\n              objectLeft < activeObjectLeft\r\n                ? objectLeft - objectWidth / 2 - this.aligningLineOffset\r\n                : objectLeft + objectWidth / 2 + this.aligningLineOffset,\r\n            x2:\r\n              activeObjectLeft > objectLeft\r\n                ? activeObjectLeft +\r\n                  activeObjectWidth / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectLeft -\r\n                  activeObjectWidth / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(\r\n            activeObjectLeft,\r\n            objectTop - objectHeight / 2 + activeObjectHeight / 2\r\n          ),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n\r\n      // snap by the bottom edge\r\n      if (\r\n        this.isInRange(\r\n          objectTop + objectHeight / 2,\r\n          activeObjectTop + activeObjectHeight / 2\r\n        )\r\n      ) {\r\n        horizontalInTheRange = true;\r\n        if (canvasObjects[i].id === \"workarea\") {\r\n          const workarea = canvasObjects[i] as WorkareaObject;\r\n          const x1 = -5000;\r\n          const x2 = 5000;\r\n          let y = objectTop + objectHeight / 2;\r\n          if (workarea.layout === \"fullscreen\") {\r\n            y = this.handler.canvas.getHeight();\r\n          }\r\n          this.horizontalLines.push({\r\n            y,\r\n            x1,\r\n            x2\r\n          });\r\n        } else {\r\n          this.horizontalLines.push({\r\n            y: objectTop + objectHeight / 2,\r\n            x1:\r\n              objectLeft < activeObjectLeft\r\n                ? objectLeft - objectWidth / 2 - this.aligningLineOffset\r\n                : objectLeft + objectWidth / 2 + this.aligningLineOffset,\r\n            x2:\r\n              activeObjectLeft > objectLeft\r\n                ? activeObjectLeft +\r\n                  activeObjectWidth / 2 +\r\n                  this.aligningLineOffset\r\n                : activeObjectLeft -\r\n                  activeObjectWidth / 2 -\r\n                  this.aligningLineOffset\r\n          });\r\n        }\r\n        target.setPositionByOrigin(\r\n          new fabric.Point(\r\n            activeObjectLeft,\r\n            objectTop + objectHeight / 2 - activeObjectHeight / 2\r\n          ),\r\n          \"center\",\r\n          \"center\"\r\n        );\r\n      }\r\n    }\r\n\r\n    if (!horizontalInTheRange) {\r\n      this.horizontalLines.length = 0;\r\n    }\r\n\r\n    if (!verticalInTheRange) {\r\n      this.verticalLines.length = 0;\r\n    }\r\n  };\r\n\r\n  scalingGuidelines = (_target: FabricObject) => {\r\n    // TODO... object scaling guideline\r\n  };\r\n}\r\n\r\nexport default GuidelineHandler;\r\n","import { fabric } from \"fabric\";\r\nimport anime from \"animejs\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricObject, FabricEvent } from \"../utils\";\r\nimport { VideoObject } from \"../objects/Video\";\r\nimport { NodeObject } from \"../objects/Node\";\r\n\r\n/**\r\n * Event Handler Class\r\n * @author salgum1114\r\n * @class EventHandler\r\n */\r\nclass EventHandler {\r\n  handler: Handler;\r\n  keyCode: number;\r\n  panning: boolean;\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  /**\r\n   * Attch event on document\r\n   *\r\n   */\r\n  public attachEventListener = () => {\r\n    if (this.handler.editable) {\r\n      this.handler.canvas.on({\r\n        \"object:modified\": this.modified,\r\n        \"object:scaling\": this.scaling,\r\n        \"object:scaled\": this.scaled,\r\n        \"object:moving\": this.moving,\r\n        \"object:moved\": this.moved,\r\n        \"object:rotating\": this.rotating,\r\n        \"object:rotated\": this.rotated,\r\n        \"mouse:wheel\": this.mousewheel,\r\n        \"mouse:down\": this.mousedown,\r\n        \"mouse:move\": this.mousemove,\r\n        \"mouse:up\": this.mouseup,\r\n        \"selection:cleared\": this.selection,\r\n        \"selection:created\": this.selection,\r\n        \"selection:updated\": this.selection,\r\n        \"before:render\": this.handler.guidelineOption.enabled\r\n          ? this.beforeRender\r\n          : null,\r\n        \"after:render\": this.handler.guidelineOption.enabled\r\n          ? this.afterRender\r\n          : null\r\n      });\r\n    } else {\r\n      this.handler.canvas.on({\r\n        \"mouse:down\": this.mousedown,\r\n        \"mouse:move\": this.mousemove,\r\n        \"mouse:out\": this.mouseout,\r\n        \"mouse:up\": this.mouseup,\r\n        \"mouse:wheel\": this.mousewheel\r\n      });\r\n    }\r\n    this.handler.canvas.wrapperEl.tabIndex = 1000;\r\n    this.handler.canvas.wrapperEl.addEventListener(\r\n      \"keydown\",\r\n      this.keydown,\r\n      false\r\n    );\r\n    this.handler.canvas.wrapperEl.addEventListener(\"keyup\", this.keyup, false);\r\n    this.handler.canvas.wrapperEl.addEventListener(\r\n      \"mousedown\",\r\n      this.onmousedown,\r\n      false\r\n    );\r\n    this.handler.canvas.wrapperEl.addEventListener(\r\n      \"contextmenu\",\r\n      this.contextmenu,\r\n      false\r\n    );\r\n    if (this.handler.keyEvent.clipboard) {\r\n      document.addEventListener(\"paste\", this.paste, false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Detach event on document\r\n   *\r\n   */\r\n  public detachEventListener = () => {\r\n    if (this.handler.editable) {\r\n      this.handler.canvas.off({\r\n        \"object:modified\": this.modified,\r\n        \"object:scaling\": this.scaling,\r\n        \"object:moving\": this.moving,\r\n        \"object:moved\": this.moved,\r\n        \"object:rotating\": this.rotating,\r\n        \"mouse:wheel\": this.mousewheel,\r\n        \"mouse:down\": this.mousedown,\r\n        \"mouse:move\": this.mousemove,\r\n        \"mouse:up\": this.mouseup,\r\n        \"selection:cleared\": this.selection,\r\n        \"selection:created\": this.selection,\r\n        \"selection:updated\": this.selection,\r\n        \"before:render\": this.beforeRender,\r\n        \"after:render\": this.afterRender\r\n      });\r\n    } else {\r\n      this.handler.canvas.off({\r\n        \"mouse:down\": this.mousedown,\r\n        \"mouse:move\": this.mousemove,\r\n        \"mouse:out\": this.mouseout,\r\n        \"mouse:up\": this.mouseup,\r\n        \"mouse:wheel\": this.mousewheel\r\n      });\r\n      this.handler.getObjects().forEach(object => {\r\n        object.off(\"mousedown\", this.handler.eventHandler.object.mousedown);\r\n        if (object.anime) {\r\n          anime.remove(object);\r\n        }\r\n      });\r\n    }\r\n    this.handler.canvas.wrapperEl.removeEventListener(\"keydown\", this.keydown);\r\n    this.handler.canvas.wrapperEl.removeEventListener(\"keyup\", this.keyup);\r\n    this.handler.canvas.wrapperEl.removeEventListener(\r\n      \"mousedown\",\r\n      this.onmousedown\r\n    );\r\n    this.handler.canvas.wrapperEl.removeEventListener(\r\n      \"contextmenu\",\r\n      this.contextmenu\r\n    );\r\n    if (this.handler.keyEvent.clipboard) {\r\n      this.handler.canvas.wrapperEl.removeEventListener(\"paste\", this.paste);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Individual object event\r\n   *\r\n   */\r\n  public object = {\r\n    /**\r\n     * Mouse down event on object\r\n     * @param {FabricEvent} opt\r\n     */\r\n    mousedown: (opt: FabricEvent) => {\r\n      const { target } = opt;\r\n      if (target && target.link && target.link.enabled) {\r\n        const { onClick } = this.handler;\r\n        if (onClick) {\r\n          onClick(this.handler.canvas, target);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * Mouse double click event on object\r\n     * @param {FabricEvent} opt\r\n     */\r\n    mousedblclick: (opt: FabricEvent) => {\r\n      const { target } = opt;\r\n      if (target) {\r\n        const { onDblClick } = this.handler;\r\n        if (onDblClick) {\r\n          onDblClick(this.handler.canvas, target);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Modified event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   * @returns\r\n   */\r\n  public modified = (opt: FabricEvent) => {\r\n    const { target } = opt;\r\n    if (!target) {\r\n      return;\r\n    }\r\n    if (target.type === \"circle\" && target.parentId) {\r\n      return;\r\n    }\r\n    const { onModified } = this.handler;\r\n    if (onModified) {\r\n      onModified(target);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Moving event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   * @returns\r\n   */\r\n  public moving = (opt: FabricEvent) => {\r\n    const { target } = opt as any;\r\n    if (this.handler.interactionMode === \"crop\") {\r\n      this.handler.cropHandler.moving(opt);\r\n    } else {\r\n      if (this.handler.editable && this.handler.guidelineOption.enabled) {\r\n        this.handler.guidelineHandler.movingGuidelines(target);\r\n      }\r\n      if (target.type === \"activeSelection\") {\r\n        const activeSelection = target as fabric.ActiveSelection;\r\n        activeSelection.getObjects().forEach((obj: any) => {\r\n          const left = target.left + obj.left + target.width / 2;\r\n          const top = target.top + obj.top + target.height / 2;\r\n          if (obj.superType === \"node\") {\r\n            this.handler.portHandler.setCoords({ ...obj, left, top });\r\n          } else if (obj.superType === \"element\") {\r\n            const { id } = obj;\r\n            const el = this.handler.elementHandler.findById(id);\r\n            // TODO... Element object incorrect position\r\n            this.handler.elementHandler.setPositionByOrigin(el, obj, left, top);\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      if (target.superType === \"node\") {\r\n        this.handler.portHandler.setCoords(target);\r\n      } else if (target.superType === \"element\") {\r\n        const { id } = target;\r\n        const el = this.handler.elementHandler.findById(id);\r\n        this.handler.elementHandler.setPosition(el, target);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Moved event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public moved = (opt: FabricEvent) => {\r\n    const { target } = opt;\r\n    this.handler.gridHandler.setCoords(target);\r\n    if (!this.handler.transactionHandler.active) {\r\n      this.handler.transactionHandler.save(\"moved\");\r\n    }\r\n    if (target.superType === \"element\") {\r\n      const { id } = target;\r\n      const el = this.handler.elementHandler.findById(id);\r\n      this.handler.elementHandler.setPosition(el, target);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Scaling event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public scaling = (opt: FabricEvent) => {\r\n    const { target } = opt as any;\r\n    if (this.handler.interactionMode === \"crop\") {\r\n      this.handler.cropHandler.resize(opt);\r\n    }\r\n    // TODO...this.handler.guidelineHandler.scalingGuidelines(target);\r\n    if (target.superType === \"element\") {\r\n      const { id, width, height } = target;\r\n      const el = this.handler.elementHandler.findById(id);\r\n      // update the element\r\n      this.handler.elementHandler.setScaleOrAngle(el, target);\r\n      this.handler.elementHandler.setSize(el, target);\r\n      this.handler.elementHandler.setPosition(el, target);\r\n      const video = target as VideoObject;\r\n      if (video.type === \"video\" && video.player) {\r\n        video.player.setPlayerSize(width, height);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Scaled event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public scaled = (_opt: FabricEvent) => {\r\n    if (!this.handler.transactionHandler.active) {\r\n      this.handler.transactionHandler.save(\"scaled\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Rotating event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public rotating = (opt: FabricEvent) => {\r\n    const { target } = opt as any;\r\n    if (target.superType === \"element\") {\r\n      const { id } = target;\r\n      const el = this.handler.elementHandler.findById(id);\r\n      // update the element\r\n      this.handler.elementHandler.setScaleOrAngle(el, target);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Rotated event object\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public rotated = (_opt: FabricEvent) => {\r\n    if (!this.handler.transactionHandler.active) {\r\n      this.handler.transactionHandler.save(\"rotated\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Moing object at keyboard arrow key down event\r\n   *\r\n   * @param {KeyboardEvent} e\r\n   * @returns\r\n   */\r\n  public arrowmoving = (e: KeyboardEvent) => {\r\n    const activeObject = this.handler.canvas.getActiveObject() as FabricObject;\r\n    if (!activeObject) {\r\n      return false;\r\n    }\r\n    if (activeObject.id === \"workarea\") {\r\n      return false;\r\n    }\r\n    if (e.keyCode === 38) {\r\n      activeObject.set(\"top\", activeObject.top - 2);\r\n      activeObject.setCoords();\r\n      this.handler.canvas.renderAll();\r\n      return true;\r\n    } else if (e.keyCode === 40) {\r\n      activeObject.set(\"top\", activeObject.top + 2);\r\n      activeObject.setCoords();\r\n      this.handler.canvas.renderAll();\r\n      return true;\r\n    } else if (e.keyCode === 37) {\r\n      activeObject.set(\"left\", activeObject.left - 2);\r\n      activeObject.setCoords();\r\n      this.handler.canvas.renderAll();\r\n      return true;\r\n    } else if (e.keyCode === 39) {\r\n      activeObject.set(\"left\", activeObject.left + 2);\r\n      activeObject.setCoords();\r\n      this.handler.canvas.renderAll();\r\n      return true;\r\n    }\r\n    if (this.handler.onModified) {\r\n      this.handler.onModified(activeObject);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Zoom at mouse wheel event\r\n   *\r\n   * @param {FabricEvent<WheelEvent>} opt\r\n   * @returns\r\n   */\r\n  public mousewheel = (opt: FabricEvent) => {\r\n    const event = opt as FabricEvent<WheelEvent>;\r\n    const { zoomEnabled } = this.handler;\r\n    if (!zoomEnabled) {\r\n      return;\r\n    }\r\n    const delta = event.e.deltaY;\r\n    let zoomRatio = this.handler.canvas.getZoom();\r\n    if (delta > 0) {\r\n      zoomRatio -= 0.05;\r\n    } else {\r\n      zoomRatio += 0.05;\r\n    }\r\n    this.handler.zoomHandler.zoomToPoint(\r\n      new fabric.Point(\r\n        this.handler.canvas.getWidth() / 2,\r\n        this.handler.canvas.getHeight() / 2\r\n      ),\r\n      zoomRatio\r\n    );\r\n    event.e.preventDefault();\r\n    event.e.stopPropagation();\r\n  };\r\n\r\n  /**\r\n   * Mouse down event on object\r\n   *\r\n   * @param {FabricEvent<MouseEvent>} opt\r\n   * @returns\r\n   */\r\n  public mousedown = (opt: FabricEvent) => {\r\n    const event = opt as FabricEvent<MouseEvent>;\r\n    const { editable } = this.handler;\r\n    if (\r\n      event.e.altKey &&\r\n      editable &&\r\n      !this.handler.interactionHandler.isDrawingMode()\r\n    ) {\r\n      this.handler.interactionHandler.grab();\r\n      this.panning = true;\r\n      return;\r\n    }\r\n    if (this.handler.interactionMode === \"grab\") {\r\n      this.panning = true;\r\n      return;\r\n    }\r\n    const { target } = event;\r\n    if (editable) {\r\n      if (\r\n        this.handler.prevTarget &&\r\n        this.handler.prevTarget.superType === \"link\"\r\n      ) {\r\n        this.handler.prevTarget.set({\r\n          stroke: this.handler.prevTarget.originStroke\r\n        });\r\n      }\r\n      if (target && target.type === \"fromPort\") {\r\n        this.handler.linkHandler.init(target);\r\n        return;\r\n      }\r\n      if (\r\n        target &&\r\n        this.handler.interactionMode === \"link\" &&\r\n        (target.type === \"toPort\" || target.superType === \"node\")\r\n      ) {\r\n        let toPort;\r\n        if (target.superType === \"node\") {\r\n          toPort = target.toPort;\r\n        } else {\r\n          toPort = target;\r\n        }\r\n        this.handler.linkHandler.generate(toPort);\r\n        return;\r\n      }\r\n      this.handler.guidelineHandler.viewportTransform = this.handler.canvas.viewportTransform;\r\n      this.handler.guidelineHandler.zoom = this.handler.canvas.getZoom();\r\n      if (this.handler.interactionMode === \"selection\") {\r\n        if (target && target.superType === \"link\") {\r\n          target.set({\r\n            stroke: \"green\"\r\n          });\r\n        }\r\n        this.handler.prevTarget = target;\r\n        return;\r\n      }\r\n      if (this.handler.interactionMode === \"polygon\") {\r\n        if (\r\n          target &&\r\n          this.handler.pointArray.length &&\r\n          target.id === this.handler.pointArray[0].id\r\n        ) {\r\n          this.handler.drawingHandler.polygon.generate(this.handler.pointArray);\r\n        } else {\r\n          this.handler.drawingHandler.polygon.addPoint(event);\r\n        }\r\n      } else if (this.handler.interactionMode === \"line\") {\r\n        if (this.handler.pointArray.length && this.handler.activeLine) {\r\n          this.handler.drawingHandler.line.generate(event);\r\n        } else {\r\n          this.handler.drawingHandler.line.addPoint(event);\r\n        }\r\n      } else if (this.handler.interactionMode === \"arrow\") {\r\n        if (this.handler.pointArray.length && this.handler.activeLine) {\r\n          this.handler.drawingHandler.arrow.generate(event);\r\n        } else {\r\n          this.handler.drawingHandler.arrow.addPoint(event);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Mouse move event on canvas\r\n   *\r\n   * @param {FabricEvent<MouseEvent>} opt\r\n   * @returns\r\n   */\r\n  public mousemove = (opt: FabricEvent) => {\r\n    const event = opt as FabricEvent<MouseEvent>;\r\n    if (this.handler.interactionMode === \"grab\" && this.panning) {\r\n      this.handler.interactionHandler.moving(event.e);\r\n      this.handler.canvas.requestRenderAll();\r\n    }\r\n    if (!this.handler.editable && event.target) {\r\n      if (event.target.superType === \"element\") {\r\n        return;\r\n      }\r\n      if (event.target.id !== \"workarea\") {\r\n        if (event.target !== this.handler.target) {\r\n          this.handler.tooltipHandler.show(event.target);\r\n        }\r\n      } else {\r\n        this.handler.tooltipHandler.hide(event.target);\r\n      }\r\n    }\r\n    if (this.handler.interactionMode === \"polygon\") {\r\n      if (this.handler.activeLine && this.handler.activeLine.class === \"line\") {\r\n        const pointer = this.handler.canvas.getPointer(event.e);\r\n        this.handler.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n        const points = this.handler.activeShape.get(\"points\");\r\n        points[this.handler.pointArray.length] = {\r\n          x: pointer.x,\r\n          y: pointer.y\r\n        };\r\n        this.handler.activeShape.set({\r\n          points\r\n        });\r\n        this.handler.canvas.requestRenderAll();\r\n      }\r\n    } else if (this.handler.interactionMode === \"line\") {\r\n      if (this.handler.activeLine && this.handler.activeLine.class === \"line\") {\r\n        const pointer = this.handler.canvas.getPointer(event.e);\r\n        this.handler.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n      }\r\n      this.handler.canvas.requestRenderAll();\r\n    } else if (this.handler.interactionMode === \"arrow\") {\r\n      if (this.handler.activeLine && this.handler.activeLine.class === \"line\") {\r\n        const pointer = this.handler.canvas.getPointer(event.e);\r\n        this.handler.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n      }\r\n      this.handler.canvas.requestRenderAll();\r\n    } else if (this.handler.interactionMode === \"link\") {\r\n      if (this.handler.activeLine && this.handler.activeLine.class === \"line\") {\r\n        const pointer = this.handler.canvas.getPointer(event.e);\r\n        this.handler.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n      }\r\n      this.handler.canvas.requestRenderAll();\r\n    }\r\n    return;\r\n  };\r\n\r\n  /**\r\n   * Mouse up event on canvas\r\n   *\r\n   * @param {FabricEvent<MouseEvent>} opt\r\n   * @returns\r\n   */\r\n  public mouseup = (opt: FabricEvent) => {\r\n    const event = opt as FabricEvent<MouseEvent>;\r\n    if (this.handler.interactionMode === \"grab\") {\r\n      this.panning = false;\r\n      return;\r\n    }\r\n    const { target, e } = event;\r\n    if (this.handler.interactionMode === \"selection\") {\r\n      if (target && e.shiftKey && target.superType === \"node\") {\r\n        const node = target as NodeObject;\r\n        this.handler.canvas.discardActiveObject();\r\n        const nodes = [] as NodeObject[];\r\n        this.handler.nodeHandler.getNodePath(node, nodes);\r\n        const activeSelection = new fabric.ActiveSelection(nodes, {\r\n          canvas: this.handler.canvas,\r\n          ...this.handler.activeSelection\r\n        });\r\n        this.handler.canvas.setActiveObject(activeSelection);\r\n        this.handler.canvas.requestRenderAll();\r\n      }\r\n    }\r\n    if (this.handler.editable && this.handler.guidelineOption.enabled) {\r\n      this.handler.guidelineHandler.verticalLines.length = 0;\r\n      this.handler.guidelineHandler.horizontalLines.length = 0;\r\n    }\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Mouse out event on canvas\r\n   *\r\n   * @param {FabricEvent<MouseEvent>} opt\r\n   */\r\n  public mouseout = (opt: FabricEvent) => {\r\n    const event = opt as FabricEvent<MouseEvent>;\r\n    if (!event.target) {\r\n      this.handler.tooltipHandler.hide();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Selection event event on canvas\r\n   *\r\n   * @param {FabricEvent} opt\r\n   */\r\n  public selection = (opt: FabricEvent) => {\r\n    const { onSelect, activeSelection } = this.handler;\r\n    const target = opt.target as FabricObject<fabric.ActiveSelection>;\r\n    if (target && target.type === \"activeSelection\") {\r\n      target.set({\r\n        ...activeSelection\r\n      });\r\n    }\r\n    if (onSelect) {\r\n      onSelect(target);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Before the render\r\n   *\r\n   * @param {FabricEvent} _opt\r\n   */\r\n  public beforeRender = (_opt: FabricEvent) => {\r\n    this.handler.canvas.clearContext(this.handler.guidelineHandler.ctx);\r\n  };\r\n\r\n  /**\r\n   * After the render\r\n   *\r\n   * @param {FabricEvent} _opt\r\n   */\r\n  public afterRender = (_opt: FabricEvent) => {\r\n    for (let i = this.handler.guidelineHandler.verticalLines.length; i--; ) {\r\n      this.handler.guidelineHandler.drawVerticalLine(\r\n        this.handler.guidelineHandler.verticalLines[i]\r\n      );\r\n    }\r\n    for (let i = this.handler.guidelineHandler.horizontalLines.length; i--; ) {\r\n      this.handler.guidelineHandler.drawHorizontalLine(\r\n        this.handler.guidelineHandler.horizontalLines[i]\r\n      );\r\n    }\r\n    this.handler.guidelineHandler.verticalLines.length = 0;\r\n    this.handler.guidelineHandler.horizontalLines.length = 0;\r\n  };\r\n\r\n  /**\r\n   * Called resize event on canvas\r\n   *\r\n   * @param {number} nextWidth\r\n   * @param {number} nextHeight\r\n   * @returns\r\n   */\r\n  public resize = (nextWidth: number, nextHeight: number) => {\r\n    this.handler.canvas.setWidth(nextWidth).setHeight(nextHeight);\r\n    this.handler.canvas.setBackgroundColor(\r\n      this.handler.canvasOption.backgroundColor,\r\n      this.handler.canvas.renderAll.bind(this.handler.canvas)\r\n    );\r\n    if (!this.handler.workarea) {\r\n      return;\r\n    }\r\n    const diffWidth = nextWidth / 2 - this.handler.width / 2;\r\n    const diffHeight = nextHeight / 2 - this.handler.height / 2;\r\n    this.handler.width = nextWidth;\r\n    this.handler.height = nextHeight;\r\n    if (this.handler.workarea.layout === \"fixed\") {\r\n      this.handler.canvas.centerObject(this.handler.workarea);\r\n      this.handler.workarea.setCoords();\r\n      if (this.handler.gridOption.enabled) {\r\n        return;\r\n      }\r\n      this.handler.canvas.getObjects().forEach((obj: any, index) => {\r\n        if (index !== 0) {\r\n          const left = obj.left + diffWidth;\r\n          const top = obj.top + diffHeight;\r\n          obj.set({\r\n            left,\r\n            top\r\n          });\r\n          obj.setCoords();\r\n          if (obj.superType === \"element\") {\r\n            const { id } = obj;\r\n            const el = this.handler.elementHandler.findById(id);\r\n            // update the element\r\n            this.handler.elementHandler.setPosition(el, obj);\r\n          }\r\n        }\r\n      });\r\n      this.handler.canvas.renderAll();\r\n      return;\r\n    }\r\n    let scaleX = nextWidth / this.handler.workarea.width;\r\n    const scaleY = nextHeight / this.handler.workarea.height;\r\n    if (this.handler.workarea.layout === \"responsive\") {\r\n      if (this.handler.workarea.height > this.handler.workarea.width) {\r\n        scaleX = scaleY;\r\n        if (nextWidth < this.handler.workarea.width * scaleX) {\r\n          scaleX =\r\n            scaleX * (nextWidth / (this.handler.workarea.width * scaleX));\r\n        }\r\n      } else {\r\n        if (nextHeight < this.handler.workarea.height * scaleX) {\r\n          scaleX =\r\n            scaleX * (nextHeight / (this.handler.workarea.height * scaleX));\r\n        }\r\n      }\r\n      const deltaPoint = new fabric.Point(diffWidth, diffHeight);\r\n      this.handler.canvas.relativePan(deltaPoint);\r\n      const center = this.handler.canvas.getCenter();\r\n      this.handler.zoomHandler.zoomToPoint(\r\n        new fabric.Point(center.left, center.top),\r\n        scaleX\r\n      );\r\n      this.handler.canvas.renderAll();\r\n      return;\r\n    }\r\n    const diffScaleX =\r\n      nextWidth / (this.handler.workarea.width * this.handler.workarea.scaleX);\r\n    const diffScaleY =\r\n      nextHeight /\r\n      (this.handler.workarea.height * this.handler.workarea.scaleY);\r\n    this.handler.workarea.set({\r\n      scaleX,\r\n      scaleY\r\n    });\r\n    this.handler.canvas.getObjects().forEach((obj: any) => {\r\n      const { id } = obj;\r\n      if (obj.id !== \"workarea\") {\r\n        const left = obj.left * diffScaleX;\r\n        const top = obj.top * diffScaleY;\r\n        const newScaleX = obj.scaleX * diffScaleX;\r\n        const newScaleY = obj.scaleY * diffScaleY;\r\n        obj.set({\r\n          scaleX: newScaleX,\r\n          scaleY: newScaleY,\r\n          left,\r\n          top\r\n        });\r\n        obj.setCoords();\r\n        if (obj.superType === \"element\") {\r\n          const video = obj as VideoObject;\r\n          const { width, height } = obj;\r\n          const el = this.handler.elementHandler.findById(id);\r\n          this.handler.elementHandler.setSize(el, obj);\r\n          if (video.player) {\r\n            video.player.setPlayerSize(width, height);\r\n          }\r\n          this.handler.elementHandler.setPosition(el, obj);\r\n        }\r\n      }\r\n    });\r\n    this.handler.canvas.renderAll();\r\n  };\r\n\r\n  /**\r\n   * Paste event on canvas\r\n   *\r\n   * @param {ClipboardEvent} e\r\n   * @returns\r\n   */\r\n  public paste = (e: ClipboardEvent) => {\r\n    if (this.handler.canvas.wrapperEl !== document.activeElement) {\r\n      return false;\r\n    }\r\n    if (e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    if (e.stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n    const clipboardData = e.clipboardData;\r\n    if (clipboardData.types.length) {\r\n      clipboardData.types.forEach((clipboardType: string) => {\r\n        if (clipboardType === \"text/plain\") {\r\n          const textPlain = clipboardData.getData(\"text/plain\");\r\n          try {\r\n            const objects = JSON.parse(textPlain);\r\n            const {\r\n              gridOption: { grid = 10 },\r\n              isCut\r\n            } = this.handler;\r\n            const padding = isCut ? 0 : grid;\r\n            if (objects && Array.isArray(objects)) {\r\n              const filteredObjects = objects.filter(obj => obj !== null);\r\n              if (filteredObjects.length === 1) {\r\n                const obj = filteredObjects[0];\r\n                if (typeof obj.cloneable !== \"undefined\" && !obj.cloneable) {\r\n                  return;\r\n                }\r\n                obj.left = obj.properties.left + padding;\r\n                obj.top = obj.properties.top + padding;\r\n                const createdObj = this.handler.add(obj, false, true, false);\r\n                this.handler.canvas.setActiveObject(createdObj as FabricObject);\r\n                this.handler.canvas.requestRenderAll();\r\n              } else {\r\n                const nodes = [] as any[];\r\n                const targets = [] as any[];\r\n                objects.forEach(obj => {\r\n                  if (!obj) {\r\n                    return;\r\n                  }\r\n                  if (obj.superType === \"link\") {\r\n                    obj.fromNodeId = nodes[obj.fromNodeIndex].id;\r\n                    obj.toNodeId = nodes[obj.toNodeIndex].id;\r\n                  } else {\r\n                    obj.left = obj.properties.left + padding;\r\n                    obj.top = obj.properties.top + padding;\r\n                  }\r\n                  const createdObj = this.handler.add(obj, false, true, false);\r\n                  if (obj.superType === \"node\") {\r\n                    nodes.push(createdObj);\r\n                  } else {\r\n                    targets.push(createdObj);\r\n                  }\r\n                });\r\n                const activeSelection = new fabric.ActiveSelection(\r\n                  nodes.length ? nodes : targets,\r\n                  {\r\n                    canvas: this.handler.canvas,\r\n                    ...this.handler.activeSelection\r\n                  }\r\n                );\r\n                this.handler.canvas.setActiveObject(activeSelection);\r\n                this.handler.canvas.requestRenderAll();\r\n              }\r\n              if (!this.handler.transactionHandler.active) {\r\n                this.handler.transactionHandler.save(\"paste\");\r\n              }\r\n              this.handler.isCut = false;\r\n              this.handler.copy();\r\n            }\r\n          } catch (error) {\r\n            console.error(error);\r\n            // const item = {\r\n            //     id: uuid(),\r\n            //     type: 'textbox',\r\n            //     text: textPlain,\r\n            // };\r\n            // this.handler.add(item, true);\r\n          }\r\n        } else if (clipboardType === \"text/html\") {\r\n          // Todo ...\r\n          // const textHtml = clipboardData.getData('text/html');\r\n          // console.log(textHtml);\r\n        } else if (clipboardType === \"Files\") {\r\n          // Array.from(clipboardData.files).forEach((file) => {\r\n          //     const { type } = file;\r\n          //     if (type === 'image/png' || type === 'image/jpeg' || type === 'image/jpg') {\r\n          //         const item = {\r\n          //             id: uuid(),\r\n          //             type: 'image',\r\n          //             file,\r\n          //             superType: 'image',\r\n          //         };\r\n          //         this.handler.add(item, true);\r\n          //     } else {\r\n          //         console.error('Not supported file type');\r\n          //     }\r\n          // });\r\n        }\r\n      });\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Keydown event on document\r\n   *\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  public keydown = (e: KeyboardEvent) => {\r\n    const { keyEvent, editable } = this.handler;\r\n    if (!Object.keys(keyEvent).length) {\r\n      return;\r\n    }\r\n    const { clipboard } = keyEvent;\r\n    if (this.handler.interactionHandler.isDrawingMode()) {\r\n      if (this.handler.shortcutHandler.isEscape(e)) {\r\n        if (this.handler.interactionMode === \"polygon\") {\r\n          this.handler.drawingHandler.polygon.finish();\r\n        } else if (this.handler.interactionMode === \"line\") {\r\n          this.handler.drawingHandler.line.finish();\r\n        } else if (this.handler.interactionMode === \"arrow\") {\r\n          this.handler.drawingHandler.arrow.finish();\r\n        } else if (this.handler.interactionMode === \"link\") {\r\n          this.handler.linkHandler.finish();\r\n        }\r\n      }\r\n      return;\r\n    }\r\n    if (this.handler.shortcutHandler.isW(e)) {\r\n      this.keyCode = e.keyCode;\r\n      this.handler.interactionHandler.grab();\r\n      return;\r\n    }\r\n    if (e.altKey && editable) {\r\n      this.handler.interactionHandler.grab();\r\n      return;\r\n    }\r\n    if (this.handler.shortcutHandler.isEscape(e)) {\r\n      if (this.handler.interactionMode === \"selection\") {\r\n        this.handler.canvas.discardActiveObject();\r\n        this.handler.canvas.renderAll();\r\n      }\r\n      this.handler.tooltipHandler.hide();\r\n    }\r\n    if (this.handler.canvas.wrapperEl !== document.activeElement) {\r\n      return;\r\n    }\r\n    if (editable) {\r\n      if (this.handler.shortcutHandler.isQ(e)) {\r\n        this.keyCode = e.keyCode;\r\n      } else if (this.handler.shortcutHandler.isDelete(e)) {\r\n        this.handler.remove();\r\n      } else if (this.handler.shortcutHandler.isArrow(e)) {\r\n        this.arrowmoving(e);\r\n      } else if (this.handler.shortcutHandler.isCtrlA(e)) {\r\n        e.preventDefault();\r\n        this.handler.selectAll();\r\n      } else if (this.handler.shortcutHandler.isCtrlC(e)) {\r\n        e.preventDefault();\r\n        this.handler.copy();\r\n      } else if (this.handler.shortcutHandler.isCtrlV(e) && !clipboard) {\r\n        e.preventDefault();\r\n        this.handler.paste();\r\n      } else if (this.handler.shortcutHandler.isCtrlX(e)) {\r\n        e.preventDefault();\r\n        this.handler.cut();\r\n      } else if (this.handler.shortcutHandler.isCtrlZ(e)) {\r\n        e.preventDefault();\r\n        this.handler.transactionHandler.undo();\r\n      } else if (this.handler.shortcutHandler.isCtrlY(e)) {\r\n        e.preventDefault();\r\n        this.handler.transactionHandler.redo();\r\n      } else if (this.handler.shortcutHandler.isPlus(e)) {\r\n        e.preventDefault();\r\n        this.handler.zoomHandler.zoomIn();\r\n      } else if (this.handler.shortcutHandler.isMinus(e)) {\r\n        e.preventDefault();\r\n        this.handler.zoomHandler.zoomOut();\r\n      } else if (this.handler.shortcutHandler.isO(e)) {\r\n        e.preventDefault();\r\n        this.handler.zoomHandler.zoomOneToOne();\r\n      } else if (this.handler.shortcutHandler.isP(e)) {\r\n        e.preventDefault();\r\n        this.handler.zoomHandler.zoomToFit();\r\n      }\r\n      return;\r\n    }\r\n    return;\r\n  };\r\n\r\n  /**\r\n   * Key up event on canvas\r\n   *\r\n   * @param {KeyboardEvent} _e\r\n   */\r\n  public keyup = (e: KeyboardEvent) => {\r\n    if (this.handler.interactionHandler.isDrawingMode()) {\r\n      return;\r\n    }\r\n    if (!this.handler.shortcutHandler.isW(e)) {\r\n      this.handler.interactionHandler.selection();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Context menu event on canvas\r\n   *\r\n   * @param {MouseEvent} e\r\n   */\r\n  public contextmenu = (e: MouseEvent) => {\r\n    e.preventDefault();\r\n    const { editable, onContext } = this.handler;\r\n    if (editable && onContext) {\r\n      const target = this.handler.canvas.findTarget(e, false) as FabricObject;\r\n      if (target && target.type !== \"activeSelection\") {\r\n        this.handler.select(target);\r\n      }\r\n      this.handler.contextmenuHandler.show(e, target);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Mouse down event on canvas\r\n   *\r\n   * @param {MouseEvent} _e\r\n   */\r\n  public onmousedown = (_e: MouseEvent) => {\r\n    this.handler.contextmenuHandler.hide();\r\n  };\r\n}\r\n\r\nexport default EventHandler;\r\n","import { fabric } from \"fabric\";\r\nimport uuid from \"uuid\";\r\n\r\nimport Handler from \"./Handler\";\r\nimport { FabricEvent, FabricObject } from \"../utils\";\r\nimport { Arrow, Line } from \"../objects\";\r\n\r\nclass DrawingHandler {\r\n  handler: Handler;\r\n  constructor(handler: Handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  polygon = {\r\n    init: () => {\r\n      this.handler.interactionHandler.drawing(\"polygon\");\r\n      this.handler.pointArray = [];\r\n      this.handler.lineArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.activeShape = null;\r\n    },\r\n    finish: () => {\r\n      this.handler.pointArray.forEach(point => {\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.lineArray.forEach(line => {\r\n        this.handler.canvas.remove(line);\r\n      });\r\n      this.handler.canvas.remove(this.handler.activeLine);\r\n      this.handler.canvas.remove(this.handler.activeShape);\r\n      this.handler.pointArray = [];\r\n      this.handler.lineArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.activeShape = null;\r\n      this.handler.canvas.renderAll();\r\n      this.handler.interactionHandler.selection();\r\n    },\r\n    addPoint: (opt: FabricEvent) => {\r\n      const { e, absolutePointer } = opt;\r\n      const { x, y } = absolutePointer;\r\n      const circle = new fabric.Circle({\r\n        radius: 3,\r\n        fill: \"#ffffff\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 0.5,\r\n        left: x,\r\n        top: y,\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        hoverCursor: \"pointer\"\r\n      }) as FabricObject<fabric.Circle>;\r\n      circle.set({\r\n        id: uuid()\r\n      });\r\n      if (!this.handler.pointArray.length) {\r\n        circle.set({\r\n          fill: \"red\"\r\n        });\r\n      }\r\n      const points = [x, y, x, y];\r\n      const line = new fabric.Line(points, {\r\n        strokeWidth: 2,\r\n        fill: \"#999999\",\r\n        stroke: \"#999999\",\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        evented: false\r\n      }) as FabricObject<fabric.Line>;\r\n      line.set({\r\n        class: \"line\"\r\n      });\r\n      if (this.handler.activeShape) {\r\n        const position = this.handler.canvas.getPointer(e);\r\n        const activeShapePoints = this.handler.activeShape.get(\r\n          \"points\"\r\n        ) as Array<{ x: number; y: number }>;\r\n        activeShapePoints.push({\r\n          x: position.x,\r\n          y: position.y\r\n        });\r\n        const polygon = new fabric.Polygon(activeShapePoints, {\r\n          stroke: \"#333333\",\r\n          strokeWidth: 1,\r\n          fill: \"#cccccc\",\r\n          opacity: 0.1,\r\n          selectable: false,\r\n          hasBorders: false,\r\n          hasControls: false,\r\n          evented: false\r\n        });\r\n        this.handler.canvas.remove(this.handler.activeShape);\r\n        this.handler.canvas.add(polygon);\r\n        this.handler.activeShape = polygon;\r\n        this.handler.canvas.renderAll();\r\n      } else {\r\n        const polyPoint = [{ x, y }];\r\n        const polygon = new fabric.Polygon(polyPoint, {\r\n          stroke: \"#333333\",\r\n          strokeWidth: 1,\r\n          fill: \"#cccccc\",\r\n          opacity: 0.1,\r\n          selectable: false,\r\n          hasBorders: false,\r\n          hasControls: false,\r\n          evented: false\r\n        });\r\n        this.handler.activeShape = polygon;\r\n        this.handler.canvas.add(polygon);\r\n      }\r\n      this.handler.activeLine = line;\r\n      this.handler.pointArray.push(circle);\r\n      this.handler.lineArray.push(line);\r\n      this.handler.canvas.add(line);\r\n      this.handler.canvas.add(circle);\r\n    },\r\n    generate: (pointArray: FabricObject<fabric.Circle>[]) => {\r\n      const points = [] as any[];\r\n      const id = uuid();\r\n      pointArray.forEach(point => {\r\n        points.push({\r\n          x: point.left,\r\n          y: point.top\r\n        });\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.lineArray.forEach(line => {\r\n        this.handler.canvas.remove(line);\r\n      });\r\n      this.handler.canvas\r\n        .remove(this.handler.activeShape)\r\n        .remove(this.handler.activeLine);\r\n      const option = {\r\n        id,\r\n        points,\r\n        type: \"polygon\",\r\n        stroke: \"rgba(0, 0, 0, 1)\",\r\n        strokeWidth: 3,\r\n        fill: \"rgba(0, 0, 0, 0.25)\",\r\n        opacity: 1,\r\n        objectCaching: !this.handler.editable,\r\n        name: \"New polygon\",\r\n        superType: \"drawing\"\r\n      };\r\n      this.handler.add(option, false);\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.activeShape = null;\r\n      this.handler.interactionHandler.selection();\r\n    }\r\n    // TODO... polygon resize\r\n    // createResize: (target, points) => {\r\n    //     points.forEach((point, index) => {\r\n    //         const { x, y } = point;\r\n    //         const circle = new fabric.Circle({\r\n    //             name: index,\r\n    //             radius: 3,\r\n    //             fill: '#ffffff',\r\n    //             stroke: '#333333',\r\n    //             strokeWidth: 0.5,\r\n    //             left: x,\r\n    //             top: y,\r\n    //             hasBorders: false,\r\n    //             hasControls: false,\r\n    //             originX: 'center',\r\n    //             originY: 'center',\r\n    //             hoverCursor: 'pointer',\r\n    //             parentId: target.id,\r\n    //         });\r\n    //         this.handler.pointArray.push(circle);\r\n    //     });\r\n    //     const group = [target].concat(this.pointArray);\r\n    //     this.handler.canvas.add(new fabric.Group(group, { type: 'polygon', id: uuid() }));\r\n    // },\r\n    // removeResize: () => {\r\n    //     if (this.handler.pointArray) {\r\n    //         this.handler.pointArray.forEach((point) => {\r\n    //             this.handler.canvas.remove(point);\r\n    //         });\r\n    //         this.handler.pointArray = [];\r\n    //     }\r\n    // },\r\n    // movingResize: (target, e) => {\r\n    //     const points = target.diffPoints || target.points;\r\n    //     const diffPoints = [];\r\n    //     points.forEach((point) => {\r\n    //         diffPoints.push({\r\n    //             x: point.x + e.movementX,\r\n    //             y: point.y + e.movementY,\r\n    //         });\r\n    //     });\r\n    //     target.set({\r\n    //         diffPoints,\r\n    //     });\r\n    //     this.handler.canvas.renderAll();\r\n    // },\r\n  };\r\n\r\n  line = {\r\n    init: () => {\r\n      this.handler.interactionHandler.drawing(\"line\");\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n    },\r\n    finish: () => {\r\n      this.handler.pointArray.forEach(point => {\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.canvas.remove(this.handler.activeLine);\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.canvas.renderAll();\r\n      this.handler.interactionHandler.selection();\r\n    },\r\n    addPoint: (opt: FabricEvent) => {\r\n      const { absolutePointer } = opt;\r\n      const { x, y } = absolutePointer;\r\n      const circle = new fabric.Circle({\r\n        radius: 3,\r\n        fill: \"#ffffff\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 0.5,\r\n        left: x,\r\n        top: y,\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        hoverCursor: \"pointer\"\r\n      });\r\n      if (!this.handler.pointArray.length) {\r\n        circle.set({\r\n          fill: \"red\"\r\n        });\r\n      }\r\n      const points = [x, y, x, y];\r\n      this.handler.activeLine = new Line(points, {\r\n        strokeWidth: 2,\r\n        fill: \"#999999\",\r\n        stroke: \"#999999\",\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        evented: false\r\n      });\r\n      this.handler.activeLine.set({\r\n        class: \"line\"\r\n      });\r\n      this.handler.pointArray.push(circle);\r\n      this.handler.canvas.add(this.handler.activeLine);\r\n      this.handler.canvas.add(circle);\r\n    },\r\n    generate: (opt: FabricEvent) => {\r\n      const { absolutePointer } = opt;\r\n      const { x, y } = absolutePointer;\r\n      let points = [] as number[];\r\n      const id = uuid();\r\n      this.handler.pointArray.forEach(point => {\r\n        points = points.concat(point.left, point.top, x, y);\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.canvas.remove(this.handler.activeLine);\r\n      const option = {\r\n        id,\r\n        points,\r\n        type: \"line\",\r\n        stroke: \"rgba(0, 0, 0, 1)\",\r\n        strokeWidth: 3,\r\n        opacity: 1,\r\n        objectCaching: !this.handler.editable,\r\n        name: \"New line\",\r\n        superType: \"drawing\"\r\n      };\r\n      this.handler.add(option, false);\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.interactionHandler.selection();\r\n    }\r\n  };\r\n\r\n  arrow = {\r\n    init: () => {\r\n      this.handler.interactionHandler.drawing(\"arrow\");\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n    },\r\n    finish: () => {\r\n      this.handler.pointArray.forEach(point => {\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.canvas.remove(this.handler.activeLine);\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.canvas.renderAll();\r\n      this.handler.interactionHandler.selection();\r\n    },\r\n    addPoint: (opt: FabricEvent) => {\r\n      const { absolutePointer } = opt;\r\n      const { x, y } = absolutePointer;\r\n      const circle = new fabric.Circle({\r\n        radius: 3,\r\n        fill: \"#ffffff\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 0.5,\r\n        left: x,\r\n        top: y,\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        hoverCursor: \"pointer\"\r\n      });\r\n      if (!this.handler.pointArray.length) {\r\n        circle.set({\r\n          fill: \"red\"\r\n        });\r\n      }\r\n      const points = [x, y, x, y];\r\n      this.handler.activeLine = new Arrow(points, {\r\n        strokeWidth: 2,\r\n        fill: \"#999999\",\r\n        stroke: \"#999999\",\r\n        class: \"line\",\r\n        originX: \"center\",\r\n        originY: \"center\",\r\n        selectable: false,\r\n        hasBorders: false,\r\n        hasControls: false,\r\n        evented: false\r\n      });\r\n      this.handler.pointArray.push(circle);\r\n      this.handler.canvas.add(this.handler.activeLine);\r\n      this.handler.canvas.add(circle);\r\n    },\r\n    generate: (opt: FabricEvent) => {\r\n      const { absolutePointer } = opt;\r\n      const { x, y } = absolutePointer;\r\n      let points = [] as number[];\r\n      this.handler.pointArray.forEach(point => {\r\n        points = points.concat(point.left, point.top, x, y);\r\n        this.handler.canvas.remove(point);\r\n      });\r\n      this.handler.canvas.remove(this.handler.activeLine);\r\n      const option = {\r\n        id: uuid(),\r\n        points,\r\n        type: \"arrow\",\r\n        stroke: \"rgba(0, 0, 0, 1)\",\r\n        strokeWidth: 3,\r\n        opacity: 1,\r\n        objectCaching: !this.handler.editable,\r\n        name: \"New line\",\r\n        superType: \"drawing\"\r\n      };\r\n      this.handler.add(option, false);\r\n      this.handler.pointArray = [];\r\n      this.handler.activeLine = null;\r\n      this.handler.interactionHandler.selection();\r\n    }\r\n  };\r\n\r\n  orthogonal = {};\r\n\r\n  curve = {};\r\n}\r\n\r\nexport default DrawingHandler;\r\n","import Handler from './Handler';\r\nimport { KeyEvent } from '../utils';\r\n\r\n/**\r\n * Shortcut Handler Class\r\n *\r\n * @author salgum1114\r\n * @class ShortcutHandler\r\n */\r\nclass ShortcutHandler {\r\n    handler: Handler;\r\n    keyEvent: KeyEvent;\r\n    constructor(handler: Handler) {\r\n        this.handler = handler;\r\n        this.keyEvent = handler.keyEvent;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Escape\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isEscape = (e: KeyboardEvent) => {\r\n        return e.keyCode === 27 && this.keyEvent.esc;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Q\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isQ = (e: KeyboardEvent) => {\r\n        return e.keyCode === 81;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown W\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isW = (e: KeyboardEvent) => {\r\n        return e.keyCode === 87;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Delete or Backpsace\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isDelete = (e: KeyboardEvent) => {\r\n        return (e.keyCode === 8 || e.keyCode === 46 || e.keyCode === 127) && this.keyEvent.del;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Arrow\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isArrow = (e: KeyboardEvent) => {\r\n        return e.code.includes('Arrow') && this.keyEvent.move;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + A\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlA = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 65 && this.keyEvent.all;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + C\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlC = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 67 && this.keyEvent.copy;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + V\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlV = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 86 && this.keyEvent.paste;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + Z\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlZ = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 90 && this.keyEvent.transaction;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + Y\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlY = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 89 && this.keyEvent.transaction;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Plus Or Equal\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isPlus = (e: KeyboardEvent) => {\r\n        return e.keyCode === 187 && this.keyEvent.zoom;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Minus\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isMinus = (e: KeyboardEvent) => {\r\n        return e.keyCode === 189 && this.keyEvent.zoom;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown O\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isO = (e: KeyboardEvent) => {\r\n        return e.keyCode === 79 && this.keyEvent.zoom;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown P\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isP = (e: KeyboardEvent) => {\r\n        return e.keyCode === 80 && this.keyEvent.zoom;\r\n    }\r\n\r\n    /**\r\n     * Whether keydown Ctrl + X\r\n     *\r\n     * @param {KeyboardEvent} e\r\n     * @returns\r\n     */\r\n    public isCtrlX = (e: KeyboardEvent) => {\r\n        return e.ctrlKey && e.keyCode === 88 && this.keyEvent.cut;\r\n    }\r\n}\r\n\r\nexport default ShortcutHandler;\r\n","import React, { Component } from \"react\";\r\nimport { fabric } from \"fabric\";\r\nimport uuid from \"uuid/v4\";\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\nimport union from \"lodash/union\";\r\n\r\nimport { Handler } from \"./handlers\";\r\nimport { HandlerOptions } from \"./handlers/Handler\";\r\nimport { FabricCanvas } from \"./utils\";\r\n\r\nimport \"../../styles/core/canvas.scss\";\r\nimport \"../../styles/core/tooltip.scss\";\r\nimport \"../../styles/core/contextmenu.scss\";\r\nimport \"../../styles/fabricjs/fabricjs.scss\";\r\n\r\nconst defaultCanvasOption = {\r\n  preserveObjectStacking: true,\r\n  width: 300,\r\n  height: 150,\r\n  selection: true,\r\n  defaultCursor: \"default\",\r\n  backgroundColor: \"#f3f3f3\"\r\n};\r\n\r\nconst defaultKeyboardEvent = {\r\n  move: true,\r\n  all: true,\r\n  copy: true,\r\n  paste: true,\r\n  esc: true,\r\n  del: true,\r\n  clipboard: false,\r\n  transaction: true,\r\n  zoom: true,\r\n  cut: true\r\n};\r\n\r\nconst defaultPropertiesToInclude = [\"id\", \"name\", \"locke\", \"editable\"];\r\n\r\nexport type CanvasProps = HandlerOptions & {\r\n  responsive?: boolean;\r\n  style?: React.CSSProperties;\r\n};\r\n\r\nclass Canvas extends Component<CanvasProps> {\r\n  public handler: Handler;\r\n  public canvas: FabricCanvas;\r\n  public container = React.createRef<HTMLDivElement>();\r\n  private resizeObserver: ResizeObserver;\r\n  static defaultProps: CanvasProps = {\r\n    id: uuid(),\r\n    editable: true,\r\n    canvasOption: {\r\n      selection: true\r\n    },\r\n    defaultOption: {},\r\n    activeSelection: {\r\n      hasControls: true\r\n    },\r\n    tooltip: null,\r\n    zoomEnabled: true,\r\n    minZoom: 30,\r\n    maxZoom: 300,\r\n    propertiesToInclude: defaultPropertiesToInclude,\r\n    workareaOption: {},\r\n    gridOption: {\r\n      enabled: false,\r\n      grid: 10,\r\n      snapToGrid: false\r\n    },\r\n    guidelineOption: {\r\n      enabled: true\r\n    },\r\n    keyEvent: {},\r\n    responsive: true\r\n  };\r\n\r\n  state = {\r\n    id: uuid()\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {\r\n      editable,\r\n      canvasOption,\r\n      width,\r\n      height,\r\n      keyEvent,\r\n      guidelineOption,\r\n      defaultOption,\r\n      responsive,\r\n      propertiesToInclude,\r\n      ...other\r\n    } = this.props;\r\n    const { id } = this.state;\r\n    if (responsive) {\r\n      this.createObserver();\r\n    }\r\n    const mergedPropertiesToInclude = union(\r\n      propertiesToInclude,\r\n      defaultPropertiesToInclude\r\n    );\r\n    const mergedCanvasOption = Object.assign(\r\n      {},\r\n      defaultCanvasOption,\r\n      canvasOption,\r\n      { width, height, selection: editable }\r\n    );\r\n    this.canvas = new fabric.Canvas(`canvas_${id}`, mergedCanvasOption);\r\n    this.canvas.setBackgroundColor(\r\n      mergedCanvasOption.backgroundColor,\r\n      this.canvas.renderAll.bind(this.canvas)\r\n    );\r\n    this.canvas.renderAll();\r\n    this.handler = new Handler({\r\n      id,\r\n      canvas: this.canvas,\r\n      container: this.container.current,\r\n      keyEvent: Object.assign({}, defaultKeyboardEvent, keyEvent),\r\n      canvasOption: mergedCanvasOption,\r\n      guidelineOption,\r\n      editable,\r\n      defaultOption,\r\n      propertiesToInclude: mergedPropertiesToInclude,\r\n      ...other\r\n    });\r\n    this.handler.gridHandler.init();\r\n    if (editable) {\r\n      this.handler.transactionHandler.init();\r\n      this.handler.interactionHandler.selection();\r\n      if (guidelineOption.enabled) {\r\n        this.handler.guidelineHandler.init();\r\n      }\r\n    }\r\n    this.handler.eventHandler.attachEventListener();\r\n  }\r\n\r\n  componentDidUpdate(prevProps: CanvasProps) {\r\n    if (\r\n      JSON.stringify(this.props.canvasOption) !==\r\n      JSON.stringify(prevProps.canvasOption)\r\n    ) {\r\n      this.handler.canvasOption = this.props.canvasOption;\r\n      this.handler.canvas.setBackgroundColor(\r\n        this.props.canvasOption.backgroundColor,\r\n        this.canvas.renderAll.bind(this.handler.canvas)\r\n      );\r\n      const {\r\n        canvasOption: { width: currentWidth, height: currentHeight }\r\n      } = this.props;\r\n      const {\r\n        canvasOption: { width: prevWidth, height: prevHeight }\r\n      } = prevProps;\r\n      if (\r\n        !this.props.responsive &&\r\n        (currentWidth !== prevWidth || currentHeight !== prevHeight)\r\n      ) {\r\n        this.handler.eventHandler.resize(currentWidth, currentHeight);\r\n      }\r\n      if (typeof this.props.canvasOption.selection === \"undefined\") {\r\n        this.canvas.selection = true;\r\n      } else {\r\n        this.canvas.selection = this.props.canvasOption.selection;\r\n      }\r\n    }\r\n    if (\r\n      !this.props.responsive &&\r\n      (this.props.width !== prevProps.width ||\r\n        this.props.height !== prevProps.height)\r\n    ) {\r\n      this.handler.eventHandler.resize(this.props.width, this.props.height);\r\n    }\r\n    if (\r\n      JSON.stringify(this.props.keyEvent) !== JSON.stringify(prevProps.keyEvent)\r\n    ) {\r\n      this.handler.keyEvent = Object.assign(\r\n        {},\r\n        defaultKeyboardEvent,\r\n        this.props.keyEvent\r\n      );\r\n    }\r\n    if (\r\n      JSON.stringify(this.props.fabricObjects) !==\r\n      JSON.stringify(prevProps.fabricObjects)\r\n    ) {\r\n      this.handler.fabricObjects = Object.assign(\r\n        {},\r\n        this.handler.fabricObjects,\r\n        this.props.fabricObjects\r\n      );\r\n    }\r\n    if (\r\n      JSON.stringify(this.props.workareaOption) !==\r\n      JSON.stringify(prevProps.workareaOption)\r\n    ) {\r\n      this.handler.workarea.set({\r\n        ...this.props.workareaOption\r\n      });\r\n    }\r\n    if (\r\n      JSON.stringify(this.props.guidelineOption) !==\r\n      JSON.stringify(prevProps.guidelineOption)\r\n    ) {\r\n      if (this.props.guidelineOption.enabled) {\r\n        this.canvas.on({\r\n          \"before:render\": this.handler.eventHandler.beforeRender,\r\n          \"after:render\": this.handler.eventHandler.afterRender\r\n        });\r\n      } else {\r\n        this.canvas.off({\r\n          \"before:render\": this.handler.eventHandler.beforeRender,\r\n          \"after:render\": this.handler.eventHandler.afterRender\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.handler.eventHandler.detachEventListener();\r\n    this.cancelObserver();\r\n    this.handler.clear(true);\r\n    if (this.handler.tooltipHandler.tooltipEl) {\r\n      document.body.removeChild(this.handler.tooltipHandler.tooltipEl);\r\n    }\r\n    if (this.handler.contextmenuHandler.contextmenuEl) {\r\n      document.body.removeChild(this.handler.contextmenuHandler.contextmenuEl);\r\n    }\r\n  }\r\n\r\n  createObserver = () => {\r\n    this.resizeObserver = new ResizeObserver(\r\n      (entries: ResizeObserverEntry[]) => {\r\n        const { width = 0, height = 0 } =\r\n          (entries[0] && entries[0].contentRect) || {};\r\n        this.handler.eventHandler.resize(width, height);\r\n      }\r\n    );\r\n    this.resizeObserver.observe(this.container.current);\r\n  };\r\n\r\n  cancelObserver = () => {\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { style } = this.props;\r\n    const { id } = this.state;\r\n    return (\r\n      <div\r\n        ref={this.container}\r\n        id={id}\r\n        className=\"rde-canvas\"\r\n        style={{ width: \"100%\", height: \"100%\", ...style }}\r\n      >\r\n        <canvas id={`canvas_${id}`} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport debounce from \"lodash/debounce\";\r\nimport { Button, Modal, Form, Col, Row, Input } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Icon from \"./Icon\";\r\nimport icons from \"../../libs/fontawesome-5.2.0/metadata/icons.json\";\r\n\r\nclass IconChooser extends Component {\r\n  handlers = {\r\n    onOk: () => {\r\n      const { icon } = this.state;\r\n      const { onChange } = this.props;\r\n      if (onChange) {\r\n        onChange(icon);\r\n      }\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onClick: () => {\r\n      this.modalHandlers.onShow();\r\n    },\r\n    onClickIcon: icon => {\r\n      this.setState(\r\n        {\r\n          icon\r\n        },\r\n        () => {\r\n          const { onChange } = this.props;\r\n          if (onChange) {\r\n            onChange(icon);\r\n          }\r\n          this.modalHandlers.onHide();\r\n        }\r\n      );\r\n    },\r\n    onSearch: debounce(value => {\r\n      this.setState({\r\n        textSearch: value\r\n      });\r\n    }, 500)\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    icon: PropTypes.any\r\n  };\r\n\r\n  static defaultProps = {\r\n    icon: { \"map-marker-alt\": icons[\"map-marker-alt\"] }\r\n  };\r\n\r\n  state = {\r\n    icon: this.props.icon,\r\n    textSearch: \"\",\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      icon: nextProps.icon || this.state.icon\r\n    });\r\n  }\r\n\r\n  getPrefix = style => {\r\n    let prefix = \"fas\";\r\n    if (style === \"brands\") {\r\n      prefix = \"fab\";\r\n    } else if (style === \"regular\") {\r\n      prefix = \"far\";\r\n    }\r\n    return prefix;\r\n  };\r\n\r\n  getIcons = textSearch => {\r\n    const lowerCase = textSearch.toLowerCase();\r\n    return Object.keys(icons)\r\n      .filter(\r\n        icon =>\r\n          icon.includes(lowerCase) ||\r\n          icons[icon].search.terms.some(term => term.includes(lowerCase))\r\n      )\r\n      .map(icon => ({ [icon]: icons[icon] }));\r\n  };\r\n\r\n  render() {\r\n    const { onOk, onCancel, onClick, onClickIcon, onSearch } = this.handlers;\r\n    const { icon, visible, textSearch } = this.state;\r\n    const label = (\r\n      <React.Fragment>\r\n        <span style={{ marginRight: 8 }}>{i18n.t(\"common.icon\")}</span>\r\n        <Icon\r\n          name={Object.keys(icon)[0]}\r\n          prefix={this.getPrefix(icon[Object.keys(icon)[0]].styles[0])}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n    const filteredIcons = this.getIcons(textSearch);\r\n    const filteredIconsLength = filteredIcons.length;\r\n    const title = (\r\n      <div style={{ padding: \"0 24px\" }}>\r\n        <Input\r\n          onChange={e => {\r\n            onSearch(e.target.value);\r\n          }}\r\n          placeholder={i18n.t(\"imagemap.marker.search-icon\", {\r\n            length: filteredIconsLength\r\n          })}\r\n        />\r\n      </div>\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={label} colon={false}>\r\n          <Button onClick={onClick}>\r\n            {i18n.t(\"imagemap.marker.choose-icon\")}\r\n          </Button>\r\n        </Form.Item>\r\n        <Modal\r\n          onOk={onOk}\r\n          onCancel={onCancel}\r\n          width=\"80%\"\r\n          visible={visible}\r\n          title={title}\r\n          bodyStyle={{ margin: 16, overflowY: \"auto\", height: \"600px\" }}\r\n        >\r\n          <Row>\r\n            {filteredIcons.map(ic => {\r\n              const name = Object.keys(ic)[0];\r\n              const metadata = ic[name];\r\n              const prefix = this.getPrefix(metadata.styles[0]);\r\n              return (\r\n                <Col\r\n                  onClick={onClickIcon.bind(this, ic)}\r\n                  key={name}\r\n                  span={4}\r\n                  className=\"rde-icon-container\"\r\n                >\r\n                  <div className=\"rde-icon-top\">\r\n                    <Icon name={name} size={3} prefix={prefix} />\r\n                  </div>\r\n                  <div className=\"rde-icon-bottom\">{name}</div>\r\n                </Col>\r\n              );\r\n            })}\r\n          </Row>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default IconChooser;\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\n\r\nimport IconChooser from \"../../icon/IconChooser\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item>\r\n          {getFieldDecorator(\"icon\", {\r\n            initialValue: data.icon\r\n          })(<IconChooser icon={data.icon} />)}\r\n        </Form.Item>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Input, Slider, Switch, Col, InputNumber, Row } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.locked\")} colon={false}>\r\n              {getFieldDecorator(\"locked\", {\r\n                rules: [\r\n                  {\r\n                    type: \"boolean\"\r\n                  }\r\n                ],\r\n                valuePropName: \"checked\",\r\n                initialValue: data.locked\r\n              })(<Switch size=\"small\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.visible\")} colon={false}>\r\n              {getFieldDecorator(\"visible\", {\r\n                rules: [\r\n                  {\r\n                    type: \"boolean\"\r\n                  }\r\n                ],\r\n                valuePropName: \"checked\",\r\n                initialValue: data.visible\r\n              })(<Switch size=\"small\" />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Form.Item label={i18n.t(\"common.name\")} colon={false}>\r\n          {getFieldDecorator(\"name\", {\r\n            initialValue: data.name\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.width\")} colon={false}>\r\n              {getFieldDecorator(\"width\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    required: true,\r\n                    message: \"Please input width\",\r\n                    min: 1\r\n                  }\r\n                ],\r\n                initialValue: parseInt(data.width * data.scaleX, 10)\r\n              })(<InputNumber min={1} />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.height\")} colon={false}>\r\n              {getFieldDecorator(\"height\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    required: true,\r\n                    message: \"Please input height\",\r\n                    min: 1\r\n                  }\r\n                ],\r\n                initialValue: parseInt(data.height * data.scaleY, 10)\r\n              })(<InputNumber min={1} />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.left\")} colon={false}>\r\n              {getFieldDecorator(\"left\", {\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"Please input x position\"\r\n                  }\r\n                ],\r\n                initialValue: data.left\r\n              })(<InputNumber />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label={i18n.t(\"common.top\")} colon={false}>\r\n              {getFieldDecorator(\"top\", {\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"Please input y position\"\r\n                  }\r\n                ],\r\n                initialValue: data.top\r\n              })(<InputNumber />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        {data.superType === \"element\" ? null : (\r\n          <Form.Item label={i18n.t(\"common.angle\")} colon={false}>\r\n            {getFieldDecorator(\"angle\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\",\r\n                  required: true,\r\n                  message: \"Please input rotation\"\r\n                }\r\n              ],\r\n              initialValue: data.angle\r\n            })(<Slider min={0} max={360} />)}\r\n          </Form.Item>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Switch } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Form.Item\r\n        label={i18n.t(\"imagemap.tooltip.tooltip-enabled\")}\r\n        colon={false}\r\n      >\r\n        {getFieldDecorator(\"tooltip.enabled\", {\r\n          rules: [{ type: \"boolean\" }],\r\n          valuePropName: \"checked\",\r\n          initialValue: data.tooltip.enabled\r\n        })(<Switch size=\"small\" />)}\r\n      </Form.Item>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Radio } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport UrlModal from \"../../common/UrlModal\";\r\nimport FileUpload from \"../../common/FileUpload\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const imageLoadType = data.imageLoadType || \"file\";\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item\r\n          label={i18n.t(\"imagemap.image.image-load-type\")}\r\n          colon={false}\r\n        >\r\n          {getFieldDecorator(\"imageLoadType\", {\r\n            initialValue: imageLoadType\r\n          })(\r\n            <Radio.Group size=\"small\">\r\n              <Radio.Button value=\"file\">\r\n                {i18n.t(\"imagemap.image.file-upload\")}\r\n              </Radio.Button>\r\n              <Radio.Button value=\"src\">\r\n                {i18n.t(\"imagemap.image.image-url\")}\r\n              </Radio.Button>\r\n            </Radio.Group>\r\n          )}\r\n        </Form.Item>\r\n        {imageLoadType === \"file\" ? (\r\n          <Form.Item label={i18n.t(\"common.file\")} colon={false}>\r\n            {getFieldDecorator(\"file\", {\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: i18n.t(\"validation.enter-property\", {\r\n                    arg: i18n.t(\"common.file\")\r\n                  })\r\n                }\r\n              ],\r\n              initialValue: data.file\r\n            })(<FileUpload accept=\"image/*\" />)}\r\n          </Form.Item>\r\n        ) : (\r\n          <Form.Item>\r\n            {getFieldDecorator(\"src\", {\r\n              initialValue: data.src\r\n            })(<UrlModal form={form} />)}\r\n          </Form.Item>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","const fonts = {\r\n    default: [\r\n        { name: 'Arial', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Arial Black', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Helvetica', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Verdana', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Trebuchet MS', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Tahoma', type: 'sans-serif', ref: 'default' },\r\n        { name: 'MS Sans Serif', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Symbol', type: 'sans-serif', ref: 'default' },\r\n        { name: 'Times', type: 'serif', ref: 'default' },\r\n        { name: 'Times New Roman', type: 'serif', ref: 'default' },\r\n        { name: 'MS Serif', type: 'serif', ref: 'default' },\r\n        { name: 'New York', type: 'serif', ref: 'default' },\r\n        { name: 'Palatino Linotype', type: 'serif', ref: 'default' },\r\n        { name: 'Book Antiqua', type: 'serif', ref: 'default' },\r\n        { name: 'Georgia', type: 'serif', ref: 'default' },\r\n        { name: 'Courier New', type: 'monospace', ref: 'default' },\r\n        { name: 'Courier', type: 'monospace' },\r\n        { name: 'Comic Sans MS', type: 'cursive', ref: 'default' },\r\n        { name: 'Lucida Console', type: 'cursive', ref: 'default' },\r\n        { name: 'Impact', type: 'fantasy', ref: 'default' },\r\n    ],\r\n    google: [\r\n        { name: 'Abril Fatface', type: 'display', ref: 'google' },\r\n        { name: 'Alegreya Sans', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Alegreya', type: 'serif', ref: 'google' },\r\n        { name: 'Amatic SC', type: 'handwriting', ref: 'google' },\r\n        { name: 'EB Garamond', type: 'serif', ref: 'google' },\r\n        { name: 'Fjalla One', type: 'serif', ref: 'google' },\r\n        { name: 'Josefin Sans', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Lato', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Merriweather', type: 'serif', ref: 'google' },\r\n        { name: 'Montserrat', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Noto Sans', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Open Sans Condensed', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Open Sans', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Oswald', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Playfair Display', type: 'serif', ref: 'google' },\r\n        { name: 'PT Sans Narrow', type: 'sans-serif', ref: 'google' },\r\n        { name: 'PT Sans', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Raleway', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Roboto Mono', type: 'monospace', ref: 'google' },\r\n        { name: 'Roboto Slab', type: 'serif', ref: 'google' },\r\n        { name: 'Roboto', type: 'sans-serif', ref: 'google' },\r\n        { name: 'Source Sans Pro', type: 'serif', ref: 'google' },\r\n    ],\r\n};\r\n\r\nexport default {\r\n    getFonts() {\r\n        return fonts;\r\n    },\r\n};\r\n","import React from \"react\";\r\nimport { Form, Slider, Col, Select, Tag } from \"antd\";\r\nimport sortBy from \"lodash/sortBy\";\r\n\r\nimport Icon from \"../../icon/Icon\";\r\nimport Fonts from \"../../font/fonts\";\r\n\r\nconst fonts = Fonts.getFonts();\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Col span={16}>\r\n          <Form.Item label=\"Font Family\" colon={false}>\r\n            {getFieldDecorator(\"fontFamily\", {\r\n              initialValue: data.fontFamily\r\n            })(\r\n              <Select>\r\n                {Object.keys(fonts).map(font => {\r\n                  return (\r\n                    <Select.OptGroup key={font} label={font.toUpperCase()}>\r\n                      {sortBy(fonts[font], [\"name\"]).map(f => (\r\n                        <Select.Option key={f.name} value={f.name}>\r\n                          {f.name}\r\n                        </Select.Option>\r\n                      ))}\r\n                    </Select.OptGroup>\r\n                  );\r\n                })}\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Form.Item label=\"Font Size\" colon={false}>\r\n            {getFieldDecorator(\"fontSize\", {\r\n              initialValue: data.fontSize || \"32\"\r\n            })(\r\n              <Select>\r\n                {Array.from({ length: 60 }, (v, k) => (\r\n                  <Select.Option key={k} value={`${k + 1}`}>\r\n                    {k + 1}\r\n                  </Select.Option>\r\n                ))}\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"fontWeight\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.fontWeight === \"bold\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"bold\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"fontStyle\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.fontStyle === \"italic\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"italic\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"linethrough\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.linethrough\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"strikethrough\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"underline\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.underline\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"underline\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"textAlign.left\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.textAlign === \"left\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"align-left\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"textAlign.center\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.textAlign === \"center\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"align-center\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"textAlign.right\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.textAlign === \"right\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"align-right\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Form.Item>\r\n            {getFieldDecorator(\"textAlign.justify\", {\r\n              valuePropName: \"checked\",\r\n              initialValue: data.textAlign === \"justify\"\r\n            })(\r\n              <Tag.CheckableTag className=\"rde-action-tag\">\r\n                <Icon name=\"align-justify\" />\r\n              </Tag.CheckableTag>\r\n            )}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item label=\"Line Height\" colon={false}>\r\n            {getFieldDecorator(\"lineHeight\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\"\r\n                }\r\n              ],\r\n              initialValue: data.lineHeight\r\n            })(<Slider min={0} max={100} />)}\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item label=\"Char Spacing\" colon={false}>\r\n            {getFieldDecorator(\"charSpacing\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\"\r\n                }\r\n              ],\r\n              initialValue: data.charSpacing\r\n            })(<Slider min={0} max={100} />)}\r\n          </Form.Item>\r\n        </Col>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Input, Radio, Row, Col, InputNumber } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const layout = data.layout || \"fixed\";\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={i18n.t(\"common.name\")} colon={false}>\r\n          {getFieldDecorator(\"name\", {\r\n            rules: [\r\n              {\r\n                required: false,\r\n                message: i18n.t(\"validation.enter-arg\", {\r\n                  arg: i18n.t(\"common.name\")\r\n                })\r\n              }\r\n            ],\r\n            initialValue: data.name || \"\"\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item label={i18n.t(\"common.layout\")} colon={false}>\r\n          {getFieldDecorator(\"layout\", {\r\n            initialValue: layout\r\n          })(\r\n            <Radio.Group size=\"small\">\r\n              <Radio.Button value=\"fixed\">\r\n                {i18n.t(\"common.fixed\")}\r\n              </Radio.Button>\r\n              <Radio.Button value=\"responsive\">\r\n                {i18n.t(\"common.responsive\")}\r\n              </Radio.Button>\r\n              <Radio.Button value=\"fullscreen\">\r\n                {i18n.t(\"common.fullscreen\")}\r\n              </Radio.Button>\r\n            </Radio.Group>\r\n          )}\r\n        </Form.Item>\r\n        {layout === \"fixed\" ? (\r\n          <React.Fragment>\r\n            <Row>\r\n              <Col span={12}>\r\n                <Form.Item label={i18n.t(\"common.width\")} colon={false}>\r\n                  {getFieldDecorator(\"width\", {\r\n                    rules: [\r\n                      {\r\n                        required: true,\r\n                        message: i18n.t(\"validation.enter-arg\", {\r\n                          arg: i18n.t(\"common.width\")\r\n                        })\r\n                      }\r\n                    ],\r\n                    initialValue: data.width * data.scaleX\r\n                  })(<InputNumber />)}\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={12}>\r\n                <Form.Item label={i18n.t(\"common.height\")} colon={false}>\r\n                  {getFieldDecorator(\"height\", {\r\n                    rules: [\r\n                      {\r\n                        required: true,\r\n                        message: i18n.t(\"validation.enter-arg\", {\r\n                          arg: i18n.t(\"common.height\")\r\n                        })\r\n                      }\r\n                    ],\r\n                    initialValue: data.height * data.scaleY\r\n                  })(<InputNumber />)}\r\n                </Form.Item>\r\n              </Col>\r\n            </Row>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Select, Switch, Input } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={i18n.t(\"imagemap.link.link-enabled\")} colon={false}>\r\n          {getFieldDecorator(\"link.enabled\", {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: i18n.t(\"validation.enter-property\", {\r\n                  arg: i18n.t(\"imagemap.marker.link-enabled\")\r\n                })\r\n              }\r\n            ],\r\n            valuePropName: \"checked\",\r\n            initialValue: data.link.enabled\r\n          })(<Switch size=\"small\" />)}\r\n        </Form.Item>\r\n        {data.link.enabled ? (\r\n          <React.Fragment>\r\n            <Form.Item label={i18n.t(\"common.state\")} colon={false}>\r\n              {getFieldDecorator(\"link.state\", {\r\n                initialValue: data.link.state || \"current\"\r\n              })(\r\n                <Select>\r\n                  <Select.Option value=\"current\">\r\n                    {i18n.t(\"common.current\")}\r\n                  </Select.Option>\r\n                  <Select.Option value=\"new\">\r\n                    {i18n.t(\"common.new\")}\r\n                  </Select.Option>\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item label={i18n.t(\"common.url\")} colon={false}>\r\n              {getFieldDecorator(\"link.url\", {\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: i18n.t(\"validation.enter-property\", {\r\n                      arg: i18n.t(\"common.url\")\r\n                    })\r\n                  }\r\n                ],\r\n                initialValue: data.link.url || \"\"\r\n              })(<Input />)}\r\n            </Form.Item>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Radio, Row, Col, Switch } from \"antd\";\r\nimport UrlModal from \"../../common/UrlModal\";\r\nimport FileUpload from \"../../common/FileUpload\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const videoLoadType = data.videoLoadType || \"file\";\r\n    return (\r\n      <React.Fragment>\r\n        <Row>\r\n          <Col span={8}>\r\n            <Form.Item label=\"Auto Play\" colon={false}>\r\n              {getFieldDecorator(\"autoplay\", {\r\n                rules: [\r\n                  {\r\n                    type: \"boolean\"\r\n                    // required: true,\r\n                    // message: 'Please input rotation',\r\n                  }\r\n                ],\r\n                valuePropName: \"checked\",\r\n                initialValue: data.autoplay\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={8}>\r\n            <Form.Item label=\"Muted\" colon={false}>\r\n              {getFieldDecorator(\"muted\", {\r\n                rules: [\r\n                  {\r\n                    type: \"boolean\"\r\n                    // required: true,\r\n                    // message: 'Please input rotation',\r\n                  }\r\n                ],\r\n                valuePropName: \"checked\",\r\n                initialValue: data.muted\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={8}>\r\n            <Form.Item label=\"Loop\" colon={false}>\r\n              {getFieldDecorator(\"loop\", {\r\n                rules: [\r\n                  {\r\n                    type: \"boolean\"\r\n                    // required: true,\r\n                    // message: 'Please input rotation',\r\n                  }\r\n                ],\r\n                valuePropName: \"checked\",\r\n                initialValue: data.loop\r\n              })(<Switch />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Form.Item label=\"Video Load Type\" colon={false}>\r\n          {getFieldDecorator(\"videoLoadType\", {\r\n            rules: [\r\n              {\r\n                // required: true,\r\n                // message: 'Please select icon',\r\n              }\r\n            ],\r\n            initialValue: videoLoadType\r\n          })(\r\n            <Radio.Group size=\"large\">\r\n              <Radio.Button value=\"file\">File Upload</Radio.Button>\r\n              <Radio.Button value=\"src\">Video URL</Radio.Button>\r\n            </Radio.Group>\r\n          )}\r\n        </Form.Item>\r\n        {videoLoadType === \"file\" ? (\r\n          <Form.Item label=\"File\" colon={false}>\r\n            {getFieldDecorator(\"file\", {\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: \"Please select video\"\r\n                }\r\n              ],\r\n              initialValue: data.file\r\n            })(\r\n              // <FileUpload fileList={data.file ? [data.file] : []} />,\r\n              <FileUpload accept=\"video/*\" />\r\n            )}\r\n          </Form.Item>\r\n        ) : (\r\n          <Form.Item>\r\n            {getFieldDecorator(\"src\", {\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: \"Please select image\"\r\n                }\r\n              ],\r\n              initialValue: data.src\r\n            })(<UrlModal form={form} />)}\r\n          </Form.Item>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass AcePreview extends Component {\r\n  static propTypes = {\r\n    html: PropTypes.string,\r\n    css: PropTypes.string,\r\n    js: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    html: \"\",\r\n    css: \"\",\r\n    js: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { html, css, js } = this.props;\r\n    this.iframeRender(html, css, js);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.container) {\r\n      const { html, css, js } = this.props;\r\n      if (\r\n        html !== prevProps.html ||\r\n        css !== prevProps.css ||\r\n        js !== prevProps.js\r\n      ) {\r\n        this.iframeRender(html, css, js);\r\n      }\r\n    }\r\n  }\r\n\r\n  iframeRender = (html, css, js) => {\r\n    while (this.container.hasChildNodes()) {\r\n      this.container.removeChild(this.container.firstChild);\r\n    }\r\n    const iframe = document.createElement(\"iframe\");\r\n    iframe.width = \"100%\";\r\n    iframe.height = \"200px\";\r\n    this.container.appendChild(iframe);\r\n    const style = document.createElement(\"style\");\r\n    style.type = \"text/css\";\r\n    style.innerHTML = css;\r\n    iframe.contentDocument.head.appendChild(style);\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.innerHTML = js;\r\n    iframe.contentDocument.head.appendChild(script);\r\n    iframe.contentDocument.body.innerHTML = html;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        ref={c => {\r\n          this.container = c;\r\n        }}\r\n        id=\"code-preview\"\r\n        style={{ width: \"100%\", height: 200 }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default AcePreview;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Row, Col } from \"antd\";\r\nimport debounce from \"lodash/debounce\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/javascript\";\r\nimport \"brace/mode/html\";\r\nimport \"brace/mode/css\";\r\nimport \"brace/theme/chrome\";\r\n\r\nimport AcePreview from \"./AcePreview\";\r\n\r\nconst defaultStyle = {\r\n  padding: 12\r\n};\r\n\r\nclass AceEditor extends Component {\r\n  handlers = {\r\n    onChangeHTML: debounce(value => {\r\n      this.setState(\r\n        {\r\n          html: value,\r\n          htmlAnnotations: this.htmlRef.editor.getSession().getAnnotations()\r\n        },\r\n        () => {\r\n          if (this.props.onChangeHTML) {\r\n            this.props.onChangeHTML(value);\r\n          }\r\n        }\r\n      );\r\n    }, 500),\r\n    onChangeCSS: debounce(value => {\r\n      this.setState(\r\n        {\r\n          css: value,\r\n          cssAnnotations: this.cssRef.editor.getSession().getAnnotations()\r\n        },\r\n        () => {\r\n          if (this.props.onChangeCSS) {\r\n            this.props.onChangeCSS(value);\r\n          }\r\n        }\r\n      );\r\n    }, 500),\r\n    onChangeJS: debounce(value => {\r\n      this.setState(\r\n        {\r\n          js: value,\r\n          jsAnnotations: this.jsRef.editor.getSession().getAnnotations()\r\n        },\r\n        () => {\r\n          if (this.props.onChangeJS) {\r\n            this.props.onChangeJS(value);\r\n          }\r\n        }\r\n      );\r\n    }, 500),\r\n    onValidateHTML: annotations => {\r\n      let i = annotations.length;\r\n      const len = annotations.length;\r\n      while (i--) {\r\n        if (/doctype first\\. Expected/.test(annotations[i].text)) {\r\n          annotations.splice(i, 1);\r\n        } else if (\r\n          /Unexpected End of file\\. Expected/.test(annotations[i].text)\r\n        ) {\r\n          annotations.splice(i, 1);\r\n        }\r\n      }\r\n      if (len > annotations.length) {\r\n        this.htmlRef.editor.getSession().setAnnotations(annotations);\r\n      }\r\n    },\r\n    getAnnotations: () => {\r\n      const { htmlAnnotations, cssAnnotations, jsAnnotations } = this.state;\r\n      return {\r\n        htmlAnnotations,\r\n        cssAnnotations,\r\n        jsAnnotations\r\n      };\r\n    },\r\n    getCodes: () => {\r\n      const { html, css, js } = this.state;\r\n      return {\r\n        html,\r\n        css,\r\n        js\r\n      };\r\n    }\r\n  };\r\n\r\n  static propTypes = {\r\n    isHTML: PropTypes.bool,\r\n    isCSS: PropTypes.bool,\r\n    isJS: PropTypes.bool,\r\n    isPreview: PropTypes.bool,\r\n    html: PropTypes.string,\r\n    css: PropTypes.string,\r\n    js: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    isHTML: true,\r\n    isCSS: true,\r\n    isJS: true,\r\n    isPreview: true,\r\n    html: \"\",\r\n    css: \"\",\r\n    js: \"\"\r\n  };\r\n\r\n  state = {\r\n    html: this.props.html,\r\n    css: this.props.css,\r\n    js: this.props.js,\r\n    htmlAnnotations: [],\r\n    cssAnnotations: [],\r\n    jsAnnotations: []\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.htmlRef.editor.destroy();\r\n    this.cssRef.editor.destroy();\r\n    this.jsRef.editor.destroy();\r\n  }\r\n\r\n  render() {\r\n    const { isHTML, isCSS, isJS, isPreview } = this.props;\r\n    const { html, css, js } = this.state;\r\n    return (\r\n      <Row>\r\n        {isHTML ? (\r\n          <Col span={12} style={defaultStyle}>\r\n            <Form.Item label=\"HTML\" colon={false}>\r\n              <ReactAce\r\n                ref={c => {\r\n                  this.htmlRef = c;\r\n                }}\r\n                mode=\"html\"\r\n                theme=\"chrome\"\r\n                width=\"100%\"\r\n                height=\"200px\"\r\n                defaultValue={html}\r\n                value={html}\r\n                editorProps={{\r\n                  $blockScrolling: true\r\n                }}\r\n                onChange={this.handlers.onChangeHTML}\r\n              />\r\n            </Form.Item>\r\n          </Col>\r\n        ) : null}\r\n        {isCSS ? (\r\n          <Col span={12} style={defaultStyle}>\r\n            <Form.Item label=\"CSS\" colon={false}>\r\n              <ReactAce\r\n                ref={c => {\r\n                  this.cssRef = c;\r\n                }}\r\n                mode=\"css\"\r\n                theme=\"chrome\"\r\n                width=\"100%\"\r\n                height=\"200px\"\r\n                defaultValue={css}\r\n                value={css}\r\n                editorProps={{\r\n                  $blockScrolling: true\r\n                }}\r\n                onChange={this.handlers.onChangeCSS}\r\n              />\r\n            </Form.Item>\r\n          </Col>\r\n        ) : null}\r\n        {isJS ? (\r\n          <Col span={12} style={defaultStyle}>\r\n            <Form.Item label=\"JS\" colon={false}>\r\n              <ReactAce\r\n                ref={c => {\r\n                  this.jsRef = c;\r\n                }}\r\n                mode=\"javascript\"\r\n                theme=\"chrome\"\r\n                width=\"100%\"\r\n                height=\"200px\"\r\n                defaultValue={js}\r\n                value={js}\r\n                editorProps={{\r\n                  $blockScrolling: true\r\n                }}\r\n                onChange={this.handlers.onChangeJS}\r\n              />\r\n            </Form.Item>\r\n          </Col>\r\n        ) : null}\r\n        {isPreview ? (\r\n          <Col span={12} style={defaultStyle}>\r\n            <Form.Item label=\"Preview\" colon={false}>\r\n              <AcePreview html={html} css={css} js={js} />\r\n            </Form.Item>\r\n          </Col>\r\n        ) : null}\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AceEditor;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Modal, Button, notification } from \"antd\";\r\nimport Icon from \"../icon/Icon\";\r\nimport AceEditor from \"./AceEditor\";\r\n\r\nnotification.config({\r\n  top: 80,\r\n  duration: 1\r\n});\r\n\r\nclass AceModal extends Component {\r\n  static propTypes = {\r\n    value: PropTypes.any,\r\n    onChange: PropTypes.func,\r\n    form: PropTypes.any\r\n  };\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      const { onChange } = this.props;\r\n      const code = this.aceRef.handlers.getCodes();\r\n      onChange(code);\r\n      this.setState({\r\n        visible: false,\r\n        code\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onClick: () => {\r\n      this.modalHandlers.onShow();\r\n    }\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  state = {\r\n    code: this.props.value || { html: \"\", css: \"\", js: \"\" },\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      code: nextProps.value || { html: \"\", css: \"\", js: \"\" }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { onOk, onCancel, onClick } = this.handlers;\r\n    const { form } = this.props;\r\n    const { getFieldDecorator } = form;\r\n    const {\r\n      code: { html, css, js },\r\n      visible\r\n    } = this.state;\r\n    const label = (\r\n      <React.Fragment>\r\n        <span style={{ marginRight: 8 }}>Code Editor</span>\r\n        <Button onClick={onClick} shape=\"circle\">\r\n          <Icon name=\"code\" />\r\n        </Button>\r\n      </React.Fragment>\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={label} colon={false}>\r\n          {getFieldDecorator(\"code\", {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: \"Please input code\"\r\n              }\r\n            ],\r\n            initialValue: \"\"\r\n          })(<span />)}\r\n        </Form.Item>\r\n        <Form.Item label=\"HTML\" colon={false}>\r\n          {getFieldDecorator(\"html\", {\r\n            initialValue: html || \"\"\r\n          })(\r\n            <pre style={{ wordBreak: \"break-all\", lineHeight: \"1.2em\" }}>\r\n              {html}\r\n            </pre>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item label=\"CSS\" colon={false}>\r\n          {getFieldDecorator(\"css\", {\r\n            initialValue: css || \"\"\r\n          })(\r\n            <pre style={{ wordBreak: \"break-all\", lineHeight: \"1.2em\" }}>\r\n              {css}\r\n            </pre>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item label=\"JS\" colon={false}>\r\n          {getFieldDecorator(\"js\", {\r\n            initialValue: js || \"\"\r\n          })(\r\n            <pre style={{ wordBreak: \"break-all\", lineHeight: \"1.2em\" }}>\r\n              {js}\r\n            </pre>\r\n          )}\r\n        </Form.Item>\r\n        <Modal onCancel={onCancel} onOk={onOk} visible={visible} width=\"80%\">\r\n          <AceEditor\r\n            ref={c => {\r\n              this.aceRef = c;\r\n            }}\r\n            html={html}\r\n            css={css}\r\n            js={js}\r\n          />\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AceModal;\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport AceModal from \"../../ace/AceModal\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator(\"code\", {\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: \"Please input code\"\r\n            }\r\n          ],\r\n          initialValue: data.code\r\n        })(<AceModal form={form} code={data.code} />)}\r\n      </Form.Item>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport UrlModal from \"../../common/UrlModal\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator(\"src\", {\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: \"Please select image\"\r\n            }\r\n          ],\r\n          initialValue: data.src\r\n        })(<UrlModal form={form} />)}\r\n      </Form.Item>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Slider, Switch } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport ColorPicker from \"../../common/ColorPicker\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    const enabeld = data.shadow ? data.shadow.enabled || false : false;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item\r\n          label={i18n.t(\"imagemap.shadow.shadow-enabled\")}\r\n          colon={false}\r\n        >\r\n          {getFieldDecorator(\"shadow.enabled\", {\r\n            valuePropName: \"checked\",\r\n            initialValue: enabeld\r\n          })(<Switch size=\"small\" />)}\r\n        </Form.Item>\r\n        {enabeld ? (\r\n          <React.Fragment>\r\n            <Form.Item label={i18n.t(\"common.color\")} colon={false}>\r\n              {getFieldDecorator(\"shadow.color\", {\r\n                initialValue: data.shadow.color || \"rgba(0, 0, 0, 0)\"\r\n              })(<ColorPicker />)}\r\n            </Form.Item>\r\n            <Form.Item label={i18n.t(\"common.blur\")} colon={false}>\r\n              {getFieldDecorator(\"shadow.blur\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    min: 0,\r\n                    max: 100\r\n                  }\r\n                ],\r\n                initialValue: data.shadow.blur || 15\r\n              })(<Slider min={0} max={100} />)}\r\n            </Form.Item>\r\n            <Form.Item label={i18n.t(\"imagemap.shadow.offset-x\")} colon={false}>\r\n              {getFieldDecorator(\"shadow.offsetX\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    min: 0,\r\n                    max: 100\r\n                  }\r\n                ],\r\n                initialValue: data.shadow.offsetX || 10\r\n              })(<Slider min={0} max={100} />)}\r\n            </Form.Item>\r\n            <Form.Item label={i18n.t(\"imagemap.shadow.offset-y\")} colon={false}>\r\n              {getFieldDecorator(\"shadow.offsetY\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    min: 0,\r\n                    max: 100\r\n                  }\r\n                ],\r\n                initialValue: data.shadow.offsetY || 10\r\n              })(<Slider min={0} max={100} />)}\r\n            </Form.Item>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Table, Modal, Input, Form } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\nimport { FlexBox } from \"../flex\";\r\n\r\nclass EditTable extends Component {\r\n  static propTypes = {\r\n    userProperty: PropTypes.object,\r\n    form: PropTypes.any,\r\n    onChange: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    userProperty: {}\r\n  };\r\n\r\n  state = {\r\n    userProperty: this.props.userProperty,\r\n    tempKey: \"\",\r\n    originKey: \"\",\r\n    tempValue: \"\",\r\n    visible: false,\r\n    current: \"add\",\r\n    validateStatus: \"\",\r\n    help: \"\"\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      userProperty: nextProps.userProperty || {}\r\n    });\r\n  }\r\n\r\n  getDataSource = userProperty => {\r\n    return Object.keys(userProperty).map(key => {\r\n      return {\r\n        key,\r\n        value: userProperty[key]\r\n      };\r\n    });\r\n  };\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      const { onChange } = this.props;\r\n      const {\r\n        tempKey,\r\n        originKey,\r\n        tempValue,\r\n        current,\r\n        validateStatus\r\n      } = this.state;\r\n      if (validateStatus === \"error\") {\r\n        return;\r\n      }\r\n      if (current === \"modify\") {\r\n        delete this.state.userProperty[originKey];\r\n      }\r\n      const userProperty = Object.assign({}, this.state.userProperty, {\r\n        [tempKey]: tempValue\r\n      });\r\n      if (onChange) {\r\n        onChange(userProperty);\r\n      }\r\n      this.setState({\r\n        visible: false,\r\n        userProperty\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onChangeKey: value => {\r\n      let validateStatus = \"success\";\r\n      let help = \"\";\r\n      if (\r\n        (this.state.current === \"add\" &&\r\n          Object.keys(this.state.userProperty).some(p => p === value)) ||\r\n        (this.state.current === \"modify\" &&\r\n          this.state.originKey !== value &&\r\n          this.state.userProperty[value])\r\n      ) {\r\n        validateStatus = \"error\";\r\n        help = i18n.t(\"validation.already-property\", {\r\n          arg: i18n.t(\"common.key\")\r\n        });\r\n      } else if (!value.length) {\r\n        validateStatus = \"error\";\r\n        help = i18n.t(\"validation.enter-property\", {\r\n          arg: i18n.t(\"common.key\")\r\n        });\r\n      } else {\r\n        validateStatus = \"success\";\r\n        help = \"\";\r\n      }\r\n      this.setState({\r\n        tempKey: value,\r\n        validateStatus,\r\n        help\r\n      });\r\n    }\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  handleAdd = () => {\r\n    this.setState({\r\n      visible: true,\r\n      tempKey: \"\",\r\n      tempValue: \"\",\r\n      current: \"add\",\r\n      validateStatus: \"\",\r\n      help: \"\"\r\n    });\r\n  };\r\n\r\n  handleEdit = key => {\r\n    this.setState({\r\n      visible: true,\r\n      tempKey: key,\r\n      originKey: key,\r\n      tempValue: this.state.userProperty[key],\r\n      current: \"modify\",\r\n      validateStatus: \"\",\r\n      help: \"\"\r\n    });\r\n  };\r\n\r\n  handleDelete = key => {\r\n    delete this.state.userProperty[key];\r\n    this.setState({ userProperty: this.state.userProperty });\r\n  };\r\n\r\n  handleClear = () => {\r\n    this.setState({ userProperty: {} });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      userProperty,\r\n      tempKey,\r\n      tempValue,\r\n      visible,\r\n      validateStatus,\r\n      help\r\n    } = this.state;\r\n    const { onOk, onCancel, onChangeKey } = this.handlers;\r\n    const columns = [\r\n      {\r\n        title: i18n.t(\"common.key\"),\r\n        dataIndex: \"key\"\r\n      },\r\n      {\r\n        title: i18n.t(\"common.value\"),\r\n        dataIndex: \"value\"\r\n      },\r\n      {\r\n        title: \"\",\r\n        dataIndex: \"action\",\r\n        render: (text, record) => {\r\n          return (\r\n            <div>\r\n              <Button\r\n                className=\"rde-action-btn\"\r\n                shape=\"circle\"\r\n                onClick={() => {\r\n                  this.handleEdit(record.key);\r\n                }}\r\n              >\r\n                <Icon name=\"edit\" />\r\n              </Button>\r\n              <Button\r\n                className=\"rde-action-btn\"\r\n                shape=\"circle\"\r\n                onClick={() => {\r\n                  this.handleDelete(record.key);\r\n                }}\r\n              >\r\n                <Icon name=\"times\" />\r\n              </Button>\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    ];\r\n    return (\r\n      <FlexBox flexDirection=\"column\">\r\n        <FlexBox justifyContent=\"flex-end\">\r\n          <Button\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            onClick={this.handleAdd}\r\n          >\r\n            <Icon name=\"plus\" />\r\n          </Button>\r\n          <Button\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            onClick={this.handleClear}\r\n          >\r\n            <Icon name=\"times\" />\r\n          </Button>\r\n        </FlexBox>\r\n        <Table\r\n          size=\"small\"\r\n          pagination={{\r\n            pageSize: 5\r\n          }}\r\n          columns={columns}\r\n          dataSource={this.getDataSource(userProperty)}\r\n        />\r\n        <Modal onCancel={onCancel} onOk={onOk} visible={visible}>\r\n          <Form.Item\r\n            required\r\n            label={i18n.t(\"common.key\")}\r\n            colon={false}\r\n            hasFeedback\r\n            validateStatus={validateStatus}\r\n            help={help}\r\n          >\r\n            <Input\r\n              defaultValue={tempKey}\r\n              value={tempKey}\r\n              onChange={e => {\r\n                onChangeKey(e.target.value);\r\n              }}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label={i18n.t(\"common.value\")} colon={false}>\r\n            <Input\r\n              defaultValue={tempValue}\r\n              value={tempValue}\r\n              onChange={e => {\r\n                this.setState({ tempValue: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Modal>\r\n      </FlexBox>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditTable;\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\nimport EditTable from \"../../common/EditTable\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item>\r\n          {getFieldDecorator(\r\n            \"userProperty\",\r\n            {}\r\n          )(<EditTable userProperty={data.userProperty} form={form} />)}\r\n        </Form.Item>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Switch } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport CodeModal from \"../../common/CodeModal\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item\r\n          label={i18n.t(\"imagemap.trigger.trigger-enabled\")}\r\n          colon={false}\r\n        >\r\n          {getFieldDecorator(\"trigger.enabled\", {\r\n            rules: [\r\n              {\r\n                type: \"boolean\"\r\n              }\r\n            ],\r\n            valuePropName: \"checked\",\r\n            initialValue: data.trigger.enabled\r\n          })(<Switch size=\"small\" />)}\r\n        </Form.Item>\r\n        <Form.Item style={{ display: data.trigger.enabled ? \"block\" : \"none\" }}>\r\n          {getFieldDecorator(\"trigger.code\", {\r\n            initialValue: data.trigger.code || \"return null;\"\r\n          })(<CodeModal form={form} />)}\r\n        </Form.Item>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Row, Col, Form, Tag, Slider } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    const { filters } = data;\r\n    return (\r\n      <Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.grayscale\")}>\r\n              {getFieldDecorator(\"filters.grayscale\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[0]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"G\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.invert\")}>\r\n              {getFieldDecorator(\"filters.invert\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[1]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"I\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.sepia\")}>\r\n              {getFieldDecorator(\"filters.sepia\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[3]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"S\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.brownie\")}>\r\n              {getFieldDecorator(\"filters.brownie\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[4]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"B\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.vintage\")}>\r\n              {getFieldDecorator(\"filters.vintage\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[9]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"V\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.blackwhite\")}>\r\n              {getFieldDecorator(\"filters.blackwhite\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[19]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"B\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.technicolor\")}>\r\n              {getFieldDecorator(\"filters.technicolor\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[14]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"T\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.polaroid\")}>\r\n              {getFieldDecorator(\"filters.polaroid\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[15]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"P\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.sharpen\")}>\r\n              {getFieldDecorator(\"filters.sharpen\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[12]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"S\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.emboss\")}>\r\n              {getFieldDecorator(\"filters.emboss\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[13]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"E\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.gamma\")}>\r\n              {getFieldDecorator(\"filters.gamma.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[17]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"G\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"color.red\")}>\r\n              {getFieldDecorator(\"filters.gamma.r\", {\r\n                initialValue: filters[17] ? filters[17].gamma[0] : 1\r\n              })(\r\n                <Slider\r\n                  disabled={!filters[17]}\r\n                  step={0.01}\r\n                  min={0.01}\r\n                  max={2.2}\r\n                />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"color.green\")}>\r\n              {getFieldDecorator(\"filters.gamma.g\", {\r\n                initialValue: filters[17] ? filters[17].gamma[1] : 1\r\n              })(\r\n                <Slider\r\n                  disabled={!filters[17]}\r\n                  step={0.01}\r\n                  min={0.01}\r\n                  max={2.2}\r\n                />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"color.blue\")}>\r\n              {getFieldDecorator(\"filters.gamma.b\", {\r\n                initialValue: filters[17] ? filters[17].gamma[2] : 1\r\n              })(\r\n                <Slider\r\n                  disabled={!filters[17]}\r\n                  step={0.01}\r\n                  min={0.01}\r\n                  max={2.2}\r\n                />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.brightness\")}>\r\n              {getFieldDecorator(\"filters.brightness.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[5]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"B\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.brightness\")}>\r\n              {getFieldDecorator(\"filters.brightness.brightness\", {\r\n                initialValue: filters[5] ? filters[5].brightness : 0.1\r\n              })(\r\n                <Slider disabled={!filters[5]} step={0.01} min={-1} max={1} />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.contrast\")}>\r\n              {getFieldDecorator(\"filters.contrast.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[6]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"C\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.contrast\")}>\r\n              {getFieldDecorator(\"filters.contrast.contrast\", {\r\n                initialValue: filters[6] ? filters[6].contrast : 0\r\n              })(\r\n                <Slider disabled={!filters[6]} step={0.01} min={-1} max={1} />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.saturation\")}>\r\n              {getFieldDecorator(\"filters.saturation.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[7]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"S\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.saturation\")}>\r\n              {getFieldDecorator(\"filters.saturation.saturation\", {\r\n                initialValue: filters[7] ? filters[7].saturation : 0\r\n              })(\r\n                <Slider disabled={!filters[7]} step={0.01} min={-1} max={1} />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.hue\")}>\r\n              {getFieldDecorator(\"filters.hue.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[21]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"H\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.hue\")}>\r\n              {getFieldDecorator(\"filters.hue.rotation\", {\r\n                initialValue: filters[21] ? filters[21].rotation : 0\r\n              })(\r\n                <Slider disabled={!filters[21]} step={0.002} min={-2} max={2} />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.noise\")}>\r\n              {getFieldDecorator(\"filters.noise.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[8]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"N\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.noise\")}>\r\n              {getFieldDecorator(\"filters.noise.noise\", {\r\n                initialValue: filters[8] ? filters[8].noise : 100\r\n              })(<Slider disabled={!filters[8]} step={1} min={0} max={1000} />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.pixelate\")}>\r\n              {getFieldDecorator(\"filters.pixelate.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[10]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"P\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.pixelate\")}>\r\n              {getFieldDecorator(\"filters.pixelate.blocksize\", {\r\n                initialValue: filters[10] ? filters[10].blocksize : 4\r\n              })(<Slider disabled={!filters[10]} step={1} min={2} max={20} />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md={24} lg={6}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.blur\")}>\r\n              {getFieldDecorator(\"filters.blur.enabled\", {\r\n                valuePropName: \"checked\",\r\n                initialValue: !!filters[11]\r\n              })(\r\n                <Tag.CheckableTag className=\"rde-action-tag\">\r\n                  {\"B\"}\r\n                </Tag.CheckableTag>\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col md={24} lg={18}>\r\n            <Form.Item label={i18n.t(\"imagemap.filter.blur\")}>\r\n              {getFieldDecorator(\"filters.blur.value\", {\r\n                initialValue: filters[11] ? filters[11].value : 0.1\r\n              })(\r\n                <Slider disabled={!filters[11]} step={0.01} min={0} max={1} />\r\n              )}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n      </Row>\r\n    );\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Button, Form } from \"antd\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/javascript\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\n\r\nclass CodeModal extends Component {\r\n  static propTypes = {\r\n    value: PropTypes.any,\r\n    onChange: PropTypes.func,\r\n    form: PropTypes.any\r\n  };\r\n\r\n  state = {\r\n    chartOption: this.props.value,\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      chartOption: nextProps.value\r\n    });\r\n  }\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      const { onChange } = this.props;\r\n      const { tempChartOption } = this.state;\r\n      onChange(tempChartOption);\r\n      this.setState({\r\n        visible: false,\r\n        chartOption: tempChartOption\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onClick: () => {\r\n      this.modalHandlers.onShow();\r\n    }\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { onOk, onCancel, onClick } = this.handlers;\r\n    const { form } = this.props;\r\n    const { getFieldDecorator } = form;\r\n    const { visible, chartOption, tempChartOption } = this.state;\r\n    const label = (\r\n      <React.Fragment>\r\n        <span style={{ marginRight: 8 }}>{i18n.t(\"common.code\")}</span>\r\n        <Button onClick={onClick} shape=\"circle\" className=\"rde-action-btn\">\r\n          <Icon name=\"edit\" />\r\n        </Button>\r\n      </React.Fragment>\r\n    );\r\n    const codeLabel = (\r\n      <span>Code (value, styles, animations, userProperty)</span>\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={label} colon={false}>\r\n          {getFieldDecorator(\"chartOption\", {\r\n            initialValue: chartOption\r\n          })(\r\n            <pre style={{ wordBreak: \"break-all\", lineHeight: \"1.2em\" }}>\r\n              {chartOption}\r\n            </pre>\r\n          )}\r\n        </Form.Item>\r\n        <Modal\r\n          onCancel={onCancel}\r\n          onOk={onOk}\r\n          visible={visible}\r\n          style={{ minWidth: 800 }}\r\n        >\r\n          <Form.Item label={codeLabel} colon={false}>\r\n            <ReactAce\r\n              ref={c => {\r\n                this.jsRef = c;\r\n              }}\r\n              mode=\"javascript\"\r\n              theme=\"chrome\"\r\n              width=\"100%\"\r\n              height=\"600px\"\r\n              defaultValue={chartOption}\r\n              value={tempChartOption}\r\n              editorProps={{\r\n                $blockScrolling: true\r\n              }}\r\n              onChange={text => {\r\n                this.setState({ tempChartOption: text });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CodeModal;\r\n","import React from \"react\";\r\nimport { Form } from \"antd\";\r\n\r\nimport ChartModal from \"../../common/ChartModal\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Form.Item>\r\n        {getFieldDecorator(\"chartOption\", {\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: \"Please input code\"\r\n            }\r\n          ],\r\n          initialValue: data.chartOptionStr\r\n        })(<ChartModal form={form} />)}\r\n      </Form.Item>\r\n    );\r\n  }\r\n};\r\n","import MarkerProperty from './MarkerProperty';\r\nimport GeneralProperty from './GeneralProperty';\r\nimport StyleProperty from './StyleProperty';\r\nimport TooltipProperty from './TooltipProperty';\r\nimport ImageProperty from './ImageProperty';\r\nimport TextProperty from './TextProperty';\r\nimport MapProperty from './MapProperty';\r\nimport LinkProperty from './LinkProperty';\r\nimport VideoProperty from './VideoProperty';\r\nimport ElementProperty from './ElementProperty';\r\nimport IframeProperty from './IframeProperty';\r\nimport AnimationProperty from './AnimationProperty';\r\nimport ShadowProperty from './ShadowProperty';\r\nimport UserProperty from './UserProperty';\r\nimport TriggerProperty from './TriggerProperty';\r\nimport ImageFilterProperty from './ImageFilterProperty';\r\nimport ChartProperty from './ChartProperty';\r\n\r\nexport default {\r\n    map: {\r\n        map: {\r\n            title: 'Map',\r\n            component: MapProperty,\r\n        },\r\n        image: {\r\n            title: 'Image',\r\n            component: ImageProperty,\r\n        },\r\n    },\r\n    group: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n    },\r\n    'i-text': {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        marker: {\r\n            title: 'Marker',\r\n            component: MarkerProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    textbox: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        text: {\r\n            title: 'Text',\r\n            component: TextProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    image: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        image: {\r\n            title: 'Image',\r\n            component: ImageProperty,\r\n        },\r\n        filter: {\r\n            title: 'Filter',\r\n            component: ImageFilterProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    triangle: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    rect: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    circle: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    polygon: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    line: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    arrow: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    video: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        video: {\r\n            title: 'Video',\r\n            component: VideoProperty,\r\n        },\r\n    },\r\n    element: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        video: {\r\n            title: 'Element',\r\n            component: ElementProperty,\r\n        },\r\n    },\r\n    iframe: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        video: {\r\n            title: 'Iframe',\r\n            component: IframeProperty,\r\n        },\r\n    },\r\n    svg: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        link: {\r\n            title: 'Link',\r\n            component: LinkProperty,\r\n        },\r\n        tooltip: {\r\n            title: 'Tooltip',\r\n            component: TooltipProperty,\r\n        },\r\n        style: {\r\n            title: 'Style',\r\n            component: StyleProperty,\r\n        },\r\n        shadow: {\r\n            title: 'Shadow',\r\n            component: ShadowProperty,\r\n        },\r\n        animation: {\r\n            title: 'Animation',\r\n            component: AnimationProperty,\r\n        },\r\n        trigger: {\r\n            title: 'Trigger',\r\n            component: TriggerProperty,\r\n        },\r\n        userProperty: {\r\n            title: 'User Property',\r\n            component: UserProperty,\r\n        },\r\n    },\r\n    chart: {\r\n        general: {\r\n            title: 'General',\r\n            component: GeneralProperty,\r\n        },\r\n        chartOption: {\r\n            title: 'Chart Option',\r\n            component: ChartProperty,\r\n        },\r\n    },\r\n};\r\n","/*\r\n* required polyfills\r\n*/\r\nimport \"core-js\";\r\nimport 'core-js/features/set/map';\r\n\r\n/** IE9, IE10 and IE11 requires all of the following polyfills. **/\r\n// import 'core-js/es6/symbol'\r\n// import 'core-js/es6/object'\r\n// import 'core-js/es6/function'\r\n// import 'core-js/es6/parse-int'\r\n// import 'core-js/es6/parse-float'\r\n// import 'core-js/es6/number'\r\n// import 'core-js/es6/math'\r\n// import 'core-js/es6/string'\r\n// import 'core-js/es6/date'\r\n// import 'core-js/es6/array'\r\n// import 'core-js/es6/regexp'\r\n// import 'core-js/es6/map'\r\n// import 'core-js/es6/weak-map'\r\n// import 'core-js/es6/set'\r\n// import 'core-js/es7/object'\r\n\r\n/** IE10 and IE11 requires the following for the Reflect API. */\r\n// import 'core-js/es6/reflect'\r\n\r\n/** Evergreen browsers require these. **/\r\n// Used for reflect-metadata in JIT. If you use AOT (and only Angular decorators), you can remove.\r\n// import 'core-js/es7/reflect'\r\n\r\n// CustomEvent() constructor functionality in IE9, IE10, IE11\r\n(function () {\r\n\r\n  if ( typeof window.CustomEvent === \"function\" ) return false\r\n\r\n  function CustomEvent ( event, params ) {\r\n    params = params || { bubbles: false, cancelable: false, detail: undefined }\r\n    var evt = document.createEvent( 'CustomEvent' )\r\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail )\r\n    return evt\r\n  }\r\n\r\n  CustomEvent.prototype = window.Event.prototype\r\n\r\n  window.CustomEvent = CustomEvent\r\n})()\r\n","import {\r\n  CMN_TOGGLE_SIDER,\r\n  CMD_SET_SIDER_COLLAPSED,\r\n  CMD_SET_HAS_ERR,\r\n  GET_EXTRACT_TEMPLATE,\r\n  SET_ACTIVE_ASIDE_TAB,\r\n  SET_SELECTED_TEMPLATE,\r\n  SET_EDITOR_INSTANCE,\r\n  TOGGLE_ASDIDE_APP,\r\n  SET_MAIN_MENU_ID,\r\n  SET_CANVAS_REF,\r\n  SET_AIMV_CANVAS_REF,\r\n} from \"../actions/type\";\r\n\r\nconst INITIAL_STATE = {\r\n  sider_collapsed: false,\r\n  hasError: false,\r\n  error: \"\",\r\n  extractTemplate: {},\r\n  activeAsideTab: \"1\",\r\n  selectedTemplate: \"1\",\r\n  editorInstance: null,\r\n  mainMenuId: 0,\r\n  canvasRef: null,\r\n  aimvCanvasRef: null,\r\n  asideAppShowed: false,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case CMD_SET_SIDER_COLLAPSED:\r\n      return { ...state, sider_collapsed: action.payload };\r\n    case SET_EDITOR_INSTANCE:\r\n      return { ...state, editorInstance: action.payload };\r\n    case SET_MAIN_MENU_ID:\r\n      return { ...state, mainMenuId: action.payload };\r\n    case SET_CANVAS_REF:\r\n      return { ...state, canvasRef: action.payload };\r\n    case SET_AIMV_CANVAS_REF:\r\n      return { ...state, aimvCanvasRef: action.payload };\r\n    case SET_ACTIVE_ASIDE_TAB:\r\n      return { ...state, activeAsideTab: action.payload };\r\n    case SET_SELECTED_TEMPLATE:\r\n      return { ...state, selectedTemplate: action.payload };\r\n    case GET_EXTRACT_TEMPLATE:\r\n      return { ...state, extractTemplate: action.payload };\r\n    case CMD_SET_HAS_ERR:\r\n      return {\r\n        ...state,\r\n        hasError: action.payload.hasError,\r\n        error: action.payload.err,\r\n      };\r\n    case CMN_TOGGLE_SIDER:\r\n      return { ...state, sider_collapsed: !state.sider_collapsed };\r\n    case TOGGLE_ASDIDE_APP:\r\n      return { ...state, asideAppShowed: !state.asideAppShowed };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { IMG_UPLOAD, LIST_IMG } from \"../actions/type\";\r\n\r\nconst INITIAL_STATE = {\r\n  fileList: []\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case LIST_IMG:\r\n      return {\r\n        ...state,\r\n        fileList: action.payload\r\n      };\r\n    case IMG_UPLOAD:\r\n      return {\r\n        ...state,\r\n        fileList: [\r\n          ...state.fileList,\r\n          {\r\n            uid: action.payload.data,\r\n            name: action.payload.data,\r\n            status: \"done\",\r\n            url: \"http://107.120.70.222:3000/api/images/\" + action.payload.data\r\n          }\r\n        ]\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_CURRENT_IMG,\r\n  EXTRACT_DATA,\r\n  SET_NAME,\r\n  SET_BIRTHDAY,\r\n  SET_NATION,\r\n  SET_NOHOME1,\r\n  SET_STREETHOME1,\r\n  SET_WARDHOME1,\r\n  SET_DISTRICTHOME1,\r\n  SET_CITYHOME1,\r\n  SET_PHONENUMBER,\r\n  SET_LOADING,\r\n  RESET_FORM,\r\n  SET_NLP_FLAG\r\n} from \"../actions/type\";\r\n\r\nconst INITIAL_STATE = {\r\n  currentImg: \"http://107.120.70.222:3000/api/images/163\",\r\n  exData: {},\r\n  name: \"\",\r\n  birthday: \"\",\r\n  nation: \"\",\r\n  nohome1: \"\",\r\n  streethome1: \"\",\r\n  wardhome1: \"\",\r\n  districthome1: \"\",\r\n  cityhome1: \"\",\r\n  phonenumber: \"\",\r\n  loading: false,\r\n  nlpFlag: 1\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      };\r\n    case SET_NLP_FLAG:\r\n      return {\r\n        ...state,\r\n        nlpFlag: action.payload\r\n      };\r\n    case SET_CURRENT_IMG:\r\n      return {\r\n        ...state,\r\n        currentImg: action.payload\r\n      };\r\n    case RESET_FORM:\r\n      return {\r\n        ...state,\r\n        exData: {},\r\n        name: \"\",\r\n        birthday: \"\",\r\n        nation: \"\",\r\n        nohome1: \"\",\r\n        streethome1: \"\",\r\n        wardhome1: \"\",\r\n        districthome1: \"\",\r\n        cityhome1: \"\",\r\n        phonenumber: \"\",\r\n        loading: false\r\n      };\r\n    case EXTRACT_DATA:\r\n      return {\r\n        ...state,\r\n        exData: action.payload,\r\n        name: action.payload.NAME,\r\n        birthday: action.payload.BIRTHDAY,\r\n        nation: action.payload.NATION,\r\n        nohome1: action.payload.NOHOME1,\r\n        streethome1: action.payload.STREETHOME1,\r\n        wardhome1: action.payload.WARDHOME1,\r\n        districthome1: action.payload.DISTRICTHOME1,\r\n        cityhome1: action.payload.CITYHOME1,\r\n        phonenumber: action.payload.PHONENUMBER,\r\n        loading: false\r\n      };\r\n    case SET_NAME:\r\n      return {\r\n        ...state,\r\n        name: action.payload\r\n      };\r\n    case SET_BIRTHDAY:\r\n      return {\r\n        ...state,\r\n        birthday: action.payload\r\n      };\r\n    case SET_NATION:\r\n      return {\r\n        ...state,\r\n        nation: action.payload\r\n      };\r\n    case SET_NOHOME1:\r\n      return {\r\n        ...state,\r\n        nohome1: action.payload\r\n      };\r\n    case SET_STREETHOME1:\r\n      return {\r\n        ...state,\r\n        streethome1: action.payload\r\n      };\r\n    case SET_WARDHOME1:\r\n      return {\r\n        ...state,\r\n        wardhome1: action.payload\r\n      };\r\n    case SET_DISTRICTHOME1:\r\n      return {\r\n        ...state,\r\n        districthome1: action.payload\r\n      };\r\n    case SET_CITYHOME1:\r\n      return {\r\n        ...state,\r\n        cityhome1: action.payload\r\n      };\r\n    case SET_PHONENUMBER:\r\n      return {\r\n        ...state,\r\n        phonenumber: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  LOAD_TEMPLTE_TREE,\r\n  SET_SELECTED,\r\n  SET_EXPANDED,\r\n  SET_TEMPLATE_MODAL_VISIBLE,\r\n  APPEND_EXPANDED,\r\n  SET_MODAL_ACTION,\r\n  SET_UPDATING\r\n} from \"../actions/type\";\r\n\r\nconst INITIAL_STATE = {\r\n  treeData: [],\r\n  selected: \"5e7ae2a64017b62da83f836c\",\r\n  expanded: [\"5e7adf9b15eaef2c5f9c28f5\", \"5e7ae2a64017b62da83f836c\"],\r\n  isTemplate: true,\r\n  tmlVisible: false,\r\n  modalAction: \"\",\r\n  selectedLabel: \"\",\r\n  selectedTemplateId: \"\",\r\n  loading: false\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case LOAD_TEMPLTE_TREE:\r\n      return { ...state, treeData: action.payload };\r\n    case APPEND_EXPANDED:\r\n      return { ...state, expanded: [...state.expanded, action.payload] };\r\n    case SET_EXPANDED:\r\n      return { ...state, expanded: action.payload };\r\n    case SET_TEMPLATE_MODAL_VISIBLE:\r\n      return { ...state, tmlVisible: action.payload };\r\n    case SET_MODAL_ACTION:\r\n      return { ...state, modalAction: action.payload };\r\n    case SET_UPDATING:\r\n      return { ...state, loading: action.payload };\r\n    case SET_SELECTED:\r\n      return {\r\n        ...state,\r\n        selected: action.payload.selected,\r\n        isTemplate: action.payload.istemplate,\r\n        selectedLabel: action.payload.label,\r\n        selectedTemplateId: action.payload.templateId\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport authReducer from \"./authReducer\";\r\nimport commonReducer from \"./commonReducer\";\r\nimport imgUploadReducer from \"./imgUploadReducer\";\r\nimport dataExtractReducer from \"./dataExtractReducer\";\r\nimport tplTreeReducer from \"./tplTreeReducer\";\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  common: commonReducer,\r\n  form: formReducer,\r\n  imgUpload: imgUploadReducer,\r\n  dataExtract: dataExtractReducer,\r\n  tplTree: tplTreeReducer\r\n});\r\n","import { FETCH_USER } from \"../actions/type\";\r\n\r\nexport default function(state = {}, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER:\r\n      return action.payload || false;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import i18n from \"i18next\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport { translation, translationKo } from \"../locales\";\r\n\r\n/**\r\n * Client Side Load\r\n */\r\nconst i18nClient = i18n\r\n  // .use(XHR)\r\n  .use(LanguageDetector)\r\n  .init({\r\n    load: \"all\",\r\n    whitelist: [\"en\", \"en-US\", \"ko\", \"ko-KR\"],\r\n    nonExplicitWhitelist: false,\r\n    lngs: [\"en-US\", \"ko-KR\"],\r\n    fallbackLng: \"en-US\",\r\n    interpolation: {\r\n      escapeValue: false // not needed for react!!\r\n    },\r\n    react: {\r\n      wait: true, // set to true if you like to wait for loaded in every translated hoc\r\n      nsMode: \"default\" // set it to fallback to let passed namespaces to translated hoc act as fallbacks\r\n    },\r\n    defaultNS: \"locale.constant\",\r\n    resources: {\r\n      en: {\r\n        \"locale.constant\": translation\r\n      },\r\n      \"en-US\": {\r\n        \"locale.constant\": translation\r\n      },\r\n      ko: {\r\n        \"locale.constant\": translationKo\r\n      },\r\n      \"ko-KR\": {\r\n        \"locale.constant\": translationKo\r\n      }\r\n    }\r\n  });\r\n\r\nexport default i18nClient;\r\n","import React, { Component } from \"react\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport ImageMapEditor from \"./views/EditorLib/components/imagemap/ImageMapEditor\";\r\n// import { renderRoutes } from 'react-router-config';\r\nimport \"./App.scss\";\r\n\r\nconst loading = () => (\r\n  <div className=\"animated fadeIn pt-3 text-center\">Loading...</div>\r\n);\r\n\r\n// Containers\r\nconst DefaultLayout = React.lazy(() =>\r\n  import(\"./views/Containers/DefaultLayout/DefaultLayout\")\r\n);\r\n\r\n// Pages\r\nconst Login = React.lazy(() => import(\"./views/CommonPages/Login\"));\r\nconst Register = React.lazy(() => import(\"./views/CommonPages/Register\"));\r\nconst Page404 = React.lazy(() => import(\"./views/CommonPages/Page404\"));\r\nconst Page500 = React.lazy(() => import(\"./views/CommonPages/Page500\"));\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <HashRouter>\r\n        <React.Suspense fallback={loading()}>\r\n          <Switch>\r\n            <Route\r\n              path=\"/template\"\r\n              name=\"Editor\"\r\n              render={props => (\r\n                <div className=\"rde-main\">\r\n                  <div className=\"rde-content\">\r\n                    <ImageMapEditor {...props} />\r\n                  </div>\r\n                </div>\r\n              )}\r\n            />\r\n            <Route\r\n              exact\r\n              path=\"/login\"\r\n              name=\"Login Page\"\r\n              render={props => <Login {...props} />}\r\n            />\r\n            <Route\r\n              exact\r\n              path=\"/register\"\r\n              name=\"Register Page\"\r\n              render={props => <Register {...props} />}\r\n            />\r\n            <Route\r\n              exact\r\n              path=\"/404\"\r\n              name=\"Page 404\"\r\n              render={props => <Page404 {...props} />}\r\n            />\r\n            <Route\r\n              exact\r\n              path=\"/500\"\r\n              name=\"Page 500\"\r\n              render={props => <Page500 {...props} />}\r\n            />\r\n            <Route\r\n              path=\"/\"\r\n              name=\"Home\"\r\n              render={props => <DefaultLayout {...props} />}\r\n            />\r\n          </Switch>\r\n        </React.Suspense>\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import \"react-app-polyfill/ie9\"; // For IE 9-11 support\r\nimport \"react-app-polyfill/stable\";\r\n// import 'react-app-polyfill/ie11'; // For IE 11 support\r\nimport \"./polyfill\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport reduxThunk from \"redux-thunk\";\r\nimport reducers from \"./reducers\";\r\nimport { LocaleProvider } from \"antd\";\r\nimport enUS from \"antd/lib/locale-provider/en_US\";\r\nimport { i18nClient } from \"./views/EditorLib/i18n\";\r\n\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nconst store = createStore(\r\n  reducers,\r\n  {},\r\n  composeWithDevTools(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <LocaleProvider locale={enUS}>\r\n      <App />\r\n    </LocaleProvider>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Upload, Icon } from \"antd\";\r\n\r\nconst { Dragger } = Upload;\r\n\r\nclass FileUpload extends Component {\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    limit: PropTypes.number,\r\n    accept: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    limit: 5\r\n  };\r\n\r\n  state = {\r\n    fileList: this.props.value ? [this.props.value] : []\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      fileList: nextProps.value ? [nextProps.value] : []\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { accept, limit } = this.props;\r\n    const { fileList } = this.state;\r\n    const props = {\r\n      accept,\r\n      name: \"file\",\r\n      multiple: false,\r\n      onChange: info => {\r\n        const isLimit = info.file.size / 1024 / 1024 < limit;\r\n        if (!isLimit) {\r\n          // message.error(`Limited to ${limit}MB or less`);\r\n          return false;\r\n        }\r\n        const { onChange } = this.props;\r\n        onChange(info.file);\r\n      },\r\n      onRemove: file => {\r\n        this.setState(\r\n          ({ fileList }) => {\r\n            const index = fileList.indexOf(file);\r\n            const newFileList = fileList.slice();\r\n            newFileList.splice(index, 1);\r\n            return {\r\n              fileList: newFileList\r\n            };\r\n          },\r\n          () => {\r\n            const { onChange } = this.props;\r\n            onChange(null);\r\n          }\r\n        );\r\n      },\r\n      beforeUpload: file => {\r\n        const isLimit = file.size / 1024 / 1024 < limit;\r\n        if (!isLimit) {\r\n          return false;\r\n        }\r\n        this.setState({\r\n          fileList: [file]\r\n        });\r\n        return false;\r\n      },\r\n      fileList\r\n    };\r\n    return (\r\n      <Dragger {...props}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <Icon type=\"inbox\" />\r\n        </p>\r\n        <p className=\"ant-upload-text\">\r\n          Click or drag file to this area to upload\r\n        </p>\r\n        <p className=\"ant-upload-hint\">{`Support for a single upload. Limited to ${limit}MB or less`}</p>\r\n      </Dragger>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUpload;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Modal, Button, Input } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\n\r\nclass UrlModal extends Component {\r\n  handlers = {\r\n    onOk: () => {\r\n      const { onChange } = this.props;\r\n      const { tempUrl } = this.state;\r\n      onChange(tempUrl);\r\n      this.setState({\r\n        visible: false,\r\n        url: tempUrl\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onClick: () => {\r\n      this.modalHandlers.onShow();\r\n    }\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  static propTypes = {\r\n    value: PropTypes.any,\r\n    onChange: PropTypes.func,\r\n    form: PropTypes.any\r\n  };\r\n\r\n  state = {\r\n    url: this.props.value || \"\",\r\n    tempUrl: \"\",\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      url: nextProps.value || \"\"\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { onOk, onCancel, onClick } = this.handlers;\r\n    const { form } = this.props;\r\n    const { getFieldDecorator } = form;\r\n    const { url, visible } = this.state;\r\n    const label = (\r\n      <React.Fragment>\r\n        <span style={{ marginRight: 8 }}>{i18n.t(\"common.url\")}</span>\r\n        <Button onClick={onClick} shape=\"circle\" className=\"rde-action-btn\">\r\n          <Icon name=\"edit\" />\r\n        </Button>\r\n      </React.Fragment>\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={label} colon={false}>\r\n          {getFieldDecorator(\"url\", {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: i18n.t(\"validation.enter-property\", {\r\n                  arg: i18n.t(\"common.url\")\r\n                })\r\n              }\r\n            ],\r\n            initialValue: url || \"\"\r\n          })(<span style={{ wordBreak: \"break-all\" }}>{url}</span>)}\r\n        </Form.Item>\r\n        <Modal onCancel={onCancel} onOk={onOk} visible={visible}>\r\n          <Form.Item label={i18n.t(\"common.url\")} colon={false}>\r\n            <Input\r\n              defaultValue={url}\r\n              onChange={e => {\r\n                this.setState({ tempUrl: e.target.value });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UrlModal;\r\n","//common actions\r\nexport const CMN_TOGGLE_SIDER = \"cmn_toggle_sider\";\r\nexport const CMD_SET_SIDER_COLLAPSED = \"cmn_set_sider_collapsed\";\r\nexport const CMD_SET_HAS_ERR = \"cmn_set_has_error\";\r\nexport const FETCH_USER = \"fetch_user\";\r\nexport const GET_EXTRACT_TEMPLATE = \"get_extract_template\";\r\nexport const SET_ACTIVE_ASIDE_TAB = \"set_active_aside_tab\";\r\nexport const SET_SELECTED_TEMPLATE = \"set_selected_template\";\r\nexport const SET_EDITOR_INSTANCE = \"set_editor_instance\";\r\nexport const TOGGLE_ASDIDE_APP = \"toggle_aside_app\";\r\nexport const SET_MAIN_MENU_ID = \"set_main_menu_id\";\r\nexport const SET_CANVAS_REF = \"set_canvas_ref\";\r\nexport const SET_AIMV_CANVAS_REF = \"set_aimv_canvas_ref\";\r\n\r\n//Images upload\r\n\r\nexport const IMG_UPLOAD = \"img_upload\";\r\nexport const LIST_IMG = \"list_img\";\r\nexport const DEL_IMG = \"del_img\";\r\n\r\n//Extract data\r\n\r\nexport const EXTRACT_DATA = \"extract_data\";\r\nexport const SET_CURRENT_IMG = \"set_current_img\";\r\nexport const SET_NAME = \"set_name\";\r\nexport const SET_BIRTHDAY = \"set_birthday\";\r\nexport const SET_NATION = \"set_nation\";\r\nexport const SET_NOHOME1 = \"set_nohome1\";\r\nexport const SET_STREETHOME1 = \"set_streethome1\";\r\nexport const SET_WARDHOME1 = \"set_wardhome1\";\r\nexport const SET_DISTRICTHOME1 = \"set_districthome1\";\r\nexport const SET_CITYHOME1 = \"set_cityhome1\";\r\nexport const SET_PHONENUMBER = \"set_phonenumber\";\r\nexport const SET_LOADING = \"set_loading\";\r\nexport const RESET_FORM = \"reset_form\";\r\nexport const SET_NLP_FLAG = \"set_nlp_flag\";\r\n\r\n//Template Tree\r\n\r\nexport const LOAD_TEMPLTE_TREE = \"load_template_tree\";\r\nexport const SET_EXPANDED = \"set_expanded\";\r\nexport const SET_SELECTED = \"set_selected\";\r\nexport const SET_TEMPLATE_MODAL_VISIBLE = \"set_template_modal_visible\";\r\nexport const SET_MODAL_ACTION = \"set_modal_action\";\r\nexport const ADD_NEW_TEMPLATE = \"add_new_template\";\r\nexport const ADD_NEW_FOLDER = \"add_new_folder\";\r\nexport const RENAME_TEMPLATE_FOLDER = \"rename_template_folder\";\r\nexport const REMOVE_TEMPLATE_FOLDER = \"remove_template_folder\";\r\nexport const APPEND_EXPANDED = \"append_expanded\";\r\nexport const SET_UPDATING = \"set_updating\";\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Icon extends Component {\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    color: PropTypes.string,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    size: PropTypes.number,\r\n    innerIcon: PropTypes.string,\r\n    innerColor: PropTypes.string,\r\n    innerClassName: PropTypes.string,\r\n    innerSize: PropTypes.number,\r\n    prefix: PropTypes.string,\r\n    onClick: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    name: null,\r\n    color: \"\",\r\n    className: \"\",\r\n    size: 1,\r\n    innerIcon: null,\r\n    innerColor: \"\",\r\n    innerClassName: \"\",\r\n    innerSize: 1,\r\n    prefix: \"fas\"\r\n  };\r\n\r\n  getIconHtml = (prefix, name, className, size, color) => {\r\n    const iconClassName = `${prefix} fa-${name} ${className}`;\r\n    const iconStyle = Object.assign({}, this.props.style, {\r\n      fontSize: `${size}em`,\r\n      color\r\n    });\r\n    return (\r\n      <i\r\n        className={iconClassName}\r\n        style={iconStyle}\r\n        onClick={this.props.onClick}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      color,\r\n      size,\r\n      className,\r\n      innerIcon,\r\n      innerColor,\r\n      innerSize,\r\n      innerClassName,\r\n      prefix\r\n    } = this.props;\r\n    let { name } = this.props;\r\n    if (name.startsWith(\"icon-\")) {\r\n      name = name.substr(\"icon-\".length);\r\n    }\r\n    const iconHtml = this.getIconHtml(prefix, name, className, size, color);\r\n    let innerIconHtml = null;\r\n    if (innerIcon) {\r\n      innerIconHtml = this.getIconHtml(\r\n        innerIcon,\r\n        innerClassName,\r\n        innerSize,\r\n        innerColor\r\n      );\r\n    } else {\r\n      return iconHtml;\r\n    }\r\n    return (\r\n      <span className=\"fa-stack\">\r\n        {iconHtml}\r\n        {innerIconHtml}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Icon;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Layout, Spin } from \"antd\";\r\n\r\nclass Container extends Component {\r\n  static propTypes = {\r\n    title: PropTypes.any,\r\n    leftSider: PropTypes.any,\r\n    content: PropTypes.any,\r\n    rightSider: PropTypes.any,\r\n    className: PropTypes.string,\r\n    loading: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    className: \"rde-content-layout-main\",\r\n    loading: false\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      title,\r\n      leftSider,\r\n      content,\r\n      rightSider,\r\n      className,\r\n      loading\r\n    } = this.props;\r\n    return (\r\n      <Spin spinning={loading}>\r\n        <Layout className=\"rde-content-layout\">\r\n          {title}\r\n          <Layout\r\n            style={{\r\n              overflowY: \"auto\",\r\n              overflowX: \"hidden\",\r\n              minHeight: \"calc(100vh - 240px)\",\r\n              height: \"calc(100vh - 240px)\"\r\n            }}\r\n            className={className}\r\n          >\r\n            {leftSider}\r\n            {content}\r\n            {rightSider}\r\n          </Layout>\r\n        </Layout>\r\n      </Spin>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container;\r\n","/* eslint-disable react/no-unused-prop-types */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst FlexBox = props => {\r\n  const { element: Element, className, style, children } = props;\r\n  const classProps = {};\r\n\r\n  if (className) {\r\n    classProps.className = className;\r\n  }\r\n  return (\r\n    <Element {...classProps} style={{ ...props, ...style }}>\r\n      {children}\r\n    </Element>\r\n  );\r\n};\r\n\r\nFlexBox.propTypes = {\r\n  element: PropTypes.oneOf([\r\n    \"article\",\r\n    \"aside\",\r\n    \"div\",\r\n    \"figure\",\r\n    \"footer\",\r\n    \"header\",\r\n    \"main\",\r\n    \"nav\",\r\n    \"section\"\r\n  ]),\r\n  style: PropTypes.object,\r\n  className: PropTypes.string,\r\n  display: PropTypes.oneOf([\"flex\", \"inline-flex\"]),\r\n  flexDirection: PropTypes.oneOf([\r\n    \"column-reverse\",\r\n    \"column\",\r\n    \"row-reverse\",\r\n    \"row\"\r\n  ]),\r\n  flexWrap: PropTypes.oneOf([\"nowrap\", \"wrap-reverse\", \"wrap\"]),\r\n  flexFlow: PropTypes.string,\r\n  justifyContent: PropTypes.oneOf([\r\n    \"center\",\r\n    \"flex-end\",\r\n    \"flex-start\",\r\n    \"space-around\",\r\n    \"space-between\",\r\n    \"space-evenly\"\r\n  ]),\r\n  alignItems: PropTypes.oneOf([\r\n    \"baseline\",\r\n    \"center\",\r\n    \"flex-end\",\r\n    \"flex-start\",\r\n    \"stretch\"\r\n  ]),\r\n  alignContent: PropTypes.oneOf([\r\n    \"center\",\r\n    \"flex-end\",\r\n    \"flex-start\",\r\n    \"space-around\",\r\n    \"space-between\",\r\n    \"stretch\"\r\n  ]),\r\n  order: PropTypes.number,\r\n  flexGrow: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flexShrink: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flexBasis: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flex: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  alignSelf: PropTypes.oneOf([\r\n    \"baseline\",\r\n    \"center\",\r\n    \"flex-end\",\r\n    \"flex-start\",\r\n    \"stretch\"\r\n  ])\r\n};\r\n\r\nFlexBox.defaultProps = {\r\n  element: \"div\",\r\n  display: \"flex\",\r\n  style: {},\r\n  className: \"\"\r\n};\r\n\r\nexport default FlexBox;\r\n","/* eslint-disable react/no-unused-prop-types */\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst FlexItem = props => {\r\n  const { element: Element, className, style, children, onClick } = props;\r\n  const classProps = {};\r\n\r\n  if (className) {\r\n    classProps.className = className;\r\n  }\r\n  return (\r\n    <Element {...classProps} onClick={onClick} style={{ ...props, ...style }}>\r\n      {children}\r\n    </Element>\r\n  );\r\n};\r\n\r\nFlexItem.propTypes = {\r\n  element: PropTypes.oneOf([\r\n    \"article\",\r\n    \"aside\",\r\n    \"div\",\r\n    \"figure\",\r\n    \"footer\",\r\n    \"header\",\r\n    \"main\",\r\n    \"nav\",\r\n    \"section\"\r\n  ]),\r\n  style: PropTypes.object,\r\n  className: PropTypes.string,\r\n  order: PropTypes.number,\r\n  flexGrow: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flexShrink: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flexBasis: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  flex: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n  alignSelf: PropTypes.oneOf([\r\n    \"baseline\",\r\n    \"center\",\r\n    \"flex-end\",\r\n    \"flex-start\",\r\n    \"stretch\"\r\n  ])\r\n};\r\n\r\nFlexItem.defaultProps = {\r\n  element: \"div\",\r\n  style: {},\r\n  className: \"\"\r\n};\r\n\r\nexport default FlexItem;\r\n","import FlexBox from './FlexBox';\r\nimport FlexItem from './FlexItem';\r\n\r\nexport {\r\n    FlexBox,\r\n    FlexItem,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Button, Form } from \"antd\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/javascript\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\n\r\nclass CodeModal extends Component {\r\n  handlers = {\r\n    onOk: () => {\r\n      const { onChange } = this.props;\r\n      const { tempCode } = this.state;\r\n      onChange(tempCode);\r\n      this.setState({\r\n        visible: false,\r\n        code: tempCode\r\n      });\r\n    },\r\n    onCancel: () => {\r\n      this.modalHandlers.onHide();\r\n    },\r\n    onClick: () => {\r\n      this.modalHandlers.onShow();\r\n    }\r\n  };\r\n\r\n  modalHandlers = {\r\n    onShow: () => {\r\n      this.setState({\r\n        visible: true\r\n      });\r\n    },\r\n    onHide: () => {\r\n      this.setState({\r\n        visible: false\r\n      });\r\n    }\r\n  };\r\n\r\n  static propTypes = {\r\n    value: PropTypes.any,\r\n    onChange: PropTypes.func,\r\n    form: PropTypes.any\r\n  };\r\n\r\n  state = {\r\n    code: this.props.value,\r\n    tempCode: this.props.value,\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      code: nextProps.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { onOk, onCancel, onClick } = this.handlers;\r\n    const { form } = this.props;\r\n    const { getFieldDecorator } = form;\r\n    const { code, visible, tempCode } = this.state;\r\n    const label = (\r\n      <React.Fragment>\r\n        <span style={{ marginRight: 8 }}>{i18n.t(\"common.code\")}</span>\r\n        <Button onClick={onClick} shape=\"circle\" className=\"rde-action-btn\">\r\n          <Icon name=\"edit\" />\r\n        </Button>\r\n      </React.Fragment>\r\n    );\r\n    const codeLabel = (\r\n      <span>Code (value, styles, animations, userProperty)</span>\r\n    );\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label={label} colon={false}>\r\n          {getFieldDecorator(\"trigger.code\", {\r\n            initialValue: code || this.props.value\r\n          })(\r\n            <pre style={{ wordBreak: \"break-all\", lineHeight: \"1.2em\" }}>\r\n              {code}\r\n            </pre>\r\n          )}\r\n        </Form.Item>\r\n        <Modal onCancel={onCancel} onOk={onOk} visible={visible}>\r\n          <Form.Item label={codeLabel} colon={false}>\r\n            <ReactAce\r\n              ref={c => {\r\n                this.jsRef = c;\r\n              }}\r\n              mode=\"javascript\"\r\n              theme=\"chrome\"\r\n              width=\"100%\"\r\n              height=\"200px\"\r\n              defaultValue={code}\r\n              value={tempCode}\r\n              editorProps={{\r\n                $blockScrolling: true\r\n              }}\r\n              onChange={value => {\r\n                this.setState({ tempCode: value });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CodeModal;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button } from \"antd\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\nimport { FlexBox, FlexItem } from \"../flex\";\r\n\r\nclass ImageMapList extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object\r\n  };\r\n\r\n  renderActions = () => {\r\n    const { canvasRef } = this.props;\r\n    const idCropping = canvasRef\r\n      ? canvasRef.handler.interactionMode === \"crop\"\r\n      : false;\r\n    return (\r\n      <FlexItem className=\"rde-canvas-list-actions\" flex=\"0 1 auto\">\r\n        <FlexBox justifyContent=\"space-between\" alignItems=\"center\">\r\n          <FlexBox flex=\"1\" justifyContent=\"center\">\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              style={{ width: \"100%\", height: 30 }}\r\n              disabled={idCropping}\r\n              onClick={e => canvasRef.handler.sendBackwards()}\r\n            >\r\n              <Icon name=\"arrow-up\" />\r\n            </Button>\r\n          </FlexBox>\r\n          <FlexBox flex=\"1\" justifyContent=\"center\">\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              style={{ width: \"100%\", height: 30 }}\r\n              disabled={idCropping}\r\n              onClick={e => canvasRef.handler.bringForward()}\r\n            >\r\n              <Icon name=\"arrow-down\" />\r\n            </Button>\r\n          </FlexBox>\r\n        </FlexBox>\r\n      </FlexItem>\r\n    );\r\n  };\r\n\r\n  renderItem = () => {\r\n    const { canvasRef, selectedItem } = this.props;\r\n    const idCropping = canvasRef\r\n      ? canvasRef.handler.interactionMode === \"crop\"\r\n      : false;\r\n    return canvasRef\r\n      ? canvasRef.canvas\r\n          .getObjects()\r\n          .filter(obj => {\r\n            if (obj.id === \"workarea\") {\r\n              return false;\r\n            }\r\n            if (obj.id) {\r\n              return true;\r\n            }\r\n            return false;\r\n          })\r\n          .map(obj => {\r\n            let icon;\r\n            let title = obj.name || obj.type;\r\n            let prefix = \"fas\";\r\n            if (obj.type === \"i-text\") {\r\n              icon = \"map-marker-alt\";\r\n            } else if (obj.type === \"textbox\") {\r\n              icon = \"font\";\r\n            } else if (obj.type === \"image\") {\r\n              icon = \"image\";\r\n            } else if (obj.type === \"triangle\") {\r\n              icon = \"image\";\r\n            } else if (obj.type === \"rect\") {\r\n              icon = \"image\";\r\n            } else if (obj.type === \"circle\") {\r\n              icon = \"circle\";\r\n            } else if (obj.type === \"polygon\") {\r\n              icon = \"draw-polygon\";\r\n            } else if (obj.type === \"line\") {\r\n              icon = \"image\";\r\n            } else if (obj.type === \"element\") {\r\n              icon = \"html5\";\r\n              prefix = \"fab\";\r\n            } else if (obj.type === \"iframe\") {\r\n              icon = \"window-maximize\";\r\n            } else if (obj.type === \"video\") {\r\n              icon = \"video\";\r\n            } else if (obj.type === \"svg\") {\r\n              icon = \"bezier-curve\";\r\n            } else {\r\n              icon = \"image\";\r\n              title = \"Default\";\r\n            }\r\n            let className = \"rde-canvas-list-item\";\r\n            if (selectedItem && selectedItem.id === obj.id) {\r\n              className += \" selected-item\";\r\n            }\r\n            return (\r\n              <FlexItem\r\n                key={obj.id}\r\n                className={className}\r\n                flex=\"1\"\r\n                onClick={() => canvasRef.handler.select(obj)}\r\n              >\r\n                <FlexBox alignItems=\"center\">\r\n                  <Icon\r\n                    className=\"rde-canvas-list-item-icon\"\r\n                    name={icon}\r\n                    size={1.5}\r\n                    style={{ width: 32 }}\r\n                    prefix={prefix}\r\n                  />\r\n                  <div className=\"rde-canvas-list-item-text\">{title}</div>\r\n                  <FlexBox\r\n                    className=\"rde-canvas-list-item-actions\"\r\n                    flex=\"1\"\r\n                    justifyContent=\"flex-end\"\r\n                  >\r\n                    <Button\r\n                      className=\"rde-action-btn\"\r\n                      shape=\"circle\"\r\n                      disabled={idCropping}\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        canvasRef.handler.duplicateById(obj.id);\r\n                      }}\r\n                    >\r\n                      <Icon name=\"clone\" />\r\n                    </Button>\r\n                    <Button\r\n                      className=\"rde-action-btn\"\r\n                      shape=\"circle\"\r\n                      disabled={idCropping}\r\n                      onClick={e => {\r\n                        e.stopPropagation();\r\n                        canvasRef.handler.removeById(obj.id);\r\n                      }}\r\n                    >\r\n                      <Icon name=\"trash\" />\r\n                    </Button>\r\n                  </FlexBox>\r\n                </FlexBox>\r\n              </FlexItem>\r\n            );\r\n          })\r\n      : null;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <FlexBox style={{ height: \"100%\" }} flexDirection=\"column\">\r\n        {this.renderActions()}\r\n        <div className=\"rde-canvas-list-items\">{this.renderItem()}</div>\r\n      </FlexBox>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapList;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Collapse, List } from \"antd\";\r\n\r\nimport PropertyDefinition from \"./PropertyDefinition\";\r\nimport Scrollbar from \"../../common/Scrollbar\";\r\nimport { FlexBox } from \"../../flex\";\r\n\r\nconst { Panel } = Collapse;\r\n\r\nclass NodeProperties extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.selectedItem && nextProps.selectedItem) {\r\n      if (this.props.selectedItem.id !== nextProps.selectedItem.id) {\r\n        nextProps.form.resetFields();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { canvasRef, selectedItem, form } = this.props;\r\n    const showArrow = false;\r\n    return (\r\n      <Scrollbar>\r\n        <Form layout=\"horizontal\" colon={false}>\r\n          <Collapse bordered={false}>\r\n            {selectedItem && PropertyDefinition[selectedItem.type] ? (\r\n              Object.keys(PropertyDefinition[selectedItem.type]).map(key => {\r\n                return (\r\n                  <Panel\r\n                    key={key}\r\n                    header={PropertyDefinition[selectedItem.type][key].title}\r\n                    showArrow={showArrow}\r\n                  >\r\n                    {PropertyDefinition[selectedItem.type][\r\n                      key\r\n                    ].component.render(canvasRef, form, selectedItem)}\r\n                  </Panel>\r\n                );\r\n              })\r\n            ) : (\r\n              <FlexBox\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"100%\",\r\n                  color: \"rgba(0, 0, 0, 0.45)\",\r\n                  fontSie: 16,\r\n                  padding: 16\r\n                }}\r\n              >\r\n                <List />\r\n              </FlexBox>\r\n            )}\r\n          </Collapse>\r\n        </Form>\r\n      </Scrollbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({\r\n  onValuesChange: (props, changedValues, allValues) => {\r\n    const { onChange, selectedItem } = props;\r\n    onChange(selectedItem, changedValues, allValues);\r\n  }\r\n})(NodeProperties);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Collapse } from \"antd\";\r\n\r\nimport PropertyDefinition from \"./PropertyDefinition\";\r\nimport Scrollbar from \"../../common/Scrollbar\";\r\n\r\nconst { Panel } = Collapse;\r\n\r\nclass MapProperties extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any\r\n  };\r\n\r\n  render() {\r\n    const { canvasRef, form } = this.props;\r\n    const showArrow = false;\r\n    if (canvasRef) {\r\n      return (\r\n        <Scrollbar>\r\n          <Form layout=\"horizontal\">\r\n            <Collapse bordered={false}>\r\n              {Object.keys(PropertyDefinition.map).map(key => {\r\n                return (\r\n                  <Panel\r\n                    key={key}\r\n                    header={PropertyDefinition.map[key].title}\r\n                    showArrow={showArrow}\r\n                  >\r\n                    {PropertyDefinition.map[key].component.render(\r\n                      canvasRef,\r\n                      form,\r\n                      canvasRef.handler.workarea\r\n                    )}\r\n                  </Panel>\r\n                );\r\n              })}\r\n            </Collapse>\r\n          </Form>\r\n        </Scrollbar>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default Form.create({\r\n  onValuesChange: (props, changedValues, allValues) => {\r\n    const { onChange, selectedItem } = props;\r\n    onChange(selectedItem, changedValues, { workarea: allValues });\r\n  }\r\n})(MapProperties);\r\n","import axios from \"axios\";\r\nimport { FETCH_USER } from \"./type\";\r\n\r\nexport const fetchUser = () => async dispatch => {\r\n  const res = await axios.get(\"/api/current_user\");\r\n  dispatch({ type: FETCH_USER, payload: res.data });\r\n};\r\n","//export const api_url = \"http://107.120.70.222:3000\";\r\nexport const api_url = \"http://192.168.0.61:3000\";\r\nexport const api_token = \"c2RzdjphaWNyQDIwMjA=\";\r\n","import {\r\n  CMN_TOGGLE_SIDER,\r\n  CMD_SET_SIDER_COLLAPSED,\r\n  CMD_SET_HAS_ERR,\r\n  GET_EXTRACT_TEMPLATE,\r\n  SET_ACTIVE_ASIDE_TAB,\r\n  SET_SELECTED_TEMPLATE,\r\n  SET_EDITOR_INSTANCE,\r\n  TOGGLE_ASDIDE_APP,\r\n  SET_MAIN_MENU_ID,\r\n  SET_CANVAS_REF,\r\n  SET_AIMV_CANVAS_REF\r\n} from \"./type\";\r\nimport axios from \"axios\";\r\nimport { api_url, api_token } from \"../conf\";\r\n// import ExtractTemplate from \"../views/DataExtraction/Fields.json\";\r\n// import IDTemplate from \"../views/DataExtraction/FieldsID.json\";\r\n\r\nexport const getExtractTemplate = id => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`${api_url}/api/templates/${id}`, {\r\n      headers: {\r\n        Authorization: `Basic ${api_token}`\r\n      }\r\n    });\r\n    if (res.data.status === \"success\") {\r\n      dispatch({ type: GET_EXTRACT_TEMPLATE, payload: res.data.data });\r\n    } else {\r\n      dispatch({ type: GET_EXTRACT_TEMPLATE, payload: undefined });\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    dispatch({ type: GET_EXTRACT_TEMPLATE, payload: undefined });\r\n    return { success: false, err };\r\n  }\r\n};\r\n\r\nexport const setAimvCanvasRef = aimvCanvasRef => ({\r\n  type: SET_AIMV_CANVAS_REF,\r\n  payload: aimvCanvasRef\r\n});\r\n\r\nexport const setCanvasRef = canvasRef => ({\r\n  type: SET_CANVAS_REF,\r\n  payload: canvasRef\r\n});\r\n\r\nexport const setMainMenuId = mainMenuId => ({\r\n  type: SET_MAIN_MENU_ID,\r\n  payload: mainMenuId\r\n});\r\n\r\nexport const setEditorInstance = editorInstance => ({\r\n  type: SET_EDITOR_INSTANCE,\r\n  payload: editorInstance\r\n});\r\n\r\nexport const toggleSider = () => ({\r\n  type: CMN_TOGGLE_SIDER\r\n});\r\n\r\nexport const toggleAsideApp = () => ({\r\n  type: TOGGLE_ASDIDE_APP\r\n});\r\n\r\nexport const setHasError = error => ({\r\n  type: CMD_SET_HAS_ERR,\r\n  payload: error\r\n});\r\n\r\nexport const setSelectedTemplate = selectedTemplate => ({\r\n  type: SET_SELECTED_TEMPLATE,\r\n  payload: selectedTemplate\r\n});\r\n\r\nexport const setActiveAsideTab = activeAsideTab => ({\r\n  type: SET_ACTIVE_ASIDE_TAB,\r\n  payload: activeAsideTab\r\n});\r\n\r\nexport const setSiderCollapsed = sider_collapsed => ({\r\n  type: CMD_SET_SIDER_COLLAPSED,\r\n  payload: sider_collapsed\r\n});\r\n","import axios from \"axios\";\r\nimport { IMG_UPLOAD, LIST_IMG } from \"./type\";\r\nimport { api_url, api_token } from \"../conf\";\r\n\r\nexport const uploadImg = (formData, templateId) => async dispatch => {\r\n  try {\r\n    let res;\r\n    if (templateId === \"1\") {\r\n      res = await axios({\r\n        method: \"post\",\r\n        url: `http://107.120.70.222:4000/api/images`,\r\n        data: formData,\r\n        headers: {\r\n          Authorization: `Basic ${api_token}`\r\n        }\r\n      });\r\n    } else {\r\n      res = await axios({\r\n        method: \"post\",\r\n        url: `http://107.120.70.222:4000/api/images`,\r\n        data: formData,\r\n        headers: {\r\n          Authorization: `Basic ${api_token}`\r\n        }\r\n      });\r\n    }\r\n\r\n    await axios.post(\"/api/template/add_img\", {\r\n      templateId,\r\n      imgId: res.data.data\r\n    });\r\n    dispatch({ type: IMG_UPLOAD, payload: res.data });\r\n    return { success: true, url: `${api_url}/api/images/${res.data.data}` };\r\n  } catch (err) {\r\n    return { success: false };\r\n  }\r\n};\r\n\r\nexport const listImg = templateId => async dispatch => {\r\n  try {\r\n    var imgs = await axios.post(`api/template/get_imgs`, { templateId });\r\n    dispatch({\r\n      type: LIST_IMG,\r\n      payload: imgs.data.map(img => ({\r\n        uid: img.imgId,\r\n        name: `image${img.imgId}`,\r\n        url: `${api_url}/api/images/${img.imgId}`\r\n      }))\r\n    });\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false, err };\r\n  }\r\n};\r\n\r\nexport const delImg = uid => async dispatch => {\r\n  try {\r\n    await axios.delete(`${api_url}/api/images/${uid}`, {\r\n      headers: {\r\n        Authorization: `Basic ${api_token}`\r\n      }\r\n    });\r\n\r\n    await axios.post(\"/api/template/del_img\", { imgId: uid });\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false };\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport { change, reset } from \"redux-form\";\r\nimport { SET_CURRENT_IMG, SET_LOADING, SET_NLP_FLAG } from \"./type\";\r\n\r\nimport { api_url, api_token } from \"../conf\";\r\n\r\nexport const setLoading = loading => ({\r\n  type: SET_LOADING,\r\n  payload: loading\r\n});\r\n\r\nexport const resetForm = () => async dispatch => {\r\n  dispatch(reset(\"eform\"));\r\n};\r\n\r\nexport const setCurrentImg = current_img => ({\r\n  type: SET_CURRENT_IMG,\r\n  payload: current_img\r\n});\r\n\r\nexport const setNLPFlag = nlp_f => ({\r\n  type: SET_NLP_FLAG,\r\n  payload: nlp_f\r\n});\r\n\r\nexport const extractData = (uid, templateId, nlp_f) => async dispatch => {\r\n  try {\r\n    let res;\r\n    if (templateId === \"1\") {\r\n      res = await axios.post(\r\n        `http://107.120.70.222:4000/api/hw/${uid}?nlp=${nlp_f}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Basic ${api_token}`\r\n          }\r\n        }\r\n      );\r\n    } else {\r\n      res = await axios.post(`${api_url}/api/aicr/extract`, {\r\n        headers: {\r\n          Authorization: `Basic ${api_token}`\r\n        },\r\n        template_id: templateId,\r\n        image_id: uid,\r\n        nlp: nlp_f\r\n      });\r\n    }\r\n    res.data.map(edata => {\r\n      if (!(edata.value instanceof Array)) {\r\n        dispatch(change(\"eform\", edata.name, edata.value));\r\n      } else {\r\n        if (edata.data_type !== \"group\") {\r\n          edata.value.map(evalue => {\r\n            dispatch(\r\n              change(\"eform\", `${edata.name}.${evalue.name}`, evalue.value)\r\n            );\r\n          });\r\n        } else {\r\n          edata.value.map(evalue => {\r\n            dispatch(change(\"eform\", evalue.name, evalue.value));\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false, err };\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport { reset } from \"redux-form\";\r\nimport { api_url } from \"../conf\";\r\nimport {\r\n  LOAD_TEMPLTE_TREE,\r\n  SET_EXPANDED,\r\n  SET_SELECTED,\r\n  SET_TEMPLATE_MODAL_VISIBLE,\r\n  SET_MODAL_ACTION,\r\n  APPEND_EXPANDED,\r\n  SET_UPDATING,\r\n  LIST_IMG,\r\n  GET_EXTRACT_TEMPLATE,\r\n  SET_CURRENT_IMG\r\n} from \"./type\";\r\n\r\nexport const loadTplTree = () => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`/api/template/all`);\r\n    dispatch({ type: LOAD_TEMPLTE_TREE, payload: res.data });\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false, error: err };\r\n  }\r\n};\r\nexport const resetTForm = () => async dispatch => {\r\n  dispatch(reset(\"tmodal\"));\r\n};\r\nexport const removeTemplateFolder = nodeId => async dispatch => {\r\n  try {\r\n    const res = await axios.post(`/api/template/remove`, {\r\n      _id: nodeId\r\n    });\r\n    dispatch({ type: LOAD_TEMPLTE_TREE, payload: [res.data] });\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false, error: err };\r\n  }\r\n};\r\nexport const addNewTemplate = (parentId, label, isLeaf) => async dispatch => {\r\n  try {\r\n    const res = await axios.post(`/api/template/addtokey`, {\r\n      parentId,\r\n      label,\r\n      isLeaf,\r\n      templateId: \"0\"\r\n    });\r\n\r\n    dispatch({ type: LOAD_TEMPLTE_TREE, payload: [res.data.tree] });\r\n\r\n    dispatch({\r\n      type: SET_SELECTED,\r\n      payload: { selected: res.data.id, istemplate: isLeaf, templateId: \"0\" }\r\n    });\r\n\r\n    dispatch({\r\n      type: APPEND_EXPANDED,\r\n      payload: parentId\r\n    });\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    return { success: false, error: err };\r\n  }\r\n};\r\n\r\nexport const setUpdating = loading => ({\r\n  type: SET_UPDATING,\r\n  payload: loading\r\n});\r\n\r\nexport const setModalAction = modalAction => ({\r\n  type: SET_MODAL_ACTION,\r\n  payload: modalAction\r\n});\r\n\r\nexport const setExpanded = expanded => ({\r\n  type: SET_EXPANDED,\r\n  payload: expanded\r\n});\r\n\r\nexport const appendExpanded = expanded => ({\r\n  type: APPEND_EXPANDED,\r\n  payload: expanded\r\n});\r\n\r\nexport const setTplModalVisible = visible => ({\r\n  type: SET_TEMPLATE_MODAL_VISIBLE,\r\n  payload: visible\r\n});\r\n\r\nexport const setSelected = (\r\n  isselected,\r\n  common,\r\n  imgUpload\r\n) => async dispatch => {\r\n  try {\r\n    // data extraction\r\n    const res = await axios.post(`/api/template/istemplate`, {\r\n      _id: isselected\r\n    });\r\n    dispatch({\r\n      type: SET_SELECTED,\r\n      payload: {\r\n        selected: isselected,\r\n        istemplate: res.data.isTemplate,\r\n        label: res.data.label,\r\n        templateId: res.data.templateId\r\n      }\r\n    });\r\n    // Get images uploaded for the template\r\n    var imgs = await axios.post(`api/template/get_imgs`, {\r\n      templateId: res.data.templateId\r\n    });\r\n\r\n    dispatch({\r\n      type: LIST_IMG,\r\n      payload: imgs.data.map(img => ({\r\n        uid: img.imgId,\r\n        name: `image${img.imgId}`,\r\n        url: `${api_url}/api/images/${img.imgId}`\r\n      }))\r\n    });\r\n    // Set current image\r\n    dispatch({\r\n      type: SET_CURRENT_IMG,\r\n      payload:\r\n        imgs.length === 0\r\n          ? \"./assets/img/no-image.png\"\r\n          : `${api_url}/api/images/${imgs.data[0].imgId}`\r\n    });\r\n\r\n    // Get and set template field configuration\r\n    const res1 = await axios.get(\r\n      `${api_url}/api/templates/${res.data.templateId}`\r\n    );\r\n    if (res1.data.status === \"success\") {\r\n      dispatch({ type: GET_EXTRACT_TEMPLATE, payload: res1.data.data });\r\n    } else {\r\n      dispatch({ type: GET_EXTRACT_TEMPLATE, payload: undefined });\r\n    }\r\n    if (common.mainMenuId === 1) {\r\n      // Set default current image\r\n      if (common.aimvCanvasRef) {\r\n        await common.aimvCanvasRef.handler.workareaHandler.setImage(\r\n          imgs.length === 0\r\n            ? \"./assets/img/no-image.png\"\r\n            : `${api_url}/api/images/${res1.data.data.image_source}`\r\n        );\r\n      }\r\n      //Reset extracted form\r\n      dispatch(reset(\"eform\"));\r\n    } else if (common.mainMenuId === 2) {\r\n      //Template Editor\r\n      common.canvasRef.handler.workareaHandler.setImage(\r\n        imgs.length === 0\r\n          ? \"./assets/img/no-image.png\"\r\n          : `${api_url}/api/images/${res1.data.data.image_source}`,\r\n        false,\r\n        () => {\r\n          const area = common.canvasRef.handler.workarea;\r\n\r\n          if (res1.data.status === \"success\") {\r\n            common.canvasRef.handler.clear();\r\n            res1.data.data.template_config_fields.map(field => {\r\n              if (field.data_type !== \"group\") {\r\n                const option = {\r\n                  type: \"rect\",\r\n                  id: field.id,\r\n                  name: field.name,\r\n                  width: field.size.width,\r\n                  height: field.size.height\r\n                };\r\n                const object = common.canvasRef.handler.add(option);\r\n                common.canvasRef.handler.setByObject(\r\n                  object,\r\n                  \"top\",\r\n                  area.top + field.position.top\r\n                );\r\n                common.canvasRef.handler.setByObject(\r\n                  object,\r\n                  \"left\",\r\n                  area.left + field.position.left\r\n                );\r\n                common.canvasRef.handler.setByObject(\r\n                  object,\r\n                  \"borderColor\",\r\n                  \"#ff0000\"\r\n                );\r\n              }\r\n            });\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (err) {\r\n    console.log(err);\r\n    return { success: false, error: err };\r\n  }\r\n};\r\n","export * from \"./authActions\";\r\nexport * from \"./commonActions\";\r\nexport * from \"./imgUploadActions\";\r\nexport * from \"./extractDataActions\";\r\nexport * from \"./templateTreeActions\";\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/json\";\r\nimport \"brace/theme/chrome\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nclass InputJson extends Component {\r\n  static propTypes = {\r\n    defaultValue: PropTypes.string,\r\n    value: PropTypes.string,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    onChange: PropTypes.func,\r\n    onValidate: PropTypes.func,\r\n    disabled: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    width: \"100%\",\r\n    height: \"200px\",\r\n    disabled: false\r\n  };\r\n\r\n  state = {\r\n    text: this.props.value || \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.debouncedValidate = debounce(errors => {\r\n      const { onValidate } = this.props;\r\n      if (onValidate) {\r\n        onValidate(errors);\r\n      }\r\n      const { onChange } = this.props;\r\n      if (onChange) {\r\n        onChange(this.state.text);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (nextProps.value !== this.props.value) {\r\n      this.setState({\r\n        text: nextProps.value\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (value, e) => {\r\n    if (this.debouncedValidate) {\r\n      this.debouncedValidate();\r\n    }\r\n    this.setState({\r\n      text: value\r\n    });\r\n  };\r\n\r\n  onValidate = annotations => {\r\n    if (annotations.length) {\r\n      const errors = annotations\r\n        .filter(annotation => annotation.type === \"error\")\r\n        .map(annotation => {\r\n          return new Error(\r\n            `${annotation.row}:${annotation.column} ${annotation.text} error`\r\n          );\r\n        });\r\n      this.debouncedValidate(errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { defaultValue, width, height, disabled } = this.props;\r\n    const { text } = this.state;\r\n    return (\r\n      <ReactAce\r\n        ref={c => {\r\n          this.aceRef = c;\r\n        }}\r\n        mode=\"json\"\r\n        theme=\"chrome\"\r\n        width={width}\r\n        height={height}\r\n        defaultValue={defaultValue || text}\r\n        value={text}\r\n        editorProps={{\r\n          $blockScrolling: true\r\n        }}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        readOnly={disabled}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputJson;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/javascript\";\r\nimport \"brace/theme/chrome\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nclass InputScript extends Component {\r\n  static propTypes = {\r\n    defaultValue: PropTypes.string,\r\n    value: PropTypes.string,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    onChange: PropTypes.func,\r\n    onValidate: PropTypes.func,\r\n    disabled: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    width: \"100%\",\r\n    height: \"200px\",\r\n    disabled: false\r\n  };\r\n\r\n  state = {\r\n    text: this.props.value || \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.debouncedValidate = debounce(errors => {\r\n      const { onValidate } = this.props;\r\n      if (onValidate) {\r\n        onValidate(errors);\r\n      }\r\n      const { onChange } = this.props;\r\n      if (onChange) {\r\n        onChange(this.state.text);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (nextProps.value !== this.props.value) {\r\n      this.setState({\r\n        text: nextProps.value\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (value, e) => {\r\n    if (this.debouncedValidate) {\r\n      this.debouncedValidate();\r\n    }\r\n    this.setState({\r\n      text: value\r\n    });\r\n  };\r\n\r\n  onValidate = annotations => {\r\n    if (annotations.length) {\r\n      const errors = annotations\r\n        .filter(annotation => annotation.type === \"error\")\r\n        .map(annotation => {\r\n          return new Error(\r\n            `${annotation.row}:${annotation.column} ${annotation.text} error`\r\n          );\r\n        });\r\n      this.debouncedValidate(errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { defaultValue, width, height, dsiabled } = this.props;\r\n    const { text } = this.state;\r\n    return (\r\n      <ReactAce\r\n        ref={c => {\r\n          this.aceRef = c;\r\n        }}\r\n        mode=\"javascript\"\r\n        theme=\"chrome\"\r\n        width={width}\r\n        height={height}\r\n        defaultValue={defaultValue || text}\r\n        value={text}\r\n        editorProps={{\r\n          $blockScrolling: true\r\n        }}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        readOnly={dsiabled}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputScript;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/handlebars\";\r\nimport \"brace/theme/chrome\";\r\n\r\nclass InputTemplate extends Component {\r\n  static propTypes = {\r\n    defaultValue: PropTypes.string,\r\n    value: PropTypes.string,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    showLineNumbers: PropTypes.bool,\r\n    newLineMode: PropTypes.bool,\r\n    disabled: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    width: \"100%\",\r\n    height: \"200px\",\r\n    showLineNumbers: true,\r\n    newLineMode: true,\r\n    disabled: false\r\n  };\r\n\r\n  state = {\r\n    text: this.props.value || \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (!this.props.newLineMode) {\r\n      this.aceRef.editor.keyBinding.addKeyboardHandler(\r\n        (data, hashId, keyString, keyCode, e) => {\r\n          if (keyCode === 13) {\r\n            return { command: \"null\" }; // do nothing\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this.setState({\r\n      text: nextProps.value\r\n    });\r\n  }\r\n\r\n  onChange = value => {\r\n    const { onChange } = this.props;\r\n    if (onChange) {\r\n      onChange(value);\r\n    }\r\n    this.setState({\r\n      text: value\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      defaultValue,\r\n      width,\r\n      height,\r\n      showLineNumbers,\r\n      newLineMode,\r\n      disabled\r\n    } = this.props;\r\n    const { text } = this.state;\r\n    return (\r\n      <ReactAce\r\n        ref={c => {\r\n          this.aceRef = c;\r\n        }}\r\n        mode=\"handlebars\"\r\n        theme=\"chrome\"\r\n        width={width}\r\n        height={height}\r\n        defaultValue={defaultValue || text}\r\n        value={text}\r\n        editorProps={{\r\n          $blockScrolling: true\r\n        }}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        maxLines={!newLineMode ? 1 : null}\r\n        setOptions={{\r\n          showLineNumbers,\r\n          newLineMode,\r\n          readOnly: disabled\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputTemplate;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ReactAce from \"react-ace\";\r\nimport \"brace/mode/html\";\r\nimport \"brace/theme/chrome\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nclass InputJson extends Component {\r\n  static propTypes = {\r\n    defaultValue: PropTypes.string,\r\n    value: PropTypes.string,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    onChange: PropTypes.func,\r\n    onValidate: PropTypes.func,\r\n    disabled: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    width: \"100%\",\r\n    height: \"200px\",\r\n    disabled: false\r\n  };\r\n\r\n  state = {\r\n    text: this.props.value || \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.debouncedValidate = debounce(errors => {\r\n      const { onValidate } = this.props;\r\n      if (onValidate) {\r\n        onValidate(errors);\r\n      }\r\n      const { onChange } = this.props;\r\n      if (onChange) {\r\n        onChange(this.state.text);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (nextProps.value !== this.props.value) {\r\n      this.setState({\r\n        text: nextProps.value\r\n      });\r\n    }\r\n  }\r\n\r\n  onChange = (value, e) => {\r\n    if (this.debouncedValidate) {\r\n      this.debouncedValidate();\r\n    }\r\n    this.setState({\r\n      text: value\r\n    });\r\n  };\r\n\r\n  onValidate = annotations => {\r\n    if (annotations.length) {\r\n      const errors = annotations\r\n        .filter(annotation => annotation.type === \"error\")\r\n        .map(annotation => {\r\n          return new Error(\r\n            `${annotation.row}:${annotation.column} ${annotation.text} error`\r\n          );\r\n        });\r\n      this.debouncedValidate(errors);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { defaultValue, width, height, disabled } = this.props;\r\n    const { text } = this.state;\r\n    return (\r\n      <ReactAce\r\n        ref={c => {\r\n          this.aceRef = c;\r\n        }}\r\n        mode=\"html\"\r\n        theme=\"chrome\"\r\n        width={width}\r\n        height={height}\r\n        defaultValue={defaultValue || text}\r\n        value={text}\r\n        editorProps={{\r\n          $blockScrolling: true\r\n        }}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        readOnly={disabled}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputJson;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Form, Radio } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport { InputHtml } from \".\";\r\nimport FileUpload from \"./FileUpload\";\r\n\r\nclass SVGModal extends Component {\r\n  static propTypes = {\r\n    onOk: PropTypes.func.isRequired,\r\n    onCancel: PropTypes.func,\r\n    visible: PropTypes.bool.isRequired\r\n  };\r\n\r\n  state = {\r\n    loadType: \"svg\",\r\n    visible: false\r\n  };\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (nextProps.visible !== this.props.visible) {\r\n      this.setState({\r\n        visible: nextProps.visible\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChangeSvgType = e => {\r\n    this.props.form.resetFields();\r\n    this.setState({\r\n      loadType: e.target.value\r\n    });\r\n  };\r\n\r\n  handleOk = () => {\r\n    const { form, onOk } = this.props;\r\n    form.validateFields((err, values) => {\r\n      if (err) {\r\n        return;\r\n      }\r\n      if (values.svg instanceof Blob) {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(values.svg);\r\n        reader.onload = () => {\r\n          onOk({ ...values, svg: reader.result });\r\n        };\r\n      } else {\r\n        onOk(values);\r\n      }\r\n    });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    const { onCancel } = this.props;\r\n    if (onCancel) {\r\n      onCancel();\r\n      return;\r\n    }\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { form } = this.props;\r\n    const { loadType, visible } = this.state;\r\n    return (\r\n      <Modal\r\n        title={i18n.t(\"imagemap.svg.add-svg\")}\r\n        closable\r\n        onCancel={this.handleCancel}\r\n        onOk={this.handleOk}\r\n        visible={visible}\r\n      >\r\n        <Form colon={false}>\r\n          <Form.Item label={i18n.t(\"common.type\")}>\r\n            {form.getFieldDecorator(\"loadType\", {\r\n              initialValue: loadType\r\n            })(\r\n              <Radio.Group onChange={this.handleChangeSvgType}>\r\n                <Radio.Button value=\"svg\">{i18n.t(\"common.svg\")}</Radio.Button>\r\n                <Radio.Button value=\"file\">\r\n                  {i18n.t(\"common.file\")}\r\n                </Radio.Button>\r\n              </Radio.Group>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item\r\n            label={\r\n              loadType === \"svg\" ? i18n.t(\"common.svg\") : i18n.t(\"common.file\")\r\n            }\r\n          >\r\n            {form.getFieldDecorator(\"svg\", {\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: i18n.t(\"validation.enter-property\", {\r\n                    arg:\r\n                      loadType === \"svg\"\r\n                        ? i18n.t(\"common.svg\")\r\n                        : i18n.t(\"common.file\")\r\n                  })\r\n                }\r\n              ]\r\n            })(\r\n              loadType === \"svg\" ? <InputHtml /> : <FileUpload accept=\".svg\" />\r\n            )}\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create()(SVGModal);\r\n","export { default as CodeModal } from './CodeModal';\r\n\r\nexport { default as ColorPicker } from './ColorPicker';\r\n\r\nexport { default as CommonButton } from './CommonButton';\r\n\r\nexport { default as Container } from './Container';\r\n\r\nexport { default as FileUpload } from './FileUpload';\r\n\r\nexport { default as InputJson } from './InputJson';\r\n\r\nexport { default as InputScript } from './InputScript';\r\n\r\nexport { default as InputTemplate } from './InputTemplate';\r\n\r\nexport { default as InputHtml } from './InputHtml';\r\n\r\nexport { default as Scrollbar } from './Scrollbar';\r\n\r\nexport { default as UrlModal } from './UrlModal';\r\n\r\nexport { default as SVGModal } from './SVGModal';","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Switch, Tooltip } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport CommonButton from \"../common/CommonButton\";\r\n\r\nclass ImageMapFooterToolbar extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    preview: PropTypes.bool,\r\n    onChangePreview: PropTypes.func,\r\n    zoomRatio: PropTypes.number\r\n  };\r\n\r\n  state = {\r\n    interactionMode: \"selection\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { canvasRef } = this.props;\r\n    this.waitForCanvasRender(canvasRef);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { canvasRef } = this.props;\r\n    this.detachEventListener(canvasRef);\r\n  }\r\n\r\n  waitForCanvasRender = canvas => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        this.attachEventListener(canvas);\r\n        return;\r\n      }\r\n      const { canvasRef } = this.props;\r\n      this.waitForCanvasRender(canvasRef);\r\n    }, 5);\r\n  };\r\n\r\n  attachEventListener = canvasRef => {\r\n    canvasRef.canvas.wrapperEl.addEventListener(\r\n      \"keydown\",\r\n      this.events.keydown,\r\n      false\r\n    );\r\n  };\r\n\r\n  detachEventListener = canvasRef => {\r\n    canvasRef.canvas.wrapperEl.removeEventListener(\r\n      \"keydown\",\r\n      this.events.keydown\r\n    );\r\n  };\r\n\r\n  /* eslint-disable react/sort-comp, react/prop-types */\r\n  handlers = {\r\n    selection: () => {\r\n      if (this.props.canvasRef.handler.interactionHandler.isDrawingMode()) {\r\n        return;\r\n      }\r\n      this.forceUpdate();\r\n      this.setState({ interactionMode: \"selection\" });\r\n      this.props.canvasRef.handler.interactionHandler.selection();\r\n    },\r\n    grab: () => {\r\n      if (this.props.canvasRef.handler.interactionHandler.isDrawingMode()) {\r\n        return;\r\n      }\r\n      this.forceUpdate();\r\n      this.setState({ interactionMode: \"grab\" });\r\n      this.props.canvasRef.handler.interactionHandler.grab();\r\n    }\r\n  };\r\n\r\n  events = {\r\n    keydown: e => {\r\n      if (this.props.canvasRef.canvas.wrapperEl !== document.activeElement) {\r\n        return false;\r\n      }\r\n      if (e.keyCode === 81) {\r\n        this.handlers.selection();\r\n      } else if (e.keyCode === 87) {\r\n        this.handlers.grab();\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { canvasRef, preview, zoomRatio, onChangePreview } = this.props;\r\n    const { interactionMode } = this.state;\r\n    const { selection, grab } = this.handlers;\r\n    if (!canvasRef) {\r\n      return null;\r\n    }\r\n    const zoomValue = parseInt((zoomRatio * 100).toFixed(2), 10);\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"rde-editor-footer-toolbar-interaction\">\r\n          <Button.Group>\r\n            <CommonButton\r\n              type={interactionMode === \"selection\" ? \"primary\" : \"default\"}\r\n              style={{\r\n                borderBottomLeftRadius: \"8px\",\r\n                borderTopLeftRadius: \"8px\"\r\n              }}\r\n              onClick={() => {\r\n                selection();\r\n              }}\r\n              icon=\"mouse-pointer\"\r\n              tooltipTitle={i18n.t(\"action.selection\")}\r\n            />\r\n            <CommonButton\r\n              type={interactionMode === \"grab\" ? \"primary\" : \"default\"}\r\n              style={{\r\n                borderBottomRightRadius: \"8px\",\r\n                borderTopRightRadius: \"8px\"\r\n              }}\r\n              onClick={() => {\r\n                grab();\r\n              }}\r\n              tooltipTitle={i18n.t(\"action.grab\")}\r\n              icon=\"hand-rock\"\r\n            />\r\n          </Button.Group>\r\n        </div>\r\n        <div className=\"rde-editor-footer-toolbar-zoom\">\r\n          <Button.Group>\r\n            <CommonButton\r\n              style={{\r\n                borderBottomLeftRadius: \"8px\",\r\n                borderTopLeftRadius: \"8px\"\r\n              }}\r\n              onClick={() => {\r\n                canvasRef.handler.zoomHandler.zoomOut();\r\n              }}\r\n              icon=\"search-minus\"\r\n              tooltipTitle={i18n.t(\"action.zoom-out\")}\r\n            />\r\n            <CommonButton\r\n              onClick={() => {\r\n                canvasRef.handler.zoomHandler.zoomOneToOne();\r\n              }}\r\n              tooltipTitle={i18n.t(\"action.one-to-one\")}\r\n            >\r\n              {`${zoomValue}%`}\r\n            </CommonButton>\r\n            <CommonButton\r\n              onClick={() => {\r\n                canvasRef.handler.zoomHandler.zoomToFit();\r\n              }}\r\n              tooltipTitle={i18n.t(\"action.fit\")}\r\n              icon=\"expand\"\r\n            />\r\n            <CommonButton\r\n              style={{\r\n                borderBottomRightRadius: \"8px\",\r\n                borderTopRightRadius: \"8px\"\r\n              }}\r\n              onClick={() => {\r\n                canvasRef.handler.zoomHandler.zoomIn();\r\n              }}\r\n              icon=\"search-plus\"\r\n              tooltipTitle={i18n.t(\"action.zoom-in\")}\r\n            />\r\n          </Button.Group>\r\n        </div>\r\n        <div className=\"rde-editor-footer-toolbar-preview\">\r\n          <Tooltip title={i18n.t(\"action.preview\")}>\r\n            <Switch checked={preview} onChange={onChangePreview} />\r\n          </Tooltip>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapFooterToolbar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Tooltip, Button } from \"antd\";\r\nimport Icon from \"../icon/Icon\";\r\n\r\nclass CommonButton extends Component {\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    id: PropTypes.string,\r\n    style: PropTypes.object,\r\n    wrapperStyle: PropTypes.object,\r\n    wrapperClassName: PropTypes.string,\r\n    tooltipTitle: PropTypes.string,\r\n    tooltipPlacement: PropTypes.string,\r\n    className: PropTypes.string,\r\n    icon: PropTypes.string,\r\n    iconStyle: PropTypes.object,\r\n    iconClassName: PropTypes.string,\r\n    iconAnimation: PropTypes.string,\r\n    visible: PropTypes.bool,\r\n    shape: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    loading: PropTypes.bool,\r\n    type: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    type: \"default\",\r\n    visible: true,\r\n    disabled: false,\r\n    loading: false\r\n  };\r\n\r\n  render() {\r\n    return this.props.visible ? (\r\n      <Tooltip\r\n        title={this.props.tooltipTitle}\r\n        placement={this.props.tooltipPlacement}\r\n      >\r\n        {this.props.wrapperClassName || this.props.wrapperStyle ? (\r\n          <span\r\n            style={this.props.wrapperStyle}\r\n            className={this.props.wrapperClassName}\r\n          >\r\n            <Button\r\n              id={this.props.id}\r\n              className={this.props.className}\r\n              name={this.props.name}\r\n              style={this.props.style}\r\n              shape={this.props.shape}\r\n              size={this.props.size}\r\n              onClick={this.props.onClick}\r\n              type={this.props.type}\r\n              disabled={this.props.disabled}\r\n              loading={this.props.loading}\r\n            >\r\n              {this.props.icon ? (\r\n                this.props.iconAnimation ? (\r\n                  <Icon\r\n                    name={this.props.icon}\r\n                    style={this.props.iconStyle}\r\n                    className={this.props.iconClassName}\r\n                    animation={this.props.iconAnimation}\r\n                  />\r\n                ) : (\r\n                  <Icon\r\n                    name={this.props.icon}\r\n                    style={this.props.iconStyle}\r\n                    className={this.props.iconClassName}\r\n                  />\r\n                )\r\n              ) : null}\r\n              {this.props.children}\r\n            </Button>\r\n          </span>\r\n        ) : (\r\n          <Button\r\n            id={this.props.id}\r\n            className={this.props.className}\r\n            name={this.props.name}\r\n            style={this.props.style}\r\n            shape={this.props.shape}\r\n            size={this.props.size}\r\n            onClick={this.props.onClick}\r\n            type={this.props.type}\r\n            disabled={this.props.disabled}\r\n            loading={this.props.loading}\r\n          >\r\n            {this.props.icon ? (\r\n              this.props.iconAnimation ? (\r\n                <Icon\r\n                  name={this.props.icon}\r\n                  style={this.props.iconStyle}\r\n                  className={this.props.iconClassName}\r\n                  animation={this.props.iconAnimation}\r\n                />\r\n              ) : (\r\n                <Icon\r\n                  name={this.props.icon}\r\n                  style={this.props.iconStyle}\r\n                  className={this.props.iconClassName}\r\n                />\r\n              )\r\n            ) : null}\r\n            {this.props.children}\r\n          </Button>\r\n        )}\r\n      </Tooltip>\r\n    ) : null;\r\n  }\r\n}\r\n\r\nexport default CommonButton;\r\n","import React, { Component } from \"react\";\r\nimport { FlexBox, FlexItem } from \"../flex\";\r\n\r\nclass ImageMapTitle extends Component {\r\n  render() {\r\n    const { title, content, action, children } = this.props;\r\n    return (\r\n      children || (\r\n        <FlexBox\r\n          className=\"rde-content-layout-title\"\r\n          alignItems=\"center\"\r\n          flexWrap=\"wrap\"\r\n        >\r\n          <FlexItem flex=\"0 1 auto\">\r\n            <FlexBox\r\n              className=\"rde-content-layout-title-title\"\r\n              justifyContent=\"flex-start\"\r\n              alignItems=\"center\"\r\n            >\r\n              {title instanceof String ? <h3>{title}</h3> : title}\r\n            </FlexBox>\r\n          </FlexItem>\r\n          <FlexItem flex=\"auto\">\r\n            <FlexBox\r\n              className=\"rde-content-layout-title-content\"\r\n              alignItems=\"center\"\r\n            >\r\n              {content}\r\n            </FlexBox>\r\n          </FlexItem>\r\n          <FlexItem flex=\"auto\">\r\n            <FlexBox\r\n              className=\"rde-content-layout-title-action\"\r\n              justifyContent=\"flex-end\"\r\n              alignItems=\"center\"\r\n            >\r\n              {action}\r\n            </FlexBox>\r\n          </FlexItem>\r\n        </FlexBox>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapTitle;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button } from \"antd\";\r\nimport classnames from \"classnames\";\r\n\r\nimport Icon from \"../icon/Icon\";\r\nimport Canvas from \"../canvas/Canvas\";\r\n\r\nclass ImageMapPreview extends Component {\r\n  static propTypes = {\r\n    preview: PropTypes.bool,\r\n    onChangePreview: PropTypes.func,\r\n    onTooltip: PropTypes.func,\r\n    onAction: PropTypes.func\r\n  };\r\n\r\n  render() {\r\n    const { onChangePreview, onTooltip, onClick, preview } = this.props;\r\n    const previewClassName = classnames(\"rde-preview\", { preview });\r\n    return (\r\n      <div className={previewClassName}>\r\n        <div\r\n          ref={c => {\r\n            this.container = c;\r\n          }}\r\n          style={{\r\n            overvlow: \"hidden\",\r\n            display: \"flex\",\r\n            flex: \"1\",\r\n            height: \"100%\"\r\n          }}\r\n        >\r\n          <Canvas\r\n            ref={c => {\r\n              this.canvasRef = c;\r\n            }}\r\n            editable={false}\r\n            canvasOption={{\r\n              backgroundColor: \"#f3f3f3\"\r\n            }}\r\n            onTooltip={onTooltip}\r\n            onClick={onClick}\r\n          />\r\n          <Button\r\n            className=\"rde-action-btn rde-preview-close-btn\"\r\n            onClick={onChangePreview}\r\n          >\r\n            <Icon name=\"times\" size={1.5} />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapPreview;\r\n","import React from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Select,\r\n  Switch,\r\n  Slider,\r\n  InputNumber\r\n} from \"antd\";\r\nimport ColorPicker from \"../../common/ColorPicker\";\r\n\r\nexport default {\r\n  render(canvasRef, form, data) {\r\n    const { getFieldDecorator } = form;\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const type = data.animation.type || \"none\";\r\n    return (\r\n      <React.Fragment>\r\n        <Form.Item label=\"Animation Type\" colon={false}>\r\n          {getFieldDecorator(\"animation.type\", {\r\n            initialValue: type\r\n          })(\r\n            <Select>\r\n              <Select.Option value=\"none\">None</Select.Option>\r\n              <Select.Option value=\"fade\">Fade</Select.Option>\r\n              <Select.Option value=\"bounce\">Bounce</Select.Option>\r\n              <Select.Option value=\"shake\">Shake</Select.Option>\r\n              <Select.Option value=\"scaling\">Scaling</Select.Option>\r\n              <Select.Option value=\"rotation\">Rotation</Select.Option>\r\n              <Select.Option value=\"flash\">Flash</Select.Option>\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        {type === \"none\" ? null : (\r\n          <React.Fragment>\r\n            <Row>\r\n              <Col span={12}>\r\n                <Form.Item label=\"Auto Play\" colon={false}>\r\n                  {getFieldDecorator(\"animation.autoplay\", {\r\n                    rules: [\r\n                      {\r\n                        type: \"boolean\"\r\n                      }\r\n                    ],\r\n                    valuePropName: \"checked\",\r\n                    initialValue: data.animation.autoplay || false\r\n                  })(<Switch size=\"small\" />)}\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={12}>\r\n                <Form.Item label=\"Loop\" colon={false}>\r\n                  {getFieldDecorator(\"animation.loop\", {\r\n                    rules: [\r\n                      {\r\n                        type: \"boolean\"\r\n                      }\r\n                    ],\r\n                    valuePropName: \"checked\",\r\n                    initialValue: data.animation.loop || false\r\n                  })(<Switch size=\"small\" />)}\r\n                </Form.Item>\r\n              </Col>\r\n            </Row>\r\n            {type !== \"shake\" ? (\r\n              <Row>\r\n                <Col span={12}>\r\n                  <Form.Item label=\"Delay\" colon={false}>\r\n                    {getFieldDecorator(\"animation.delay\", {\r\n                      rules: [\r\n                        {\r\n                          type: \"number\",\r\n                          min: 100,\r\n                          max: 5000\r\n                        }\r\n                      ],\r\n                      initialValue: data.animation.delay || 100\r\n                    })(<Slider min={100} max={5000} step={100} />)}\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Form.Item label=\"Duration\" colon={false}>\r\n                    {getFieldDecorator(\"animation.duration\", {\r\n                      rules: [\r\n                        {\r\n                          type: \"number\",\r\n                          min: 100,\r\n                          max: 5000\r\n                        }\r\n                      ],\r\n                      initialValue: data.animation.duration || 1000\r\n                    })(<Slider min={100} max={5000} step={100} />)}\r\n                  </Form.Item>\r\n                </Col>\r\n              </Row>\r\n            ) : null}\r\n            {this.getComponentType(type, data, getFieldDecorator)}\r\n            <Form.Item label=\"Playback\" colon={false}>\r\n              <Row>\r\n                <Col span={8}>\r\n                  <Button\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.play(data.id);\r\n                    }}\r\n                  >\r\n                    Start\r\n                  </Button>\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.pause(data.id);\r\n                    }}\r\n                  >\r\n                    Pause\r\n                  </Button>\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    onClick={() => {\r\n                      canvasRef.handler.animationHandler.stop(data.id);\r\n                    }}\r\n                  >\r\n                    Stop\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Form.Item>\r\n          </React.Fragment>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  },\r\n  getComponentType(type, data, getFieldDecorator) {\r\n    let component;\r\n    if (type === \"fade\") {\r\n      component = (\r\n        <Form.Item label=\"Opacity\" colon={false}>\r\n          {getFieldDecorator(\"animation.opacity\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 0,\r\n                max: 1\r\n              }\r\n            ],\r\n            initialValue: data.animation.opacity || 0\r\n          })(<Slider min={0} max={1} step={0.1} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"bounce\") {\r\n      component = (\r\n        <React.Fragment>\r\n          <Form.Item label=\"Bounce Type\" colon={false}>\r\n            {getFieldDecorator(\"animation.bounce\", {\r\n              initialValue: data.animation.bounce || \"hotizontal\"\r\n            })(\r\n              <Select>\r\n                <Select.Option value=\"hotizontal\">Horizontal</Select.Option>\r\n                <Select.Option value=\"vertical\">Vertical</Select.Option>\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item label=\"Offset\" colon={false}>\r\n            {getFieldDecorator(\"animation.offset\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\",\r\n                  min: 1,\r\n                  max: 10\r\n                }\r\n              ],\r\n              initialValue: data.animation.offset || 1\r\n            })(<Slider min={1} max={10} step={1} />)}\r\n          </Form.Item>\r\n        </React.Fragment>\r\n      );\r\n    } else if (type === \"shake\") {\r\n      component = (\r\n        <React.Fragment>\r\n          <Form.Item label=\"Shake Type\" colon={false}>\r\n            {getFieldDecorator(\"animation.shake\", {\r\n              initialValue: data.animation.shake || \"hotizontal\"\r\n            })(\r\n              <Select>\r\n                <Select.Option value=\"hotizontal\">Horizontal</Select.Option>\r\n                <Select.Option value=\"vertical\">Vertical</Select.Option>\r\n              </Select>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item label=\"Offset\" colon={false}>\r\n            {getFieldDecorator(\"animation.offset\", {\r\n              rules: [\r\n                {\r\n                  type: \"number\",\r\n                  min: 1,\r\n                  max: 10\r\n                }\r\n              ],\r\n              initialValue: data.animation.offset || 1\r\n            })(<Slider min={1} max={10} step={1} />)}\r\n          </Form.Item>\r\n        </React.Fragment>\r\n      );\r\n    } else if (type === \"scaling\") {\r\n      component = (\r\n        <Form.Item label=\"Scaling\" colon={false}>\r\n          {getFieldDecorator(\"animation.scale\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 1,\r\n                max: 5\r\n              }\r\n            ],\r\n            initialValue: data.animation.scale || 1\r\n          })(<Slider min={1} max={5} step={0.1} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"rotation\") {\r\n      component = (\r\n        <Form.Item label=\"Angle\" colon={false}>\r\n          {getFieldDecorator(\"animation.angle\", {\r\n            rules: [\r\n              {\r\n                type: \"number\",\r\n                min: 0,\r\n                max: 360\r\n              }\r\n            ],\r\n            initialValue: data.animation.angle || data.angle\r\n          })(<Slider min={0} max={360} />)}\r\n        </Form.Item>\r\n      );\r\n    } else if (type === \"flash\") {\r\n      component = (\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Fill Color\" colon={false}>\r\n              {getFieldDecorator(\"animation.fill\", {\r\n                initialValue: data.animation.fill || data.fill\r\n              })(<ColorPicker />)}\r\n            </Form.Item>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Stroke Color\" colon={false}>\r\n              {getFieldDecorator(\"animation.stroke\", {\r\n                initialValue: data.animation.stroke || data.stroke\r\n              })(<ColorPicker />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    } else {\r\n      component = (\r\n        <Row>\r\n          <Col span={12}>\r\n            <Form.Item label=\"Value\" colon={false}>\r\n              {getFieldDecorator(\"animation.value\", {\r\n                rules: [\r\n                  {\r\n                    type: \"number\",\r\n                    min: 1,\r\n                    max: 10\r\n                  }\r\n                ],\r\n                initialValue: data.animation.value || 1\r\n              })(<InputNumber min={1} max={10} />)}\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n    return component;\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Form, Input } from \"antd\";\r\n\r\nimport Canvas from \"../../canvas/Canvas\";\r\nimport DataSourceProperty from \"../properties/DataSourceProperty\";\r\n\r\nclass DataSourceModal extends Component {\r\n  static propTypes = {\r\n    form: PropTypes.any,\r\n    visible: PropTypes.bool,\r\n    animation: PropTypes.object,\r\n    onOk: PropTypes.func,\r\n    onCancel: PropTypes.func\r\n  };\r\n\r\n  state = {\r\n    width: 150,\r\n    height: 150\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.waitForContainerRender(this.containerRef);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    nextProps.form.resetFields();\r\n  }\r\n\r\n  waitForContainerRender = container => {\r\n    setTimeout(() => {\r\n      if (container) {\r\n        this.setState({\r\n          width: container.clientWidth,\r\n          height: container.clientHeight\r\n        });\r\n        return;\r\n      }\r\n      this.waitForContainerRender(this.containerRef);\r\n    }, 5);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      form,\r\n      visible,\r\n      animation,\r\n      onOk,\r\n      onCancel,\r\n      validateTitle,\r\n      onChange\r\n    } = this.props;\r\n    const { width, height } = this.state;\r\n    return (\r\n      <Modal onOk={onOk} onCancel={onCancel} visible={visible}>\r\n        <Form.Item\r\n          label=\"Title\"\r\n          required\r\n          colon={false}\r\n          hasFeedback\r\n          help={validateTitle.help}\r\n          validateStatus={validateTitle.validateStatus}\r\n        >\r\n          <Input\r\n            value={animation.title}\r\n            onChange={e => {\r\n              onChange(\r\n                null,\r\n                { animation: { title: e.target.value } },\r\n                { animation: { ...animation, title: e.target.value } }\r\n              );\r\n            }}\r\n          />\r\n        </Form.Item>\r\n        {DataSourceProperty.render(this.canvasRef, form, { animation })}\r\n        <div\r\n          ref={c => {\r\n            this.containerRef = c;\r\n          }}\r\n        >\r\n          <Canvas\r\n            ref={this.canvasRef}\r\n            editable={false}\r\n            width={width}\r\n            height={height}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({\r\n  onValuesChange: (props, changedValues, allValues) => {\r\n    const { onChange } = props;\r\n    onChange(props, changedValues, allValues);\r\n  }\r\n})(DataSourceModal);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { List, Button, Avatar } from \"antd\";\r\n\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nclass DataSourceList extends Component {\r\n  static propTypes = {\r\n    dataSources: PropTypes.array,\r\n    onEdit: PropTypes.func,\r\n    onDelete: PropTypes.func\r\n  };\r\n\r\n  render() {\r\n    const { dataSources, onEdit, onDelete } = this.props;\r\n    return (\r\n      <List\r\n        dataSource={dataSources}\r\n        renderItem={(dataSource, index) => {\r\n          const actions = [\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onEdit(dataSource, index);\r\n              }}\r\n            >\r\n              <Icon name=\"edit\" />\r\n            </Button>,\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onDelete(index);\r\n              }}\r\n            >\r\n              <Icon name=\"times\" />\r\n            </Button>\r\n          ];\r\n          return (\r\n            <List.Item actions={actions}>\r\n              <List.Item.Meta\r\n                avatar={<Avatar>{index}</Avatar>}\r\n                title={dataSource.title}\r\n                description={dataSource.type}\r\n              />\r\n            </List.Item>\r\n          );\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSourceList;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Button } from \"antd\";\r\n\r\nimport { FlexBox } from \"../../flex\";\r\nimport DataSourceModal from \"./DataSourceModal\";\r\nimport DataSourceList from \"./DataSourceList\";\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nclass DataSources extends Component {\r\n  static propTypes = {\r\n    dataSources: PropTypes.array\r\n  };\r\n\r\n  static defaultProps = {\r\n    dataSources: []\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef = React.createRef();\r\n  }\r\n\r\n  state = {\r\n    dataSource: {},\r\n    visible: false,\r\n    validateTitle: {\r\n      validateStatus: \"\",\r\n      help: \"\"\r\n    },\r\n    current: \"add\"\r\n  };\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      if (this.state.validateTitle.validateStatus === \"error\") {\r\n        return;\r\n      }\r\n      if (!this.state.dataSource.title) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid()\r\n        });\r\n        return;\r\n      }\r\n      if (this.state.current === \"add\") {\r\n        if (Object.keys(this.state.dataSource).length === 1) {\r\n          this.modalRef.validateFields((err, values) => {\r\n            Object.assign(this.state.dataSource, values);\r\n          });\r\n        }\r\n        this.props.dataSources.push(this.state.dataSource);\r\n      } else {\r\n        this.props.dataSources.splice(\r\n          this.state.index,\r\n          1,\r\n          this.state.dataSource\r\n        );\r\n      }\r\n      this.setState(\r\n        {\r\n          visible: false,\r\n          dataSource: {}\r\n        },\r\n        () => {\r\n          this.props.onChangeDataSources(this.props.dataSources);\r\n        }\r\n      );\r\n    },\r\n    onCancel: () => {\r\n      this.setState({\r\n        visible: false,\r\n        dataSource: {},\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        }\r\n      });\r\n    },\r\n    onAdd: () => {\r\n      this.setState({\r\n        visible: true,\r\n        dataSource: {},\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"add\"\r\n      });\r\n    },\r\n    onEdit: (dataSource, index) => {\r\n      this.setState({\r\n        visible: true,\r\n        dataSource,\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"modify\",\r\n        index\r\n      });\r\n    },\r\n    onDelete: index => {\r\n      this.props.dataSources.splice(index, 1);\r\n      this.props.onChangeDataSources(this.props.dataSources);\r\n    },\r\n    onClear: () => {\r\n      this.props.onChangeDataSources([]);\r\n    },\r\n    onChange: (props, changedValues, allValues) => {\r\n      const field = Object.keys(changedValues)[0];\r\n      const isTitle = field === \"title\";\r\n      if (isTitle) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid(changedValues[field])\r\n        });\r\n      }\r\n      this.setState({\r\n        dataSource: { title: this.state.dataSource.title, ...allValues }\r\n      });\r\n    },\r\n    onValid: value => {\r\n      if (!value || !value.length) {\r\n        return {\r\n          validateStatus: \"error\",\r\n          help: \"Please input title.\"\r\n        };\r\n      }\r\n      const exist = this.props.dataSources.some(\r\n        dataSource => dataSource.title === value\r\n      );\r\n      if (!exist) {\r\n        return {\r\n          validateStatus: \"success\",\r\n          help: \"\"\r\n        };\r\n      }\r\n      return {\r\n        validateStatus: \"error\",\r\n        help: \"Already exist title.\"\r\n      };\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { dataSources } = this.props;\r\n    const { visible, dataSource, validateTitle } = this.state;\r\n    const {\r\n      onOk,\r\n      onCancel,\r\n      onAdd,\r\n      onEdit,\r\n      onDelete,\r\n      onClear,\r\n      onChange,\r\n      onValid\r\n    } = this.handlers;\r\n    return (\r\n      <Form>\r\n        <FlexBox flexDirection=\"column\">\r\n          <FlexBox justifyContent=\"flex-end\" style={{ padding: 8 }}>\r\n            <Button className=\"rde-action-btn\" shape=\"circle\" onClick={onAdd}>\r\n              <Icon name=\"plus\" />\r\n            </Button>\r\n            <Button className=\"rde-action-btn\" shape=\"circle\" onClick={onClear}>\r\n              <Icon name=\"times\" />\r\n            </Button>\r\n            <DataSourceModal\r\n              ref={c => {\r\n                this.modalRef = c;\r\n              }}\r\n              validateTitle={validateTitle}\r\n              visible={visible}\r\n              onOk={onOk}\r\n              dataSource={dataSource}\r\n              onCancel={onCancel}\r\n              onChange={onChange}\r\n              onValid={onValid}\r\n            />\r\n          </FlexBox>\r\n          <DataSourceList\r\n            dataSources={dataSources}\r\n            onEdit={onEdit}\r\n            onDelete={onDelete}\r\n          />\r\n        </FlexBox>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSources;\r\n","export default class UnsafetyWordException {\r\n    constructor() {\r\n        this.message = 'Includes unsafety word.';\r\n        this.name = 'UnsafetyWordException';\r\n    }\r\n\r\n    toString() {\r\n        return `${this.name}: ${this.message}`;\r\n    }\r\n}\r\n","export default class NoExistWordException {\r\n    constructor() {\r\n        this.message = 'Does not exist word.';\r\n        this.name = 'NoExistWordException';\r\n    }\r\n\r\n    toString() {\r\n        return `${this.name}: ${this.message}`;\r\n    }\r\n}\r\n","import UnsafetyWordException from '../exception/UnsafetyWordException';\r\nimport NoExistWordException from '../exception/NoExistWordException';\r\n\r\nconst excludeWords = [\r\n    'window',\r\n    'Window',\r\n    'alert',\r\n    'console',\r\n    'this',\r\n    'eval',\r\n    'new',\r\n    'function',\r\n    'Function',\r\n    'document',\r\n];\r\n\r\nconst includeWords = [\r\n    'return',\r\n];\r\n\r\nconst parameters = [\r\n    'value',\r\n    'animations',\r\n    'styles',\r\n    'userProperty',\r\n];\r\n\r\nclass SandBox {\r\n    /**\r\n     *Creates an instance of SandBox.\r\n     * @param {{ excludeWords: string[], includeWords: string[] }} params\r\n     * @memberof SandBox\r\n     */\r\n    constructor(params = {}) {\r\n        this.excludeWords = params.excludeWords || excludeWords;\r\n        this.includeWords = params.includeWords || includeWords;\r\n    }\r\n\r\n    // eslint-disable-next-line class-methods-use-this\r\n    verify(code) {\r\n        const newCode = code.toString();\r\n        if (this.excludeWords.some(word => code.includes(word))) {\r\n            throw new UnsafetyWordException();\r\n        }\r\n        if (!this.includeWords.some(word => code.includes(word))) {\r\n            throw new NoExistWordException();\r\n        }\r\n        // eslint-disable-next-line no-new-func\r\n        return new Function(parameters, `\"use strict\"; ${newCode}`);\r\n    }\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    compile(code) {\r\n        try {\r\n            return this.verify(code);\r\n        } catch (error) {\r\n            if (error.toString) {\r\n                console.error(error.toString());\r\n            } else {\r\n                console.error(error.message);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default SandBox;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { List, Button, Avatar } from \"antd\";\r\n\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nclass AnimationList extends Component {\r\n  static propTypes = {\r\n    animations: PropTypes.array,\r\n    onEdit: PropTypes.func,\r\n    onDelete: PropTypes.func\r\n  };\r\n\r\n  render() {\r\n    const { animations, onEdit, onDelete } = this.props;\r\n    return (\r\n      <List\r\n        dataSource={animations}\r\n        renderItem={(animation, index) => {\r\n          const actions = [\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onEdit(animation, index);\r\n              }}\r\n            >\r\n              <Icon name=\"edit\" />\r\n            </Button>,\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onDelete(index);\r\n              }}\r\n            >\r\n              <Icon name=\"times\" />\r\n            </Button>\r\n          ];\r\n          return (\r\n            <List.Item actions={actions}>\r\n              <List.Item.Meta\r\n                avatar={<Avatar>{index}</Avatar>}\r\n                title={animation.title}\r\n                description={animation.type}\r\n              />\r\n            </List.Item>\r\n          );\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default AnimationList;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Form, Input } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Canvas from \"../../canvas/Canvas\";\r\nimport AnimationProperty from \"../properties/AnimationProperty\";\r\n\r\nclass AnimationModal extends Component {\r\n  static propTypes = {\r\n    form: PropTypes.any,\r\n    visible: PropTypes.bool,\r\n    animation: PropTypes.object,\r\n    onOk: PropTypes.func,\r\n    onCancel: PropTypes.func\r\n  };\r\n\r\n  state = {\r\n    width: 150,\r\n    height: 150\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.waitForContainerRender(this.containerRef);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (!nextProps.visible) {\r\n      if (this.canvasRef) {\r\n        this.canvasRef.handler.animationHandler.stop(\"animations\");\r\n      }\r\n      return;\r\n    }\r\n    if (\r\n      JSON.stringify(nextProps.animation) !==\r\n      JSON.stringify(this.props.animation)\r\n    ) {\r\n      this.waitForCanvasRender(this.canvasRef, nextProps.animation);\r\n    }\r\n    nextProps.form.resetFields();\r\n  }\r\n\r\n  waitForCanvasRender = (canvas, animation) => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        canvas.handlers.setById(\"animations\", \"animation\", animation);\r\n        return;\r\n      }\r\n      this.waitForCanvasRender(this.canvasRef, animation);\r\n    }, 5);\r\n  };\r\n\r\n  waitForContainerRender = container => {\r\n    setTimeout(() => {\r\n      if (container) {\r\n        this.setState(\r\n          {\r\n            width: container.clientWidth,\r\n            height: container.clientHeight\r\n          },\r\n          () => {\r\n            const option = {\r\n              type: \"i-text\",\r\n              text: \"\\uf3c5\",\r\n              fontFamily: \"Font Awesome 5 Free\",\r\n              fontWeight: 900,\r\n              fontSize: 60,\r\n              width: 30,\r\n              height: 30,\r\n              editable: false,\r\n              name: \"New marker\",\r\n              tooltip: {\r\n                enabled: false\r\n              },\r\n              left: 200,\r\n              top: 50,\r\n              id: \"animations\",\r\n              fill: \"rgba(0, 0, 0, 1)\",\r\n              stroke: \"rgba(255, 255, 255, 0)\"\r\n            };\r\n            this.canvasRef.handler.add(option);\r\n          }\r\n        );\r\n        return;\r\n      }\r\n      this.waitForContainerRender(this.containerRef);\r\n    }, 5);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      form,\r\n      visible,\r\n      animation,\r\n      onOk,\r\n      onCancel,\r\n      validateTitle,\r\n      onChange\r\n    } = this.props;\r\n    const { width, height } = this.state;\r\n    return (\r\n      <Modal onOk={onOk} onCancel={onCancel} visible={visible}>\r\n        <Form.Item\r\n          label={i18n.t(\"common.title\")}\r\n          required\r\n          colon={false}\r\n          hasFeedback\r\n          help={validateTitle.help}\r\n          validateStatus={validateTitle.validateStatus}\r\n        >\r\n          <Input\r\n            value={animation.title}\r\n            onChange={e => {\r\n              onChange(\r\n                null,\r\n                { animation: { title: e.target.value } },\r\n                { animation: { ...animation, title: e.target.value } }\r\n              );\r\n            }}\r\n          />\r\n        </Form.Item>\r\n        {AnimationProperty.render(this.canvasRef, form, {\r\n          animation,\r\n          id: \"animations\"\r\n        })}\r\n        <div\r\n          ref={c => {\r\n            this.containerRef = c;\r\n          }}\r\n        >\r\n          <Canvas\r\n            ref={c => {\r\n              this.canvasRef = c;\r\n            }}\r\n            editable={false}\r\n            canvasOption={{ width, height, backgroundColor: \"#f3f3f3\" }}\r\n            workareaOption={{ backgroundColor: \"transparent\" }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({\r\n  onValuesChange: (props, changedValues, allValues) => {\r\n    const { onChange } = props;\r\n    onChange(props, changedValues, allValues);\r\n  }\r\n})(AnimationModal);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Button } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport { FlexBox } from \"../../flex\";\r\nimport AnimationList from \"./AnimationList\";\r\nimport AnimationModal from \"./AnimationModal\";\r\nimport Icon from \"../../icon/Icon\";\r\nimport Scrollbar from \"../../common/Scrollbar\";\r\n\r\nconst initialAnimation = {\r\n  type: \"none\",\r\n  loop: true,\r\n  autoplay: true,\r\n  delay: 100,\r\n  duration: 1000\r\n};\r\n\r\nclass Animations extends Component {\r\n  static propTypes = {\r\n    animations: PropTypes.array,\r\n    onChangeAnimations: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    animations: []\r\n  };\r\n\r\n  state = {\r\n    animation: initialAnimation,\r\n    visible: false,\r\n    validateTitle: {\r\n      validateStatus: \"\",\r\n      help: \"\"\r\n    },\r\n    current: \"add\"\r\n  };\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      if (this.state.validateTitle.validateStatus === \"error\") {\r\n        return;\r\n      }\r\n      if (!this.state.animation.title) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid()\r\n        });\r\n        return;\r\n      }\r\n      if (!this.state.animation.type) {\r\n        this.state.animation.type = \"none\";\r\n      }\r\n      if (Object.keys(this.state.animation).length === 2) {\r\n        this.modalRef.validateFields((err, values) => {\r\n          Object.assign(this.state.animation, values.animation);\r\n        });\r\n      }\r\n      if (this.state.current === \"add\") {\r\n        this.props.animations.push(this.state.animation);\r\n      } else {\r\n        this.props.animations.splice(this.state.index, 1, this.state.animation);\r\n      }\r\n      this.setState(\r\n        {\r\n          visible: false,\r\n          animation: {}\r\n        },\r\n        () => {\r\n          this.props.onChangeAnimations(this.props.animations);\r\n        }\r\n      );\r\n    },\r\n    onCancel: () => {\r\n      this.setState({\r\n        visible: false,\r\n        animation: initialAnimation,\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        }\r\n      });\r\n    },\r\n    onAdd: () => {\r\n      this.setState({\r\n        visible: true,\r\n        animation: initialAnimation,\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"add\"\r\n      });\r\n    },\r\n    onEdit: (animation, index) => {\r\n      this.setState({\r\n        visible: true,\r\n        animation,\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"modify\",\r\n        index\r\n      });\r\n    },\r\n    onDelete: index => {\r\n      this.props.animations.splice(index, 1);\r\n      this.props.onChangeAnimations(this.props.animations);\r\n    },\r\n    onClear: () => {\r\n      this.props.onChangeAnimations([]);\r\n    },\r\n    onChange: (props, changedValues, allValues) => {\r\n      const fields = changedValues[Object.keys(changedValues)[0]];\r\n      const field = Object.keys(fields)[0];\r\n      const isTitle = field === \"title\";\r\n      if (isTitle) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid(fields[field])\r\n        });\r\n      }\r\n      this.setState({\r\n        animation: {\r\n          title: this.state.animation.title,\r\n          ...initialAnimation,\r\n          ...allValues[Object.keys(allValues)[0]]\r\n        }\r\n      });\r\n    },\r\n    onValid: value => {\r\n      if (!value || !value.length) {\r\n        return {\r\n          validateStatus: \"error\",\r\n          help: i18n.t(\"validation.enter-property\", {\r\n            arg: i18n.t(\"common.title\")\r\n          })\r\n        };\r\n      }\r\n      const exist = this.props.animations.some(\r\n        animation => animation.title === value\r\n      );\r\n      if (!exist) {\r\n        return {\r\n          validateStatus: \"success\",\r\n          help: \"\"\r\n        };\r\n      }\r\n      return {\r\n        validateStatus: \"error\",\r\n        help: i18n.t(\"validation.already-property\", {\r\n          arg: i18n.t(\"common.title\")\r\n        })\r\n      };\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { animations } = this.props;\r\n    const { visible, animation, validateTitle } = this.state;\r\n    const {\r\n      onOk,\r\n      onCancel,\r\n      onAdd,\r\n      onEdit,\r\n      onDelete,\r\n      onClear,\r\n      onChange,\r\n      onValid\r\n    } = this.handlers;\r\n    return (\r\n      <Scrollbar>\r\n        <Form>\r\n          <FlexBox flexDirection=\"column\">\r\n            <FlexBox justifyContent=\"flex-end\" style={{ padding: 8 }}>\r\n              <Button className=\"rde-action-btn\" shape=\"circle\" onClick={onAdd}>\r\n                <Icon name=\"plus\" />\r\n              </Button>\r\n              <Button\r\n                className=\"rde-action-btn\"\r\n                shape=\"circle\"\r\n                onClick={onClear}\r\n              >\r\n                <Icon name=\"times\" />\r\n              </Button>\r\n              <AnimationModal\r\n                ref={c => {\r\n                  this.modalRef = c;\r\n                }}\r\n                validateTitle={validateTitle}\r\n                visible={visible}\r\n                onOk={onOk}\r\n                animation={animation}\r\n                onCancel={onCancel}\r\n                onChange={onChange}\r\n                onValid={onValid}\r\n              />\r\n            </FlexBox>\r\n            <AnimationList\r\n              animations={animations}\r\n              onEdit={onEdit}\r\n              onDelete={onDelete}\r\n            />\r\n          </FlexBox>\r\n        </Form>\r\n      </Scrollbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Animations;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { List, Button, Avatar } from \"antd\";\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nclass StyleList extends Component {\r\n  static propTypes = {\r\n    styles: PropTypes.array,\r\n    onEdit: PropTypes.func,\r\n    onDelete: PropTypes.func\r\n  };\r\n\r\n  render() {\r\n    const { styles, onEdit, onDelete } = this.props;\r\n    return (\r\n      <List\r\n        dataSource={styles}\r\n        renderItem={(style, index) => {\r\n          const actions = [\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onEdit(style, index);\r\n              }}\r\n            >\r\n              <Icon name=\"edit\" />\r\n            </Button>,\r\n            <Button\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              onClick={() => {\r\n                onDelete(index);\r\n              }}\r\n            >\r\n              <Icon name=\"times\" />\r\n            </Button>\r\n          ];\r\n          const description = `fill: ${style.fill}, opacity: ${style.opacity}`;\r\n          return (\r\n            <List.Item actions={actions}>\r\n              <List.Item.Meta\r\n                avatar={<Avatar>{index}</Avatar>}\r\n                title={style.title}\r\n                description={description}\r\n              />\r\n            </List.Item>\r\n          );\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default StyleList;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Modal, Form, Input } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport Canvas from \"../../canvas/Canvas\";\r\nimport StyleProperty from \"../properties/StyleProperty\";\r\n\r\nclass StyleModal extends Component {\r\n  static propTypes = {\r\n    form: PropTypes.any,\r\n    visible: PropTypes.bool,\r\n    style: PropTypes.object,\r\n    onOk: PropTypes.func,\r\n    onCancel: PropTypes.func\r\n  };\r\n\r\n  state = {\r\n    width: 150,\r\n    height: 150\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.waitForContainerRender(this.containerRef);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    let { style } = nextProps;\r\n    if (!style || !Object.keys(style).length) {\r\n      style = {\r\n        fill: \"rgba(0, 0, 0, 1)\",\r\n        opacity: 1,\r\n        stroke: \"rgba(255, 255, 255, 0)\",\r\n        strokeWidth: 1\r\n      };\r\n    }\r\n    delete style.strokeDashArray;\r\n    this.waitForCanvasRender(this.canvasRef, style);\r\n    nextProps.form.resetFields();\r\n  }\r\n\r\n  waitForCanvasRender = (canvas, style) => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        Object.keys(style).forEach(key => {\r\n          canvas.handlers.setById(\"styles\", key, style[key]);\r\n        });\r\n        return;\r\n      }\r\n      this.waitForCanvasRender(this.canvasRef, style);\r\n    }, 5);\r\n  };\r\n\r\n  waitForContainerRender = container => {\r\n    setTimeout(() => {\r\n      if (container) {\r\n        this.setState(\r\n          {\r\n            width: container.clientWidth,\r\n            height: container.clientHeight\r\n          },\r\n          () => {\r\n            const option = {\r\n              type: \"i-text\",\r\n              text: \"\\uf3c5\",\r\n              fontFamily: \"Font Awesome 5 Free\",\r\n              fontWeight: 900,\r\n              fontSize: 60,\r\n              width: 30,\r\n              height: 30,\r\n              editable: false,\r\n              name: \"New marker\",\r\n              tooltip: {\r\n                enabled: false\r\n              },\r\n              left: 200,\r\n              top: 50,\r\n              id: \"styles\"\r\n            };\r\n            this.canvasRef.handler.add(option);\r\n          }\r\n        );\r\n        return;\r\n      }\r\n      this.waitForContainerRender(this.containerRef);\r\n    }, 5);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      form,\r\n      visible,\r\n      style,\r\n      onOk,\r\n      onCancel,\r\n      validateTitle,\r\n      onChange\r\n    } = this.props;\r\n    const { width, height } = this.state;\r\n    return (\r\n      <Modal onOk={onOk} onCancel={onCancel} visible={visible}>\r\n        <Form.Item\r\n          label={i18n.t(\"common.title\")}\r\n          required\r\n          colon={false}\r\n          hasFeedback\r\n          help={validateTitle.help}\r\n          validateStatus={validateTitle.validateStatus}\r\n        >\r\n          <Input\r\n            value={style.title}\r\n            onChange={e => {\r\n              onChange(\r\n                null,\r\n                { title: e.target.value },\r\n                { ...style, title: e.target.value }\r\n              );\r\n            }}\r\n          />\r\n        </Form.Item>\r\n        {StyleProperty.render(this.canvasRef, form, style)}\r\n        <div\r\n          ref={c => {\r\n            this.containerRef = c;\r\n          }}\r\n        >\r\n          <Canvas\r\n            ref={c => {\r\n              this.canvasRef = c;\r\n            }}\r\n            editable={false}\r\n            canvasOption={{ width, height, backgroundColor: \"#f3f3f3\" }}\r\n            workareaOption={{ backgroundColor: \"transparent\" }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({\r\n  onValuesChange: (props, changedValues, allValues) => {\r\n    const { onChange } = props;\r\n    onChange(props, changedValues, allValues);\r\n  }\r\n})(StyleModal);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Form, Button } from \"antd\";\r\nimport i18n from \"i18next\";\r\n\r\nimport { FlexBox } from \"../../flex\";\r\nimport StyleList from \"./StyleList\";\r\nimport StyleModal from \"./StyleModal\";\r\nimport Icon from \"../../icon/Icon\";\r\n\r\nclass Styles extends Component {\r\n  static propTypes = {\r\n    styles: PropTypes.array,\r\n    onChangeStyles: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    styles: []\r\n  };\r\n\r\n  state = {\r\n    style: {},\r\n    visible: false,\r\n    validateTitle: {\r\n      validateStatus: \"\",\r\n      help: \"\"\r\n    },\r\n    current: \"add\"\r\n  };\r\n\r\n  handlers = {\r\n    onOk: () => {\r\n      if (this.state.validateTitle.validateStatus === \"error\") {\r\n        return;\r\n      }\r\n      if (!this.state.style.title) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid()\r\n        });\r\n        return;\r\n      }\r\n      if (this.state.current === \"add\") {\r\n        if (Object.keys(this.state.style).length === 1) {\r\n          this.modalRef.validateFields((err, values) => {\r\n            Object.assign(this.state.style, values);\r\n          });\r\n        }\r\n        this.props.styles.push(this.state.style);\r\n      } else {\r\n        this.props.styles.splice(this.state.index, 1, this.state.style);\r\n      }\r\n      this.setState(\r\n        {\r\n          visible: false,\r\n          style: {}\r\n        },\r\n        () => {\r\n          this.props.onChangeStyles(this.props.styles);\r\n        }\r\n      );\r\n    },\r\n    onCancel: () => {\r\n      this.setState({\r\n        visible: false,\r\n        style: {},\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        }\r\n      });\r\n    },\r\n    onAdd: () => {\r\n      this.setState({\r\n        visible: true,\r\n        style: {},\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"add\"\r\n      });\r\n    },\r\n    onEdit: (style, index) => {\r\n      this.setState({\r\n        visible: true,\r\n        style,\r\n        validateTitle: {\r\n          validateStatus: \"\",\r\n          help: \"\"\r\n        },\r\n        current: \"modify\",\r\n        index\r\n      });\r\n    },\r\n    onDelete: index => {\r\n      this.props.styles.splice(index, 1);\r\n      this.props.onChangeStyles(this.props.styles);\r\n    },\r\n    onClear: () => {\r\n      this.props.onChangeStyles([]);\r\n    },\r\n    onChange: (props, changedValues, allValues) => {\r\n      const field = Object.keys(changedValues)[0];\r\n      const isTitle = field === \"title\";\r\n      if (isTitle) {\r\n        this.setState({\r\n          validateTitle: this.handlers.onValid(changedValues[field])\r\n        });\r\n      }\r\n      this.setState({\r\n        style: { title: this.state.style.title, ...allValues }\r\n      });\r\n    },\r\n    onValid: value => {\r\n      if (!value || !value.length) {\r\n        return {\r\n          validateStatus: \"error\",\r\n          help: i18n.t(\"validation.enter-property\", {\r\n            arg: i18n.t(\"common.title\")\r\n          })\r\n        };\r\n      }\r\n      const exist = this.props.styles.some(style => style.title === value);\r\n      if (!exist) {\r\n        return {\r\n          validateStatus: \"success\",\r\n          help: \"\"\r\n        };\r\n      }\r\n      return {\r\n        validateStatus: \"error\",\r\n        help: i18n.t(\"validation.already-property\", {\r\n          arg: i18n.t(\"common.title\")\r\n        })\r\n      };\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { styles } = this.props;\r\n    const { visible, style, validateTitle } = this.state;\r\n    const {\r\n      onOk,\r\n      onCancel,\r\n      onAdd,\r\n      onEdit,\r\n      onDelete,\r\n      onClear,\r\n      onChange,\r\n      onValid\r\n    } = this.handlers;\r\n    return (\r\n      <Form>\r\n        <FlexBox flexDirection=\"column\">\r\n          <FlexBox justifyContent=\"flex-end\" style={{ padding: 8 }}>\r\n            <Button className=\"rde-action-btn\" shape=\"circle\" onClick={onAdd}>\r\n              <Icon name=\"plus\" />\r\n            </Button>\r\n            <Button className=\"rde-action-btn\" shape=\"circle\" onClick={onClear}>\r\n              <Icon name=\"times\" />\r\n            </Button>\r\n            <StyleModal\r\n              ref={c => {\r\n                this.modalRef = c;\r\n              }}\r\n              validateTitle={validateTitle}\r\n              visible={visible}\r\n              onOk={onOk}\r\n              style={style}\r\n              onCancel={onCancel}\r\n              onChange={onChange}\r\n              onValid={onValid}\r\n            />\r\n          </FlexBox>\r\n          <StyleList styles={styles} onEdit={onEdit} onDelete={onDelete} />\r\n        </FlexBox>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Styles;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport i18n from \"i18next\";\r\n\r\nimport { FlexBox, FlexItem } from \"../flex\";\r\nimport ImageMapList from \"./ImageMapList\";\r\nimport { CommonButton } from \"../common\";\r\nimport Icon from \"../icon/Icon\";\r\n\r\nclass ImageMapHeaderToolbar extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object\r\n  };\r\n\r\n  render() {\r\n    const { canvasRef, selectedItem } = this.props;\r\n    const isCropping = canvasRef\r\n      ? canvasRef.handler.interactionMode === \"crop\"\r\n      : false;\r\n    return (\r\n      <FlexBox className=\"rde-editor-header-toolbar-container\" flex=\"1\">\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-list\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            icon=\"layer-group\"\r\n            tooltipTitle={i18n.t(\"action.canvas-list\")}\r\n          />\r\n          <div className=\"rde-canvas-list\">\r\n            <ImageMapList canvasRef={canvasRef} selectedItem={selectedItem} />\r\n          </div>\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-alignment\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.bringForward()}\r\n            icon=\"angle-up\"\r\n            tooltipTitle={i18n.t(\"action.bring-forward\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.sendBackwards()}\r\n            icon=\"angle-down\"\r\n            tooltipTitle={i18n.t(\"action.send-backwards\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.bringToFront()}\r\n            icon=\"angle-double-up\"\r\n            tooltipTitle={i18n.t(\"action.bring-to-front\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.sendToBack()}\r\n            icon=\"angle-double-down\"\r\n            tooltipTitle={i18n.t(\"action.send-to-back\")}\r\n          />\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-alignment\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.alignmentHandler.left()}\r\n            icon=\"align-left\"\r\n            tooltipTitle={i18n.t(\"action.align-left\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.alignmentHandler.center()}\r\n            icon=\"align-center\"\r\n            tooltipTitle={i18n.t(\"action.align-center\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.alignmentHandler.right()}\r\n            icon=\"align-right\"\r\n            tooltipTitle={i18n.t(\"action.align-right\")}\r\n          />\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-group\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.toGroup()}\r\n            icon=\"object-group\"\r\n            tooltipTitle={i18n.t(\"action.object-group\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.toActiveSelection()}\r\n            icon=\"object-ungroup\"\r\n            tooltipTitle={i18n.t(\"action.object-ungroup\")}\r\n          />\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-crop\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={\r\n              canvasRef ? !canvasRef.handler.cropHandler.validType() : true\r\n            }\r\n            onClick={() => canvasRef.handler.cropHandler.start()}\r\n            icon=\"crop\"\r\n            tooltipTitle={i18n.t(\"action.crop\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={\r\n              canvasRef ? !canvasRef.handler.cropHandler.cropRect : true\r\n            }\r\n            onClick={() => canvasRef.handler.cropHandler.finish()}\r\n            icon=\"check\"\r\n            tooltipTitle={i18n.t(\"action.crop-save\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={\r\n              canvasRef ? !canvasRef.handler.cropHandler.cropRect : true\r\n            }\r\n            onClick={() => canvasRef.handler.cropHandler.cancel()}\r\n            icon=\"times\"\r\n            tooltipTitle={i18n.t(\"action.crop-cancel\")}\r\n          />\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-operation\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.saveImage()}\r\n            icon=\"image\"\r\n            tooltipTitle={i18n.t(\"action.image-save\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.duplicate()}\r\n            icon=\"clone\"\r\n            tooltipTitle={i18n.t(\"action.clone\")}\r\n          />\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            disabled={isCropping}\r\n            onClick={() => canvasRef.handler.remove()}\r\n            icon=\"trash\"\r\n            tooltipTitle={i18n.t(\"action.delete\")}\r\n          />\r\n        </FlexItem>\r\n        <FlexItem className=\"rde-canvas-toolbar rde-canvas-toolbar-history\">\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            disabled={\r\n              isCropping ||\r\n              (canvasRef && !canvasRef.handler.transactionHandler.undos.length)\r\n            }\r\n            onClick={() => canvasRef.handler.transactionHandler.undo()}\r\n          >\r\n            <Icon name=\"undo-alt\" style={{ marginRight: 8 }} />\r\n            Undo\r\n          </CommonButton>\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            disabled={\r\n              isCropping ||\r\n              (canvasRef && !canvasRef.handler.transactionHandler.redos.length)\r\n            }\r\n            onClick={() => canvasRef.handler.transactionHandler.redo()}\r\n          >\r\n            Redo\r\n            <Icon name=\"redo-alt\" style={{ marginLeft: 8 }} />\r\n          </CommonButton>\r\n        </FlexItem>\r\n      </FlexBox>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapHeaderToolbar;\r\n","import React, { Component } from \"react\";\r\nimport { Badge, Button, Popconfirm, Menu } from \"antd\";\r\nimport debounce from \"lodash/debounce\";\r\nimport i18n from \"i18next\";\r\n\r\nimport ImageMapFooterToolbar from \"./ImageMapFooterToolbar\";\r\nimport ImageMapItems from \"./ImageMapItems\";\r\nimport ImageMapTitle from \"./ImageMapTitle\";\r\nimport ImageMapHeaderToolbar from \"./ImageMapHeaderToolbar\";\r\nimport ImageMapPreview from \"./ImageMapPreview\";\r\nimport ImageMapConfigurations from \"./ImageMapConfigurations\";\r\nimport SandBox from \"../sandbox/SandBox\";\r\nimport ImageFields from \"./ImageFields\";\r\n\r\nimport \"../../libs/fontawesome-5.2.0/css/all.css\";\r\nimport \"../../styles/index.scss\";\r\nimport Container from \"../common/Container\";\r\nimport CommonButton from \"../common/CommonButton\";\r\nimport Canvas from \"../canvas/Canvas\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../../../actions\";\r\n\r\nconst fields = [\r\n  {\r\n    id: 1,\r\n    name: \"serial\",\r\n    type: \"string\",\r\n    label: \"Ký hiệu\",\r\n    position: {\r\n      left: 1330,\r\n      top: 251\r\n    },\r\n    size: {\r\n      width: 139,\r\n      height: 41\r\n    }\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"vendor_name\",\r\n    type: \"string\",\r\n    label: \"Tên bên bán hàng\",\r\n    position: {\r\n      left: 84,\r\n      top: 405\r\n    },\r\n    size: {\r\n      width: 660,\r\n      height: 51\r\n    }\r\n  },\r\n  {\r\n    id: 3,\r\n    name: \"no_id\",\r\n    type: \"number\",\r\n    label: \"Số hóa đơn\",\r\n    position: {\r\n      left: 1251,\r\n      top: 306\r\n    },\r\n    size: {\r\n      width: 112,\r\n      height: 45\r\n    }\r\n  },\r\n  {\r\n    id: 4,\r\n    name: \"date_exp\",\r\n    type: \"date\",\r\n    label: \"Ngày xuất\",\r\n    position: {\r\n      left: 685,\r\n      top: 335\r\n    },\r\n    size: {\r\n      width: 39,\r\n      height: 41\r\n    }\r\n  },\r\n  {\r\n    id: 5,\r\n    name: \"month_exp\",\r\n    type: \"date\",\r\n    label: \"Tháng xuất\",\r\n    position: {\r\n      left: 868,\r\n      top: 336\r\n    },\r\n    size: {\r\n      width: 38,\r\n      height: 40\r\n    }\r\n  },\r\n  {\r\n    id: 6,\r\n    name: \"year_exp\",\r\n    type: \"date\",\r\n    label: \"Năm xuất\",\r\n    position: {\r\n      left: 1018,\r\n      top: 337\r\n    },\r\n    size: {\r\n      width: 68,\r\n      height: 38\r\n    }\r\n  },\r\n  {\r\n    id: 7,\r\n    name: \"name_company\",\r\n    type: \"date\",\r\n    label: \"Tên đơn vị\",\r\n    position: {\r\n      left: 420,\r\n      top: 724\r\n    },\r\n    size: {\r\n      width: 1027,\r\n      height: 43\r\n    }\r\n  },\r\n  {\r\n    id: 8,\r\n    name: \"addr_company\",\r\n    type: \"address\",\r\n    label: \"Địa chỉ\",\r\n    position: {\r\n      left: 310,\r\n      top: 770\r\n    },\r\n    size: {\r\n      width: 1119,\r\n      height: 44\r\n    }\r\n  },\r\n  {\r\n    id: 9,\r\n    name: \"tax_code\",\r\n    type: \"number\",\r\n    label: \"Mã số thuế\",\r\n    position: {\r\n      left: 366,\r\n      top: 861\r\n    },\r\n    size: {\r\n      width: 311,\r\n      height: 33\r\n    }\r\n  },\r\n  {\r\n    id: 10,\r\n    name: \"total_money\",\r\n    type: \"number\",\r\n    label: \"Cộng tiền hàng\",\r\n    position: {\r\n      left: 1305,\r\n      top: 1510\r\n    },\r\n    size: {\r\n      width: 192,\r\n      height: 43\r\n    }\r\n  },\r\n  {\r\n    id: 11,\r\n    name: \"amount_in_word\",\r\n    type: \"string\",\r\n    label: \"Số tiền viết bằng chữ\",\r\n    position: {\r\n      left: 583,\r\n      top: 1560\r\n    },\r\n    size: {\r\n      width: 885,\r\n      height: 44\r\n    }\r\n  },\r\n  {\r\n    id: 12,\r\n    name: \"exchange_rate\",\r\n    type: \"string\",\r\n    label: \"Tỷ giá\",\r\n    position: {\r\n      left: 397,\r\n      top: 1516\r\n    },\r\n    size: {\r\n      width: 347,\r\n      height: 33\r\n    }\r\n  },\r\n  {\r\n    id: 13,\r\n    name: \"signature\",\r\n    type: \"image\",\r\n    label: \"Chữ ký\",\r\n    position: {\r\n      left: 144,\r\n      top: 1630\r\n    },\r\n    size: {\r\n      width: 1391,\r\n      height: 417\r\n    },\r\n    data_type: \"image\"\r\n  }\r\n];\r\n\r\nconst propertiesToInclude = [\r\n  \"id\",\r\n  \"name\",\r\n  \"locked\",\r\n  \"file\",\r\n  \"src\",\r\n  \"link\",\r\n  \"tooltip\",\r\n  \"animation\",\r\n  \"layout\",\r\n  \"workareaWidth\",\r\n  \"workareaHeight\",\r\n  \"videoLoadType\",\r\n  \"autoplay\",\r\n  \"shadow\",\r\n  \"muted\",\r\n  \"loop\",\r\n  \"code\",\r\n  \"icon\",\r\n  \"userProperty\",\r\n  \"trigger\",\r\n  \"configuration\",\r\n  \"superType\",\r\n  \"points\",\r\n  \"svg\",\r\n  \"loadType\"\r\n];\r\n\r\nconst defaultOption = {\r\n  fill: \"rgba(0, 0, 255, 0.1)\",\r\n  stroke: \"rgba(255, 255, 255, 0)\",\r\n  strokeUniform: true,\r\n  resource: {},\r\n  link: {\r\n    enabled: false,\r\n    type: \"resource\",\r\n    state: \"new\",\r\n    dashboard: {}\r\n  },\r\n  tooltip: {\r\n    enabled: true,\r\n    type: \"resource\",\r\n    template: \"<div>{{message.name}}</div>\"\r\n  },\r\n  animation: {\r\n    type: \"none\",\r\n    loop: true,\r\n    autoplay: true,\r\n    delay: 100,\r\n    duration: 1000\r\n  },\r\n  userProperty: {},\r\n  trigger: {\r\n    enabled: false,\r\n    type: \"alarm\",\r\n    script: \"return message.value > 0;\",\r\n    effect: \"style\"\r\n  }\r\n};\r\n\r\nclass ImageMapEditor extends Component {\r\n  state = {\r\n    selectedItem: null,\r\n    zoomRatio: 1,\r\n    preview: false,\r\n    loading: false,\r\n    progress: 0,\r\n    animations: [],\r\n    styles: [],\r\n    dataSources: [],\r\n    editing: false,\r\n    descriptors: {}\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { imgUpload, common, setMainMenuId, setCanvasRef } = this.props;\r\n    this.showLoading(true);\r\n    setMainMenuId(2);\r\n    import(\"./Descriptors.json\").then(descriptors => {\r\n      this.setState(\r\n        {\r\n          descriptors\r\n        },\r\n        () => {\r\n          this.showLoading(false);\r\n        }\r\n      );\r\n    });\r\n    this.setState({\r\n      selectedItem: null\r\n    });\r\n    this.shortcutHandlers.esc();\r\n\r\n    setCanvasRef(this.canvasRef);\r\n  }\r\n\r\n  canvasHandlers = {\r\n    onAdd: target => {\r\n      const { editing } = this.state;\r\n      this.forceUpdate();\r\n      if (!editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      if (target.type === \"activeSelection\") {\r\n        this.canvasHandlers.onSelect(null);\r\n        return;\r\n      }\r\n      this.canvasRef.handler.select(target);\r\n    },\r\n    onSelect: target => {\r\n      const { selectedItem } = this.state;\r\n      if (\r\n        target &&\r\n        target.id &&\r\n        target.id !== \"workarea\" &&\r\n        target.type !== \"activeSelection\"\r\n      ) {\r\n        if (selectedItem && target.id === selectedItem.id) {\r\n          return;\r\n        }\r\n        this.canvasRef.handler.getObjects().forEach(obj => {\r\n          if (obj) {\r\n            this.canvasRef.handler.animationHandler.initAnimation(obj, true);\r\n          }\r\n        });\r\n        this.setState({\r\n          selectedItem: target\r\n        });\r\n        return;\r\n      }\r\n      this.canvasRef.handler.getObjects().forEach(obj => {\r\n        if (obj) {\r\n          this.canvasRef.handler.animationHandler.initAnimation(obj, true);\r\n        }\r\n      });\r\n      this.setState({\r\n        selectedItem: null\r\n      });\r\n    },\r\n    onRemove: () => {\r\n      const { editing } = this.state;\r\n      if (!editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.canvasHandlers.onSelect(null);\r\n    },\r\n    onModified: debounce(() => {\r\n      const { editing } = this.state;\r\n      this.forceUpdate();\r\n      if (!editing) {\r\n        this.changeEditing(true);\r\n      }\r\n    }, 300),\r\n    onZoom: zoom => {\r\n      this.setState({\r\n        zoomRatio: zoom\r\n      });\r\n    },\r\n    onChange: (selectedItem, changedValues, allValues) => {\r\n      const { editing } = this.state;\r\n      if (!editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      const changedKey = Object.keys(changedValues)[0];\r\n      const changedValue = changedValues[changedKey];\r\n      if (allValues.workarea) {\r\n        this.canvasHandlers.onChangeWokarea(\r\n          changedKey,\r\n          changedValue,\r\n          allValues.workarea\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === \"width\" || changedKey === \"height\") {\r\n        this.canvasRef.handler.scaleToResize(allValues.width, allValues.height);\r\n        return;\r\n      }\r\n      if (changedKey === \"locked\") {\r\n        this.canvasRef.handler.setObject({\r\n          lockMovementX: changedValue,\r\n          lockMovementY: changedValue,\r\n          hasControls: !changedValue,\r\n          hoverCursor: changedValue ? \"pointer\" : \"move\",\r\n          editable: !changedValue,\r\n          locked: changedValue\r\n        });\r\n        return;\r\n      }\r\n      if (\r\n        changedKey === \"file\" ||\r\n        changedKey === \"src\" ||\r\n        changedKey === \"code\"\r\n      ) {\r\n        if (selectedItem.type === \"image\") {\r\n          this.canvasRef.handler.setImageById(selectedItem.id, changedValue);\r\n        } else if (selectedItem.superType === \"element\") {\r\n          this.canvasRef.handler.elementHandler.setById(\r\n            selectedItem.id,\r\n            changedValue\r\n          );\r\n        }\r\n        return;\r\n      }\r\n      if (changedKey === \"link\") {\r\n        const link = Object.assign({}, defaultOption.link, allValues.link);\r\n        this.canvasRef.handler.set(changedKey, link);\r\n        return;\r\n      }\r\n      if (changedKey === \"tooltip\") {\r\n        const tooltip = Object.assign(\r\n          {},\r\n          defaultOption.tooltip,\r\n          allValues.tooltip\r\n        );\r\n        this.canvasRef.handler.set(changedKey, tooltip);\r\n        return;\r\n      }\r\n      if (changedKey === \"animation\") {\r\n        const animation = Object.assign(\r\n          {},\r\n          defaultOption.animation,\r\n          allValues.animation\r\n        );\r\n        this.canvasRef.handler.set(changedKey, animation);\r\n        return;\r\n      }\r\n      if (changedKey === \"icon\") {\r\n        const { unicode, styles } = changedValue[Object.keys(changedValue)[0]];\r\n        const uni = parseInt(unicode, 16);\r\n        if (styles[0] === \"brands\") {\r\n          this.canvasRef.handler.set(\"fontFamily\", \"Font Awesome 5 Brands\");\r\n        } else if (styles[0] === \"regular\") {\r\n          this.canvasRef.handler.set(\"fontFamily\", \"Font Awesome 5 Regular\");\r\n        } else {\r\n          this.canvasRef.handler.set(\"fontFamily\", \"Font Awesome 5 Free\");\r\n        }\r\n        this.canvasRef.handler.set(\"text\", String.fromCodePoint(uni));\r\n        this.canvasRef.handler.set(\"icon\", changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === \"shadow\") {\r\n        if (allValues.shadow.enabled) {\r\n          if (\"blur\" in allValues.shadow) {\r\n            this.canvasRef.handler.setShadow(allValues.shadow);\r\n          } else {\r\n            this.canvasRef.handler.setShadow({\r\n              enabled: true,\r\n              blur: 15,\r\n              offsetX: 10,\r\n              offsetY: 10\r\n            });\r\n          }\r\n        } else {\r\n          this.canvasRef.handler.setShadow(null);\r\n        }\r\n        return;\r\n      }\r\n      if (changedKey === \"fontWeight\") {\r\n        this.canvasRef.handler.set(\r\n          changedKey,\r\n          changedValue ? \"bold\" : \"normal\"\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === \"fontStyle\") {\r\n        this.canvasRef.handler.set(\r\n          changedKey,\r\n          changedValue ? \"italic\" : \"normal\"\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === \"textAlign\") {\r\n        this.canvasRef.handler.set(changedKey, Object.keys(changedValue)[0]);\r\n        return;\r\n      }\r\n      if (changedKey === \"trigger\") {\r\n        const trigger = Object.assign(\r\n          {},\r\n          defaultOption.trigger,\r\n          allValues.trigger\r\n        );\r\n        this.canvasRef.handler.set(changedKey, trigger);\r\n        return;\r\n      }\r\n      if (changedKey === \"filters\") {\r\n        const filterKey = Object.keys(changedValue)[0];\r\n        const filterValue = allValues.filters[filterKey];\r\n        if (filterKey === \"gamma\") {\r\n          const rgb = [filterValue.r, filterValue.g, filterValue.b];\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { gamma: rgb }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"brightness\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { brightness: filterValue.brightness }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"contrast\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { contrast: filterValue.contrast }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"saturation\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { saturation: filterValue.saturation }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"hue\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { rotation: filterValue.rotation }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"noise\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { noise: filterValue.noise }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"pixelate\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { blocksize: filterValue.blocksize }\r\n          );\r\n          return;\r\n        }\r\n        if (filterKey === \"blur\") {\r\n          this.canvasRef.handler.imageHandler.applyFilterByType(\r\n            filterKey,\r\n            changedValue[filterKey].enabled,\r\n            { value: filterValue.value }\r\n          );\r\n          return;\r\n        }\r\n        this.canvasRef.handler.imageHandler.applyFilterByType(\r\n          filterKey,\r\n          changedValue[filterKey]\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === \"chartOption\") {\r\n        try {\r\n          const sandbox = new SandBox();\r\n          const compiled = sandbox.compile(changedValue);\r\n          const { animations, styles } = this.state;\r\n          const chartOption = compiled(\r\n            3,\r\n            animations,\r\n            styles,\r\n            selectedItem.userProperty\r\n          );\r\n          selectedItem.setChartOptionStr(changedValue);\r\n          this.canvasRef.handler.elementHandler.setById(\r\n            selectedItem.id,\r\n            chartOption\r\n          );\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n        return;\r\n      }\r\n      this.canvasRef.handler.set(changedKey, changedValue);\r\n    },\r\n    onChangeWokarea: (changedKey, changedValue, allValues) => {\r\n      if (changedKey === \"layout\") {\r\n        this.canvasRef.handler.workareaHandler.setLayout(changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === \"file\" || changedKey === \"src\") {\r\n        this.canvasRef.handler.workareaHandler.setImage(changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === \"width\" || changedKey === \"height\") {\r\n        this.canvasRef.handler.originScaleToResize(\r\n          this.canvasRef.handler.workarea,\r\n          allValues.width,\r\n          allValues.height\r\n        );\r\n        this.canvasRef.canvas.centerObject(this.canvasRef.handler.workarea);\r\n        return;\r\n      }\r\n      this.canvasRef.handler.workarea.set(changedKey, changedValue);\r\n      this.canvasRef.canvas.requestRenderAll();\r\n    },\r\n    onTooltip: (ref, target) => {\r\n      const value = Math.random() * 10 + 1;\r\n      const { animations, styles } = this.state;\r\n      // const { code } = target.trigger;\r\n      // const compile = SandBox.compile(code);\r\n      // const result = compile(value, animations, styles, target.userProperty);\r\n      // console.log(result);\r\n      return (\r\n        <div>\r\n          <div>\r\n            <div>\r\n              <Button>{target.id}</Button>\r\n            </div>\r\n            <Badge count={value} />\r\n          </div>\r\n        </div>\r\n      );\r\n    },\r\n    onClick: (canvas, target) => {\r\n      const { link } = target;\r\n      if (link.state === \"current\") {\r\n        document.location.href = link.url;\r\n        return;\r\n      }\r\n      window.open(link.url);\r\n    },\r\n    onContext: (ref, event, target) => {\r\n      if ((target && target.id === \"workarea\") || !target) {\r\n        const { layerX: left, layerY: top } = event;\r\n        return (\r\n          <Menu>\r\n            <Menu.SubMenu\r\n              key=\"add\"\r\n              style={{ width: 120 }}\r\n              title={i18n.t(\"action.add\")}\r\n            >\r\n              {this.transformList().map(item => {\r\n                const option = Object.assign({}, item.option, { left, top });\r\n                const newItem = Object.assign({}, item, { option });\r\n                return (\r\n                  <Menu.Item style={{ padding: 0 }} key={item.name}>\r\n                    {this.itemsRef.renderItem(newItem, false)}\r\n                  </Menu.Item>\r\n                );\r\n              })}\r\n            </Menu.SubMenu>\r\n          </Menu>\r\n        );\r\n      }\r\n      if (target.type === \"activeSelection\") {\r\n        return (\r\n          <Menu>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.toGroup();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.object-group\")}\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.duplicate();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.clone\")}\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.remove();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.delete\")}\r\n            </Menu.Item>\r\n          </Menu>\r\n        );\r\n      }\r\n      if (target.type === \"group\") {\r\n        return (\r\n          <Menu>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.toActiveSelection();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.object-ungroup\")}\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.duplicate();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.clone\")}\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                this.canvasRef.handler.remove();\r\n              }}\r\n            >\r\n              {i18n.t(\"action.delete\")}\r\n            </Menu.Item>\r\n          </Menu>\r\n        );\r\n      }\r\n      return (\r\n        <Menu>\r\n          <Menu.Item\r\n            onClick={() => {\r\n              this.canvasRef.handler.duplicateById(target.id);\r\n            }}\r\n          >\r\n            {i18n.t(\"action.clone\")}\r\n          </Menu.Item>\r\n          <Menu.Item\r\n            onClick={() => {\r\n              this.canvasRef.handler.removeById(target.id);\r\n            }}\r\n          >\r\n            {i18n.t(\"action.delete\")}\r\n          </Menu.Item>\r\n        </Menu>\r\n      );\r\n    },\r\n    onTransaction: transaction => {\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  handlers = {\r\n    onChangePreview: checked => {\r\n      this.setState(\r\n        {\r\n          preview: typeof checked === \"object\" ? false : checked\r\n        },\r\n        () => {\r\n          if (this.state.preview) {\r\n            const data = this.canvasRef.handler\r\n              .exportJSON()\r\n              .objects.filter(obj => {\r\n                if (!obj.id) {\r\n                  return false;\r\n                }\r\n                return true;\r\n              });\r\n            this.preview.canvasRef.handler.importJSON(data);\r\n            return;\r\n          }\r\n          this.preview.canvasRef.handler.clear();\r\n        }\r\n      );\r\n    },\r\n    onProgress: progress => {\r\n      this.setState({\r\n        progress\r\n      });\r\n    },\r\n    onImport: files => {\r\n      if (files) {\r\n        this.showLoading(true);\r\n        setTimeout(() => {\r\n          const reader = new FileReader();\r\n          reader.onprogress = e => {\r\n            if (e.lengthComputable) {\r\n              const progress = parseInt((e.loaded / e.total) * 100, 10);\r\n              this.handlers.onProgress(progress);\r\n            }\r\n          };\r\n          reader.onload = e => {\r\n            const { objects, animations, styles, dataSources } = JSON.parse(\r\n              e.target.result\r\n            );\r\n            this.setState({\r\n              animations,\r\n              styles,\r\n              dataSources\r\n            });\r\n            if (objects) {\r\n              this.canvasRef.handler.clear(true);\r\n              const data = objects.filter(obj => {\r\n                if (!obj.id) {\r\n                  return false;\r\n                }\r\n                return true;\r\n              });\r\n              this.canvasRef.handler.importJSON(JSON.stringify(data));\r\n            }\r\n          };\r\n          reader.onloadend = () => {\r\n            this.showLoading(false);\r\n          };\r\n          reader.onerror = () => {\r\n            this.showLoading(false);\r\n          };\r\n          reader.readAsText(files[0]);\r\n        }, 500);\r\n      }\r\n    },\r\n    onUpload: () => {\r\n      const inputEl = document.createElement(\"input\");\r\n      inputEl.accept = \".json\";\r\n      inputEl.type = \"file\";\r\n      inputEl.hidden = true;\r\n      inputEl.onchange = e => {\r\n        this.handlers.onImport(e.target.files);\r\n      };\r\n      document.body.appendChild(inputEl); // required for firefox\r\n      inputEl.click();\r\n      inputEl.remove();\r\n    },\r\n    onDownload: () => {\r\n      this.showLoading(true);\r\n      const objects = this.canvasRef.handler\r\n        .exportJSON()\r\n        .objects.filter(obj => {\r\n          if (!obj.id) {\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n      const { animations, styles, dataSources } = this.state;\r\n      const exportDatas = {\r\n        objects,\r\n        animations,\r\n        styles,\r\n        dataSources\r\n      };\r\n      const anchorEl = document.createElement(\"a\");\r\n      anchorEl.href = `data:text/json;charset=utf-8,${encodeURIComponent(\r\n        JSON.stringify(exportDatas, null, \"\\t\")\r\n      )}`;\r\n      anchorEl.download = `${this.canvasRef.handler.workarea.name ||\r\n        \"sample\"}.json`;\r\n      document.body.appendChild(anchorEl); // required for firefox\r\n      anchorEl.click();\r\n      anchorEl.remove();\r\n      this.showLoading(false);\r\n    },\r\n    onChangeAnimations: animations => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        animations\r\n      });\r\n    },\r\n    onChangeStyles: styles => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        styles\r\n      });\r\n    },\r\n    onChangeDataSources: dataSources => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        dataSources\r\n      });\r\n    },\r\n    onSaveImage: () => {\r\n      this.canvasRef.handler.saveCanvasImage();\r\n    }\r\n  };\r\n\r\n  shortcutHandlers = {\r\n    esc: () => {\r\n      document.addEventListener(\"keydown\", e => {\r\n        if (e.keyCode === 27) {\r\n          this.handlers.onChangePreview(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  transformList = () => {\r\n    return Object.values(this.state.descriptors).reduce(\r\n      (prev, curr) => prev.concat(curr),\r\n      []\r\n    );\r\n  };\r\n\r\n  showLoading = loading => {\r\n    this.setState({\r\n      loading\r\n    });\r\n  };\r\n\r\n  changeEditing = editing => {\r\n    this.setState({\r\n      editing\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      preview,\r\n      selectedItem,\r\n      zoomRatio,\r\n      loading,\r\n      progress,\r\n      animations,\r\n      styles,\r\n      dataSources,\r\n      editing,\r\n      descriptors\r\n    } = this.state;\r\n    const {\r\n      onAdd,\r\n      onRemove,\r\n      onSelect,\r\n      onModified,\r\n      onChange,\r\n      onZoom,\r\n      onTooltip,\r\n      onClick,\r\n      onContext,\r\n      onTransaction\r\n    } = this.canvasHandlers;\r\n    const {\r\n      onChangePreview,\r\n      onDownload,\r\n      onUpload,\r\n      onChangeAnimations,\r\n      onChangeStyles,\r\n      onChangeDataSources,\r\n      onSaveImage\r\n    } = this.handlers;\r\n    const action = (\r\n      <React.Fragment>\r\n        <CommonButton\r\n          className=\"rde-action-btn\"\r\n          shape=\"circle\"\r\n          icon=\"file-download\"\r\n          disabled={!editing}\r\n          tooltipTitle={i18n.t(\"action.download\")}\r\n          onClick={onDownload}\r\n          tooltipPlacement=\"bottomRight\"\r\n        />\r\n        {editing ? (\r\n          <Popconfirm\r\n            title={i18n.t(\"imagemap.imagemap-editing-confirm\")}\r\n            okText={i18n.t(\"action.ok\")}\r\n            cancelText={i18n.t(\"action.cancel\")}\r\n            onConfirm={onUpload}\r\n            placement=\"bottomRight\"\r\n          >\r\n            <CommonButton\r\n              className=\"rde-action-btn\"\r\n              shape=\"circle\"\r\n              icon=\"file-upload\"\r\n              tooltipTitle={i18n.t(\"action.upload\")}\r\n              tooltipPlacement=\"bottomRight\"\r\n            />\r\n          </Popconfirm>\r\n        ) : (\r\n          <CommonButton\r\n            className=\"rde-action-btn\"\r\n            shape=\"circle\"\r\n            icon=\"file-upload\"\r\n            tooltipTitle={i18n.t(\"action.upload\")}\r\n            tooltipPlacement=\"bottomRight\"\r\n            onClick={onUpload}\r\n          />\r\n        )}\r\n        <CommonButton\r\n          className=\"rde-action-btn\"\r\n          shape=\"circle\"\r\n          icon=\"image\"\r\n          tooltipTitle={i18n.t(\"action.image-save\")}\r\n          onClick={onSaveImage}\r\n          tooltipPlacement=\"bottomRight\"\r\n        />\r\n      </React.Fragment>\r\n    );\r\n    const titleContent = (\r\n      <React.Fragment>\r\n        <span>{i18n.t(\"imagemap.imagemap-editor\")}</span>\r\n      </React.Fragment>\r\n    );\r\n    const title = <ImageMapTitle title={titleContent} action={action} />;\r\n    const content = (\r\n      <div className=\"rde-editor\">\r\n        {/* <ImageMapItems\r\n          ref={c => {\r\n            this.itemsRef = c;\r\n          }}\r\n          canvasRef={this.canvasRef}\r\n          descriptors={descriptors}\r\n        /> */}\r\n        <div className=\"rde-editor-canvas-container\">\r\n          <div className=\"rde-editor-header-toolbar\">\r\n            <ImageMapHeaderToolbar\r\n              canvasRef={this.canvasRef}\r\n              selectedItem={selectedItem}\r\n              onSelect={onSelect}\r\n            />\r\n          </div>\r\n          <div\r\n            ref={c => {\r\n              this.container = c;\r\n            }}\r\n            className=\"rde-editor-canvas\"\r\n          >\r\n            <Canvas\r\n              ref={c => {\r\n                this.canvasRef = c;\r\n              }}\r\n              minZoom={30}\r\n              defaultOption={defaultOption}\r\n              propertiesToInclude={propertiesToInclude}\r\n              onModified={onModified}\r\n              onAdd={onAdd}\r\n              onRemove={onRemove}\r\n              onSelect={onSelect}\r\n              onZoom={onZoom}\r\n              onTooltip={onTooltip}\r\n              onClick={onClick}\r\n              onTransaction={onTransaction}\r\n              keyEvent={{\r\n                transaction: true\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"rde-editor-footer-toolbar\">\r\n            <ImageMapFooterToolbar\r\n              canvasRef={this.canvasRef}\r\n              preview={preview}\r\n              onChangePreview={onChangePreview}\r\n              zoomRatio={zoomRatio}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* <ImageMapConfigurations\r\n          canvasRef={this.canvasRef}\r\n          onChange={onChange}\r\n          selectedItem={selectedItem}\r\n          onChangeAnimations={onChangeAnimations}\r\n          onChangeStyles={onChangeStyles}\r\n          onChangeDataSources={onChangeDataSources}\r\n          animations={animations}\r\n          styles={styles}\r\n          dataSources={dataSources}\r\n        /> */}\r\n        <ImageMapPreview\r\n          ref={c => {\r\n            this.preview = c;\r\n          }}\r\n          preview={preview}\r\n          onChangePreview={onChangePreview}\r\n          onTooltip={onTooltip}\r\n          onClick={onClick}\r\n        />\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"rde-content rde-main\">\r\n        <Container\r\n          //title={title}\r\n          content={content}\r\n          loading={loading}\r\n          className=\"\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ imgUpload, dataExtract, common, tplTree }) => {\r\n  return { imgUpload, dataExtract, common, tplTree };\r\n};\r\n\r\nexport default connect(mapStateToProps, actions)(ImageMapEditor);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Collapse, notification, Input, message } from \"antd\";\r\nimport uuid from \"uuid/v4\";\r\nimport classnames from \"classnames\";\r\nimport i18n from \"i18next\";\r\n\r\nimport { FlexBox } from \"../flex\";\r\nimport Icon from \"../icon/Icon\";\r\nimport Scrollbar from \"../common/Scrollbar\";\r\nimport CommonButton from \"../common/CommonButton\";\r\nimport { SVGModal } from \"../common\";\r\n\r\nnotification.config({\r\n  top: 80,\r\n  duration: 2\r\n});\r\n\r\nclass ImageMapItems extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    descriptors: PropTypes.object\r\n  };\r\n\r\n  state = {\r\n    activeKey: [],\r\n    collapse: false,\r\n    textSearch: \"\",\r\n    descriptors: {},\r\n    filteredDescriptors: [],\r\n    svgModalVisible: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { canvasRef } = this.props;\r\n    this.waitForCanvasRender(canvasRef);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (\r\n      JSON.stringify(this.props.descriptors) !==\r\n      JSON.stringify(nextProps.descriptors)\r\n    ) {\r\n      const descriptors = Object.keys(nextProps.descriptors).reduce(\r\n        (prev, key) => {\r\n          return prev.concat(nextProps.descriptors[key]);\r\n        },\r\n        []\r\n      );\r\n      this.setState({\r\n        descriptors\r\n      });\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (\r\n      JSON.stringify(this.state.descriptors) !==\r\n      JSON.stringify(nextState.descriptors)\r\n    ) {\r\n      return true;\r\n    } else if (\r\n      JSON.stringify(this.state.filteredDescriptors) !==\r\n      JSON.stringify(nextState.filteredDescriptors)\r\n    ) {\r\n      return true;\r\n    } else if (this.state.textSearch !== nextState.textSearch) {\r\n      return true;\r\n    } else if (\r\n      JSON.stringify(this.state.activeKey) !==\r\n      JSON.stringify(nextState.activeKey)\r\n    ) {\r\n      return true;\r\n    } else if (this.state.collapse !== nextState.collapse) {\r\n      return true;\r\n    } else if (this.state.svgModalVisible !== nextState.svgModalVisible) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { canvasRef } = this.props;\r\n    this.detachEventListener(canvasRef);\r\n  }\r\n\r\n  waitForCanvasRender = canvas => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        this.attachEventListener(canvas);\r\n        return;\r\n      }\r\n      const { canvasRef } = this.props;\r\n      this.waitForCanvasRender(canvasRef);\r\n    }, 5);\r\n  };\r\n\r\n  attachEventListener = canvas => {\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      \"dragenter\",\r\n      this.events.onDragEnter,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      \"dragover\",\r\n      this.events.onDragOver,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      \"dragleave\",\r\n      this.events.onDragLeave,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener(\"drop\", this.events.onDrop, false);\r\n  };\r\n\r\n  detachEventListener = canvas => {\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      \"dragenter\",\r\n      this.events.onDragEnter\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      \"dragover\",\r\n      this.events.onDragOver\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      \"dragleave\",\r\n      this.events.onDragLeave\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener(\"drop\", this.events.onDrop);\r\n  };\r\n\r\n  /* eslint-disable react/sort-comp, react/prop-types */\r\n  handlers = {\r\n    onAddItem: (item, centered) => {\r\n      const { canvasRef } = this.props;\r\n      if (canvasRef.handler.workarea.layout === \"responsive\") {\r\n        if (!canvasRef.handler.workarea.isElement) {\r\n          notification.warn({\r\n            message: \"Please your select background image\"\r\n          });\r\n          return;\r\n        }\r\n      }\r\n      if (canvasRef.handler.interactionMode === \"polygon\") {\r\n        message.info(\"Already drawing\");\r\n        return;\r\n      }\r\n      const id = uuid();\r\n      const option = Object.assign({}, item.option, { id });\r\n      if (item.option.type === \"svg\" && item.type === \"default\") {\r\n        this.handlers.onSVGModalVisible(item.option);\r\n        return;\r\n      }\r\n      canvasRef.handler.add(option, centered);\r\n    },\r\n    onAddSVG: (option, centered) => {\r\n      const { canvasRef } = this.props;\r\n      canvasRef.handler.add(\r\n        { ...option, type: \"svg\", id: uuid(), name: \"New SVG\" },\r\n        centered\r\n      );\r\n      this.handlers.onSVGModalVisible();\r\n    },\r\n    onDrawingItem: item => {\r\n      const { canvasRef } = this.props;\r\n      if (canvasRef.handler.workarea.layout === \"responsive\") {\r\n        if (!canvasRef.handler.workarea.isElement) {\r\n          notification.warn({\r\n            message: \"Please your select background image\"\r\n          });\r\n          return;\r\n        }\r\n      }\r\n      if (canvasRef.handler.interactionMode === \"polygon\") {\r\n        message.info(\"Already drawing\");\r\n        return;\r\n      }\r\n      if (item.option.type === \"line\") {\r\n        canvasRef.handler.drawingHandler.line.init();\r\n      } else if (item.option.type === \"arrow\") {\r\n        canvasRef.handler.drawingHandler.arrow.init();\r\n      } else {\r\n        canvasRef.handler.drawingHandler.polygon.init();\r\n      }\r\n    },\r\n    onChangeActiveKey: activeKey => {\r\n      this.setState({\r\n        activeKey\r\n      });\r\n    },\r\n    onCollapse: () => {\r\n      this.setState({\r\n        collapse: !this.state.collapse\r\n      });\r\n    },\r\n    onSearchNode: e => {\r\n      const filteredDescriptors = this.handlers\r\n        .transformList()\r\n        .filter(descriptor =>\r\n          descriptor.name.toLowerCase().includes(e.target.value.toLowerCase())\r\n        );\r\n      console.log(\"aaaaaaaaaaaaaaaaaaaaaaa\");\r\n      console.log(filteredDescriptors);\r\n      this.setState({\r\n        textSearch: e.target.value,\r\n        filteredDescriptors\r\n      });\r\n    },\r\n    transformList: () => {\r\n      return Object.values(this.props.descriptors).reduce(\r\n        (prev, curr) => prev.concat(curr),\r\n        []\r\n      );\r\n    },\r\n    onSVGModalVisible: () => {\r\n      this.setState(prevState => {\r\n        return {\r\n          svgModalVisible: !prevState.svgModalVisible\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  events = {\r\n    onDragStart: (e, item) => {\r\n      this.item = item;\r\n      const { target } = e;\r\n      target.classList.add(\"dragging\");\r\n    },\r\n    onDragOver: e => {\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n      e.dataTransfer.dropEffect = \"copy\";\r\n      return false;\r\n    },\r\n    onDragEnter: e => {\r\n      const { target } = e;\r\n      target.classList.add(\"over\");\r\n    },\r\n    onDragLeave: e => {\r\n      const { target } = e;\r\n      target.classList.remove(\"over\");\r\n    },\r\n    onDrop: e => {\r\n      e = e || window.event;\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n      if (e.stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n      const { layerX, layerY } = e;\r\n      const dt = e.dataTransfer;\r\n      if (dt.types.length && dt.types[0] === \"Files\") {\r\n        const { files } = dt;\r\n        Array.from(files).forEach(file => {\r\n          file.uid = uuid();\r\n          const { type } = file;\r\n          if (\r\n            type === \"image/png\" ||\r\n            type === \"image/jpeg\" ||\r\n            type === \"image/jpg\"\r\n          ) {\r\n            const item = {\r\n              option: {\r\n                type: \"image\",\r\n                file,\r\n                left: layerX,\r\n                top: layerY\r\n              }\r\n            };\r\n            this.handlers.onAddItem(item, false);\r\n          } else {\r\n            notification.warn({\r\n              message: \"Not supported file type\"\r\n            });\r\n          }\r\n        });\r\n        return false;\r\n      }\r\n      const option = Object.assign({}, this.item.option, {\r\n        left: layerX,\r\n        top: layerY\r\n      });\r\n      const newItem = Object.assign({}, this.item, { option });\r\n      this.handlers.onAddItem(newItem, false);\r\n      return false;\r\n    },\r\n    onDragEnd: e => {\r\n      this.item = null;\r\n      e.target.classList.remove(\"dragging\");\r\n    }\r\n  };\r\n\r\n  renderItems = items => (\r\n    <FlexBox flexWrap=\"wrap\" flexDirection=\"column\" style={{ width: \"100%\" }}>\r\n      {Object.keys(items).map(key => this.renderItem(items[key]))}\r\n    </FlexBox>\r\n  );\r\n\r\n  renderItem = (item, centered) =>\r\n    item.type === \"drawing\" ? (\r\n      <div\r\n        key={item.name}\r\n        draggable\r\n        onClick={e => this.handlers.onDrawingItem(item)}\r\n        className=\"rde-editor-items-item\"\r\n        style={{ justifyContent: this.state.collapse ? \"center\" : null }}\r\n      >\r\n        <span className=\"rde-editor-items-item-icon\">\r\n          <Icon\r\n            name={item.icon.name}\r\n            prefix={item.icon.prefix}\r\n            style={item.icon.style}\r\n          />\r\n        </span>\r\n        {this.state.collapse ? null : (\r\n          <div className=\"rde-editor-items-item-text\">{item.name}</div>\r\n        )}\r\n      </div>\r\n    ) : (\r\n      <div\r\n        key={item.name}\r\n        draggable\r\n        onClick={e => this.handlers.onAddItem(item, centered)}\r\n        onDragStart={e => this.events.onDragStart(e, item)}\r\n        onDragEnd={e => this.events.onDragEnd(e, item)}\r\n        className=\"rde-editor-items-item\"\r\n        style={{ justifyContent: this.state.collapse ? \"center\" : null }}\r\n      >\r\n        <span className=\"rde-editor-items-item-icon\">\r\n          <Icon\r\n            name={item.icon.name}\r\n            prefix={item.icon.prefix}\r\n            style={item.icon.style}\r\n          />\r\n        </span>\r\n        {this.state.collapse ? null : (\r\n          <div className=\"rde-editor-items-item-text\">{item.name}</div>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n  render() {\r\n    const { descriptors } = this.props;\r\n    const {\r\n      collapse,\r\n      textSearch,\r\n      filteredDescriptors,\r\n      activeKey,\r\n      svgModalVisible,\r\n      svgOption\r\n    } = this.state;\r\n    const className = classnames(\"rde-editor-items\", {\r\n      minimize: collapse\r\n    });\r\n    return (\r\n      <div className={className}>\r\n        <FlexBox flex=\"1\" flexDirection=\"column\" style={{ height: \"100%\" }}>\r\n          <FlexBox\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            style={{ height: 40 }}\r\n          >\r\n            <CommonButton\r\n              icon={collapse ? \"angle-double-right\" : \"angle-double-left\"}\r\n              shape=\"circle\"\r\n              className=\"rde-action-btn\"\r\n              style={{ margin: \"0 4px\" }}\r\n              onClick={this.handlers.onCollapse}\r\n            />\r\n            {collapse ? null : (\r\n              <Input\r\n                style={{ margin: \"8px\" }}\r\n                placeholder={i18n.t(\"action.search-list\")}\r\n                onChange={this.handlers.onSearchNode}\r\n                value={textSearch}\r\n                allowClear\r\n              />\r\n            )}\r\n          </FlexBox>\r\n          <Scrollbar>\r\n            <FlexBox flex=\"1\" style={{ overflowY: \"hidden\" }}>\r\n              {(textSearch.length && this.renderItems(filteredDescriptors)) ||\r\n                (collapse ? (\r\n                  <FlexBox\r\n                    flexWrap=\"wrap\"\r\n                    flexDirection=\"column\"\r\n                    style={{ width: \"100%\" }}\r\n                    justifyContent=\"center\"\r\n                  >\r\n                    {this.handlers\r\n                      .transformList()\r\n                      .map(item => this.renderItem(item))}\r\n                  </FlexBox>\r\n                ) : (\r\n                  <Collapse\r\n                    style={{ width: \"100%\" }}\r\n                    bordered={false}\r\n                    activeKey={\r\n                      activeKey.length ? activeKey : Object.keys(descriptors)\r\n                    }\r\n                    onChange={this.handlers.onChangeActiveKey}\r\n                  >\r\n                    {Object.keys(descriptors)\r\n                      .filter(v => v !== \"default\")\r\n                      .map(key => (\r\n                        <Collapse.Panel\r\n                          key={key}\r\n                          header={key}\r\n                          showArrow={!collapse}\r\n                        >\r\n                          {this.renderItems(descriptors[key])}\r\n                        </Collapse.Panel>\r\n                      ))}\r\n                  </Collapse>\r\n                ))}\r\n            </FlexBox>\r\n          </Scrollbar>\r\n        </FlexBox>\r\n        <SVGModal\r\n          visible={svgModalVisible}\r\n          onOk={this.handlers.onAddSVG}\r\n          onCancel={this.handlers.onSVGModalVisible}\r\n          option={svgOption}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapItems;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Tabs } from \"antd\";\r\nimport classnames from \"classnames\";\r\n\r\nimport NodeProperties from \"./properties/NodeProperties\";\r\nimport MapProperties from \"./properties/MapProperties\";\r\nimport Animations from \"./animations/Animations\";\r\nimport Styles from \"./styles/Styles\";\r\nimport DataSources from \"./datasources/DataSources\";\r\nimport Icon from \"../icon/Icon\";\r\nimport CommonButton from \"../common/CommonButton\";\r\n\r\nclass ImageMapConfigurations extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object,\r\n    onChange: PropTypes.func,\r\n    onChangeAnimations: PropTypes.func,\r\n    onChangeStyles: PropTypes.func,\r\n    onChangeDataSources: PropTypes.func,\r\n    animations: PropTypes.array,\r\n    styles: PropTypes.array,\r\n    dataSources: PropTypes.array\r\n  };\r\n\r\n  state = {\r\n    activeKey: \"map\"\r\n  };\r\n\r\n  handlers = {\r\n    onChangeTab: activeKey => {\r\n      this.setState({\r\n        activeKey\r\n      });\r\n    },\r\n    onCollapse: () => {\r\n      this.setState({\r\n        collapse: !this.state.collapse\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      onChange,\r\n      selectedItem,\r\n      canvasRef,\r\n      animations,\r\n      styles,\r\n      dataSources,\r\n      onChangeAnimations,\r\n      onChangeStyles,\r\n      onChangeDataSources\r\n    } = this.props;\r\n    const { collapse, activeKey } = this.state;\r\n    const { onChangeTab, onCollapse } = this.handlers;\r\n    const className = classnames(\"rde-editor-configurations\", {\r\n      minimize: collapse\r\n    });\r\n    return (\r\n      <div className={className}>\r\n        <CommonButton\r\n          className=\"rde-action-btn\"\r\n          shape=\"circle\"\r\n          icon={collapse ? \"angle-double-left\" : \"angle-double-right\"}\r\n          onClick={onCollapse}\r\n          style={{ position: \"absolute\", top: 16, right: 16, zIndex: 1000 }}\r\n        />\r\n        <Tabs\r\n          tabPosition=\"right\"\r\n          style={{ height: \"100%\" }}\r\n          activeKey={activeKey}\r\n          onChange={onChangeTab}\r\n          tabBarStyle={{ marginTop: 60 }}\r\n        >\r\n          <Tabs.TabPane tab={<Icon name=\"cog\" />} key=\"map\">\r\n            <MapProperties onChange={onChange} canvasRef={canvasRef} />\r\n          </Tabs.TabPane>\r\n          <Tabs.TabPane tab={<Icon name=\"cogs\" />} key=\"node\">\r\n            <NodeProperties\r\n              onChange={onChange}\r\n              selectedItem={selectedItem}\r\n              canvasRef={canvasRef}\r\n            />\r\n          </Tabs.TabPane>\r\n          {/* <Tabs.TabPane tab={<Icon name=\"vine\" prefix=\"fab\" />} key=\"animations\">\r\n                        <Animations animations={animations} onChangeAnimations={onChangeAnimations} />\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab={<Icon name=\"star-half-alt\" />} key=\"styles\">\r\n                        <Styles styles={styles} onChangeStyles={onChangeStyles} />\r\n                    </Tabs.TabPane> */}\r\n          {/* <Tabs.TabPane tab={<Icon name=\"table\" />} key=\"datasources\">\r\n                        <DataSources ref={(c) => { this.dataSourcesRef = c; }} dataSources={dataSources} onChangeDataSources={onChangeDataSources} />\r\n                    </Tabs.TabPane> */}\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapConfigurations;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Tabs } from \"antd\";\r\nimport classnames from \"classnames\";\r\n\r\nimport NodeProperties from \"./properties/NodeProperties\";\r\nimport MapProperties from \"./properties/MapProperties\";\r\nimport Animations from \"./animations/Animations\";\r\nimport Styles from \"./styles/Styles\";\r\nimport DataSources from \"./datasources/DataSources\";\r\nimport Icon from \"../icon/Icon\";\r\nimport CommonButton from \"../common/CommonButton\";\r\nimport ImageMapList from \"./ImageMapList\";\r\n\r\nclass ImageFields extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object,\r\n    onChange: PropTypes.func,\r\n    onChangeAnimations: PropTypes.func,\r\n    onChangeStyles: PropTypes.func,\r\n    onChangeDataSources: PropTypes.func,\r\n    animations: PropTypes.array,\r\n    styles: PropTypes.array,\r\n    dataSources: PropTypes.array\r\n  };\r\n\r\n  state = {\r\n    activeKey: \"field\"\r\n  };\r\n\r\n  handlers = {\r\n    onChangeTab: activeKey => {\r\n      this.setState({\r\n        activeKey\r\n      });\r\n    },\r\n    onCollapse: () => {\r\n      this.setState({\r\n        collapse: !this.state.collapse\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { onChange, selectedItem, canvasRef } = this.props;\r\n    const { collapse, activeKey } = this.state;\r\n    const { onChangeTab, onCollapse } = this.handlers;\r\n    const className = classnames(\"rde-editor-configurations\", {\r\n      minimize: collapse\r\n    });\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"rde-canvas-list\">\r\n          <ImageMapList canvasRef={canvasRef} selectedItem={selectedItem} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageFields;\r\n"],"sourceRoot":""}