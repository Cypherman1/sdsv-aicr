(this.webpackJsonpAICR=this.webpackJsonpAICR||[]).push([[18],{1837:function(e,a,t){"use strict";t.r(a);var n=t(45),r=t.n(n),o=t(71),c=t(8),l=t(17),i=t(19),s=t(18),d=t(20),m=t(0),u=t.n(m),p=t(1717),f=t(1718),h=t(1763),v=t(1831),g=t(1764),b=t(363),y=t(51),E=t(1693),k=t(1836),w=t(284),R=t(498),x=t(969),C=t(1820),j=t(1821),O=t(1719),I=t(968),T=function(e){var a=e.input,t=(e.meta,e.label);return u.a.createElement(C.a,null,u.a.createElement(j.a,null," ",t),u.a.createElement(O.a,a))},S=function(e){var a=e.input,t=(e.meta,e.label);e.source;return u.a.createElement(C.a,null,u.a.createElement(j.a,null,t),u.a.createElement("img",{src:a.value?"data:image/jpeg;base64,".concat(a.value):"",alt:"",className:"form-control aicr-image"}))},N=function(e){var a=e.input,t=(e.meta,e.label),n=e.ischecked;return u.a.createElement(C.a,{check:!0,className:"checkbox"},u.a.createElement(O.a,Object.assign({},a,{className:"form-check-input",type:"checkbox",checked:void 0!==n&&n})),u.a.createElement(j.a,{check:!0,className:"form-check-label"},t))},H=function(e,a,t,n){return u.a.createElement(C.a,{row:!0},u.a.createElement(f.a,{xs:"12",md:"5"},u.a.createElement(j.a,null," ",a)),u.a.createElement(f.a,{xs:"12",md:"7"},t.map((function(a){return u.a.createElement("div",{key:a.id},function(e,a,t){return u.a.createElement(I.a,{name:e,label:a,component:N,ischecked:t})}("".concat(e,".").concat(a.name),a.label,void 0!==n&&n[a.name]))}))))},F=function(e,a){return u.a.createElement(I.a,Object.assign({name:e,props:{type:"text"},component:T},{label:a}))},A=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return(t=Object(i.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(l)))).componentDidMount=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.getExtractTemplate(t.props.common.selectedTemplate);case 2:case"end":return e.stop()}}),e)}))),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"renderFields",value:function(e){var a=[];return void 0!==this.props.common.extractTemplate&&void 0!==this.props.common.extractTemplate.template_config_fields&&this.props.common.extractTemplate.template_config_fields.map((function(t){switch(t.data_type){case"text":a.push(u.a.createElement("div",{key:t.id},F(t.field_name,t.field_label)));break;case"checkboxes":a.push(u.a.createElement("div",{key:t.id},H(t.field_name,t.field_label,t.options,e[t.field_name])));break;case"group":if("combine"===t.group_type)a.push(u.a.createElement("div",{key:t.id},F(t.field_name,t.field_label)));else for(var n=0;n<t.sources.length;n++){var r=t.sources[n];a.push(u.a.createElement("div",{key:r.id},F(r.field_name,r.field_label)))}break;case"image":a.push(u.a.createElement("div",{key:t.id},function(e,a,t){return u.a.createElement(I.a,Object.assign({name:e,source:t,props:{type:"image"},component:S},{label:a}))}(t.field_name,t.field_label)))}})),a}},{key:"render",value:function(){var e=this.props.formValues;return u.a.createElement("form",{className:"form-horizontal"},this.renderFields(e))}}]),a}(m.Component),L=A=Object(x.a)({form:"eform"})(Object(w.b)((function(e){return e.form.eform&&e.form.eform.values?{formValues:e.form.eform.values,common:e.common}:{formValues:[],common:e.common}}),R)(A)),P=t(1699),U=t(493),_=t(1696),D=t(59),B=t.n(D),M=t(4),z=t(773),J=(t(962),t(821)),W=t(34),Z=(t(350),t(73)),V=t(27),X=t(1832),Y=X.a.TreeNode,q=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return(t=Object(i.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(l)))).state={value:void 0},t.onChange=function(){var e=Object(o.a)(r.a.mark((function e(a){var n,o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.common,c=n.imgUpload,l=n.setSelected,e.next=3,l(a,o,c);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.canvasRef,t=(e.selectedItem,e.tplTree),n=!!a&&"crop"===a.handler.interactionMode;return u.a.createElement(W.a,{className:"rde-editor-header-toolbar-container pt-2 pb-5",flex:"1"},u.a.createElement(f.a,{className:"pl-0",xs:"12",sm:"6"},u.a.createElement(W.b,{className:"rde-canvas-toolbar rde-canvas-toolbar-list"},u.a.createElement(j.a,{className:"pt-2 pl-2"},"Template"),u.a.createElement(X.a,{style:{width:"100%",marginLeft:"10px"},value:t.selected,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",treeDefaultExpandAll:!0,onChange:this.onChange},t.treeData[0]?function e(a){return u.a.createElement(Y,{value:a.nodeId,title:a.label,key:a.nodeId},a.children?a.children.map((function(a){return e(a)})):null)}(t.treeData[0]):null))),u.a.createElement(f.a,{xs:"12",sm:"6",className:"justify-content-end"},u.a.createElement(p.a,{className:"justify-content-end"},u.a.createElement(W.b,{className:"rde-canvas-toolbar rde-canvas-toolbar-crop"},u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:!a||!a.handler.cropHandler.validType(),onClick:function(){return a.handler.cropHandler.start()},icon:"crop",tooltipTitle:M.a.t("action.crop")}),u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:!a||!a.handler.cropHandler.cropRect,onClick:function(){return a.handler.cropHandler.finish()},icon:"check",tooltipTitle:M.a.t("action.crop-save")}),u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:!a||!a.handler.cropHandler.cropRect,onClick:function(){return a.handler.cropHandler.cancel()},icon:"times",tooltipTitle:M.a.t("action.crop-cancel")})),u.a.createElement(W.b,{className:"rde-canvas-toolbar rde-canvas-toolbar-operation"},u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:n,onClick:function(){return a.handler.saveImage()},icon:"image",tooltipTitle:M.a.t("action.image-save")}),u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:n,onClick:function(){return a.handler.duplicate()},icon:"clone",tooltipTitle:M.a.t("action.clone")}),u.a.createElement(Z.a,{className:"rde-action-btn",shape:"circle",disabled:n,onClick:function(){return a.handler.remove()},icon:"trash",tooltipTitle:M.a.t("action.delete")})),u.a.createElement(W.b,{className:"rde-canvas-toolbar rde-canvas-toolbar-history"},u.a.createElement(Z.a,{className:"rde-action-btn",disabled:n||a&&!a.handler.transactionHandler.undos.length,onClick:function(){return a.handler.transactionHandler.undo()}},u.a.createElement(V.a,{name:"undo-alt",style:{marginRight:8}}),"Undo"),u.a.createElement(Z.a,{className:"rde-action-btn",disabled:n||a&&!a.handler.transactionHandler.redos.length,onClick:function(){return a.handler.transactionHandler.redo()}},"Redo",u.a.createElement(V.a,{name:"redo-alt",style:{marginLeft:8}}))))))}}]),a}(m.Component),G=Object(w.b)((function(e){return{imgUpload:e.imgUpload,dataExtract:e.dataExtract,common:e.common,tplTree:e.tplTree}}),R)(q),K=t(822),Q=(t(964),t(924)),$=(t(965),t(966),t(967),t(328)),ee=t(80),ae=t(146),te=["id","name","locked","file","src","link","tooltip","animation","layout","workareaWidth","workareaHeight","videoLoadType","autoplay","shadow","muted","loop","code","icon","userProperty","trigger","configuration","superType","points","svg","loadType"],ne={fill:"rgba(0, 0, 255, 0.1)",stroke:"rgba(255, 255, 255, 0)",strokeUniform:!0,resource:{},link:{enabled:!1,type:"resource",state:"new",dashboard:{}},tooltip:{enabled:!0,type:"resource",template:"<div>{{message.name}}</div>"},animation:{type:"none",loop:!0,autoplay:!0,delay:100,duration:1e3},userProperty:{},trigger:{enabled:!1,type:"alarm",script:"return message.value > 0;",effect:"style"}},re=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(r)))).state={selectedItem:null,zoomRatio:1,preview:!1,loading:!1,progress:0,animations:[],styles:[],dataSources:[],editing:!1,descriptors:{}},t.canvasHandlers={onAdd:function(e){var a=t.state.editing;t.forceUpdate(),a||t.changeEditing(!0),"activeSelection"!==e.type?t.canvasRef.handler.select(e):t.canvasHandlers.onSelect(null)},onSelect:function(e){var a=t.state.selectedItem;if(e&&e.id&&"workarea"!==e.id&&"activeSelection"!==e.type){if(a&&e.id===a.id)return;return t.canvasRef.handler.getObjects().forEach((function(e){e&&t.canvasRef.handler.animationHandler.initAnimation(e,!0)})),void t.setState({selectedItem:e})}t.canvasRef.handler.getObjects().forEach((function(e){e&&t.canvasRef.handler.animationHandler.initAnimation(e,!0)})),t.setState({selectedItem:null})},onRemove:function(){t.state.editing||t.changeEditing(!0),t.canvasHandlers.onSelect(null)},onModified:B()((function(){var e=t.state.editing;t.forceUpdate(),e||t.changeEditing(!0)}),300),onZoom:function(e){t.setState({zoomRatio:e})},onChange:function(e,a,n){t.state.editing||t.changeEditing(!0);var r=Object.keys(a)[0],o=a[r];if(n.workarea)t.canvasHandlers.onChangeWokarea(r,o,n.workarea);else if("width"!==r&&"height"!==r)if("locked"!==r)if("file"!==r&&"src"!==r&&"code"!==r)if("link"!==r)if("tooltip"!==r)if("animation"!==r){if("icon"===r){var c=o[Object.keys(o)[0]],l=c.unicode,i=c.styles,s=parseInt(l,16);return"brands"===i[0]?t.canvasRef.handler.set("fontFamily","Font Awesome 5 Brands"):"regular"===i[0]?t.canvasRef.handler.set("fontFamily","Font Awesome 5 Regular"):t.canvasRef.handler.set("fontFamily","Font Awesome 5 Free"),t.canvasRef.handler.set("text",String.fromCodePoint(s)),void t.canvasRef.handler.set("icon",o)}if("shadow"!==r)if("fontWeight"!==r)if("fontStyle"!==r)if("textAlign"!==r)if("trigger"!==r){if("filters"===r){var d=Object.keys(o)[0],m=n.filters[d];if("gamma"===d){var u=[m.r,m.g,m.b];return void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{gamma:u})}return"brightness"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{brightness:m.brightness}):"contrast"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{contrast:m.contrast}):"saturation"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{saturation:m.saturation}):"hue"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{rotation:m.rotation}):"noise"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{noise:m.noise}):"pixelate"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{blocksize:m.blocksize}):"blur"===d?void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d].enabled,{value:m.value}):void t.canvasRef.handler.imageHandler.applyFilterByType(d,o[d])}if("chartOption"!==r)t.canvasRef.handler.set(r,o);else try{var p=(new Q.a).compile(o),f=t.state,h=p(3,f.animations,f.styles,e.userProperty);e.setChartOptionStr(o),t.canvasRef.handler.elementHandler.setById(e.id,h)}catch(E){console.error(E)}}else{var v=Object.assign({},ne.trigger,n.trigger);t.canvasRef.handler.set(r,v)}else t.canvasRef.handler.set(r,Object.keys(o)[0]);else t.canvasRef.handler.set(r,o?"italic":"normal");else t.canvasRef.handler.set(r,o?"bold":"normal");else n.shadow.enabled?"blur"in n.shadow?t.canvasRef.handler.setShadow(n.shadow):t.canvasRef.handler.setShadow({enabled:!0,blur:15,offsetX:10,offsetY:10}):t.canvasRef.handler.setShadow(null)}else{var g=Object.assign({},ne.animation,n.animation);t.canvasRef.handler.set(r,g)}else{var b=Object.assign({},ne.tooltip,n.tooltip);t.canvasRef.handler.set(r,b)}else{var y=Object.assign({},ne.link,n.link);t.canvasRef.handler.set(r,y)}else"image"===e.type?t.canvasRef.handler.setImageById(e.id,o):"element"===e.superType&&t.canvasRef.handler.elementHandler.setById(e.id,o);else t.canvasRef.handler.setObject({lockMovementX:o,lockMovementY:o,hasControls:!o,hoverCursor:o?"pointer":"move",editable:!o,locked:o});else t.canvasRef.handler.scaleToResize(n.width,n.height)},onChangeWokarea:function(e,a,n){if("layout"!==e)if("file"!==e&&"src"!==e){if("width"===e||"height"===e)return t.canvasRef.handler.originScaleToResize(t.canvasRef.handler.workarea,n.width,n.height),void t.canvasRef.canvas.centerObject(t.canvasRef.handler.workarea);t.canvasRef.handler.workarea.set(e,a),t.canvasRef.canvas.requestRenderAll()}else t.canvasRef.handler.workareaHandler.setImage(a);else t.canvasRef.handler.workareaHandler.setLayout(a)},onTooltip:function(e,a){var n=10*Math.random()+1,r=t.state;r.animations,r.styles;return u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement(y.a,null,a.id)),u.a.createElement(P.a,{count:n})))},onClick:function(e,a){var t=a.link;"current"!==t.state?window.open(t.url):document.location.href=t.url},onContext:function(e,a,n){if(n&&"workarea"===n.id||!n){var r=a.layerX,o=a.layerY;return u.a.createElement(U.a,null,u.a.createElement(U.a.SubMenu,{key:"add",style:{width:120},title:M.a.t("action.add")},t.transformList().map((function(e){var a=Object.assign({},e.option,{left:r,top:o}),n=Object.assign({},e,{option:a});return u.a.createElement(U.a.Item,{style:{padding:0},key:e.name},t.itemsRef.renderItem(n,!1))}))))}return"activeSelection"===n.type?u.a.createElement(U.a,null,u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.toGroup()}},M.a.t("action.object-group")),u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.duplicate()}},M.a.t("action.clone")),u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.remove()}},M.a.t("action.delete"))):"group"===n.type?u.a.createElement(U.a,null,u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.toActiveSelection()}},M.a.t("action.object-ungroup")),u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.duplicate()}},M.a.t("action.clone")),u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.remove()}},M.a.t("action.delete"))):u.a.createElement(U.a,null,u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.duplicateById(n.id)}},M.a.t("action.clone")),u.a.createElement(U.a.Item,{onClick:function(){t.canvasRef.handler.removeById(n.id)}},M.a.t("action.delete")))},onTransaction:function(e){t.forceUpdate()}},t.handlers={onChangePreview:function(e){t.setState({preview:"object"!==typeof e&&e},(function(){if(t.state.preview){var e=t.canvasRef.handler.exportJSON().objects.filter((function(e){return!!e.id}));t.preview.canvasRef.handler.importJSON(e)}else t.preview.canvasRef.handler.clear()}))},onProgress:function(e){t.setState({progress:e})},onImport:function(e){e&&(t.showLoading(!0),setTimeout((function(){var a=new FileReader;a.onprogress=function(e){if(e.lengthComputable){var a=parseInt(e.loaded/e.total*100,10);t.handlers.onProgress(a)}},a.onload=function(e){var a=JSON.parse(e.target.result),n=a.objects,r=a.animations,o=a.styles,c=a.dataSources;if(t.setState({animations:r,styles:o,dataSources:c}),n){t.canvasRef.handler.clear(!0);var l=n.filter((function(e){return!!e.id}));t.canvasRef.handler.importJSON(JSON.stringify(l))}},a.onloadend=function(){t.showLoading(!1)},a.onerror=function(){t.showLoading(!1)},a.readAsText(e[0])}),500))},onUpload:function(){var e=document.createElement("input");e.accept=".json",e.type="file",e.hidden=!0,e.onchange=function(e){t.handlers.onImport(e.target.files)},document.body.appendChild(e),e.click(),e.remove()},onDownload:function(){t.showLoading(!0);var e=t.canvasRef.handler.exportJSON().objects.filter((function(e){return!!e.id})),a=t.state,n={objects:e,animations:a.animations,styles:a.styles,dataSources:a.dataSources},r=document.createElement("a");r.href="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(n,null,"\t"))),r.download="".concat(t.canvasRef.handler.workarea.name||"sample",".json"),document.body.appendChild(r),r.click(),r.remove(),t.showLoading(!1)},onChangeAnimations:function(e){t.state.editing||t.changeEditing(!0),t.setState({animations:e})},onChangeStyles:function(e){t.state.editing||t.changeEditing(!0),t.setState({styles:e})},onChangeDataSources:function(e){t.state.editing||t.changeEditing(!0),t.setState({dataSources:e})},onSaveImage:function(){t.canvasRef.handler.saveCanvasImage()}},t.shortcutHandlers={esc:function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&t.handlers.onChangePreview(!1)}))}},t.transformList=function(){return Object.values(t.state.descriptors).reduce((function(e,a){return e.concat(a)}),[])},t.showLoading=function(e){t.setState({loading:e})},t.changeEditing=function(e){t.setState({editing:e})},t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,n=(a.imgUpload,a.common,a.setMainMenuId),r=a.setAimvCanvasRef;this.showLoading(!0),n(2),t.e(2).then(t.t.bind(null,1819,3)).then((function(a){e.setState({descriptors:a},(function(){e.showLoading(!1)}))})),this.setState({selectedItem:null}),this.shortcutHandlers.esc(),r(this.canvasRef)}},{key:"render",value:function(){var e=this,a=this.state,t=a.preview,n=a.selectedItem,r=a.zoomRatio,o=a.loading,c=(a.progress,a.animations,a.styles,a.dataSources,a.editing),l=(a.descriptors,this.canvasHandlers),i=l.onAdd,s=l.onRemove,d=l.onSelect,m=l.onModified,p=(l.onChange,l.onZoom),f=l.onTooltip,h=l.onClick,v=(l.onContext,l.onTransaction),g=this.handlers,b=g.onChangePreview,y=g.onDownload,E=g.onUpload,k=(g.onChangeAnimations,g.onChangeStyles,g.onChangeDataSources,g.onSaveImage),w=u.a.createElement(u.a.Fragment,null,u.a.createElement(ee.a,{className:"rde-action-btn",shape:"circle",icon:"file-download",disabled:!c,tooltipTitle:M.a.t("action.download"),onClick:y,tooltipPlacement:"bottomRight"}),c?u.a.createElement(_.a,{title:M.a.t("imagemap.imagemap-editing-confirm"),okText:M.a.t("action.ok"),cancelText:M.a.t("action.cancel"),onConfirm:E,placement:"bottomRight"},u.a.createElement(ee.a,{className:"rde-action-btn",shape:"circle",icon:"file-upload",tooltipTitle:M.a.t("action.upload"),tooltipPlacement:"bottomRight"})):u.a.createElement(ee.a,{className:"rde-action-btn",shape:"circle",icon:"file-upload",tooltipTitle:M.a.t("action.upload"),tooltipPlacement:"bottomRight",onClick:E}),u.a.createElement(ee.a,{className:"rde-action-btn",shape:"circle",icon:"image",tooltipTitle:M.a.t("action.image-save"),onClick:k,tooltipPlacement:"bottomRight"})),R=u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,M.a.t("imagemap.imagemap-editor"))),x=(u.a.createElement(J.a,{title:R,action:w}),u.a.createElement("div",{className:"rde-editor"},u.a.createElement("div",{className:"rde-editor-canvas-container"},u.a.createElement("div",{className:"rde-editor-header-toolbar"},u.a.createElement(G,{canvasRef:this.canvasRef,selectedItem:n,onSelect:d})),u.a.createElement("div",{ref:function(a){e.container=a},className:"rde-editor-canvas"},u.a.createElement(ae.a,{ref:function(a){e.canvasRef=a},minZoom:30,defaultOption:ne,propertiesToInclude:te,onModified:m,onAdd:i,onRemove:s,onSelect:d,onZoom:p,onTooltip:f,onClick:h,onTransaction:v,keyEvent:{transaction:!0}})),u.a.createElement("div",{className:"rde-editor-footer-toolbar"},u.a.createElement(z.a,{canvasRef:this.canvasRef,preview:t,onChangePreview:b,zoomRatio:r}))),u.a.createElement(K.a,{ref:function(a){e.preview=a},preview:t,onChangePreview:b,onTooltip:f,onClick:h})));return u.a.createElement("div",{className:"rde-content rde-main"},u.a.createElement($.a,{content:x,loading:o,className:""}))}}]),a}(m.Component),oe=Object(w.b)((function(e){return{imgUpload:e.imgUpload,dataExtract:e.dataExtract,common:e.common,tplTree:e.tplTree}}),R)(re);b.a.config({placement:"bottomRight",bottom:0,duration:2});var ce=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return(t=Object(i.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(l)))).openNotificationWithIcon=function(e,a,t){b.a[e]({message:a,description:t})},t.handlePreview=function(){var e=Object(o.a)(r.a.mark((function e(a){var n,o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.resetForm,c=n.setCurrentImg,l=n.common,o(),e.next=4,l.aimvCanvasRef.handler.workareaHandler.setImage(a.url||a.preview);case 4:return e.next=6,c(a.url||a.preview);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.handleRemove=function(){var e=Object(o.a)(r.a.mark((function e(a){var n,o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.delImg,c=n.listImg,l=n.tplTree,e.next=3,o(a.uid);case 3:return e.next=5,c(l.selectedTemplateId);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(){var e=Object(o.a)(r.a.mark((function e(a){var n,o,c,l,i,s,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,o=n.common,c=n.uploadImg,l=n.setCurrentImg,i=n.tplTree,!a.file.originFileObj){e.next=12;break}return(s=new FormData).append("file",a.file.originFileObj),e.next=6,c(s,i.selectedTemplateId);case 6:if(!(d=e.sent).success){e.next=12;break}return e.next=10,o.aimvCanvasRef.handler.workareaHandler.setImage(d.url);case 10:return e.next=12,l(d.url);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.componentDidMount=Object(o.a)(r.a.mark((function e(){var a,n,o,c,l,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,n=a.listImg,o=a.tplTree,(0,a.setMainMenuId)(1),e.prev=2,e.next=5,n(o.selectedTemplateId);case 5:return c=t.props,l=c.imgUpload,i=c.setCurrentImg,e.next=8,i(l.fileList[0].url);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.props.setHasError({hasError:!0,err:e.t0});case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),t.handleClick=Object(o.a)(r.a.mark((function e(){var a,n,o,c,l,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,n=a.dataExtract,o=a.setLoading,c=a.extractData,l=a.tplTree,i=a.common,s=n.currentImg.substring(n.currentImg.lastIndexOf("/")+1),o(!0),e.next=5,c(s,l.selectedTemplateId,n.nlpFlag);case 5:if(e.sent.success){e.next=10;break}t.openNotificationWithIcon("error","Failed","Oops, Something go wrong!"),e.next=13;break;case 10:return e.next=12,i.aimvCanvasRef.handler.workareaHandler.setImage("".concat(n.currentImg,"?box=1"),"boxedimg");case 12:t.openNotificationWithIcon("success","Done","Data extracted!");case 13:o(!1);case 14:case"end":return e.stop()}}),e)}))),t}return Object(d.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.imgUpload,t=e.dataExtract,n=u.a.createElement("div",null,u.a.createElement(k.a,null),u.a.createElement("div",{className:"ant-upload-text"},"Upload"));return u.a.createElement("div",{className:"data-extraction animated fadeIn"},u.a.createElement(p.a,null,u.a.createElement(f.a,{xs:"12",sm:"12",lg:"8",className:"pr-2"},u.a.createElement(h.a,null,u.a.createElement(v.a,null,u.a.createElement("strong",null," Scanned Doccument "),u.a.createElement(y.a,{type:"primary",className:"mr-3 ml-3 float-right",loading:t.loading,onClick:this.handleClick},"Extract data")),u.a.createElement(oe,null),u.a.createElement("div",{className:"clearfix mt-4 ml-3 pb-4"},u.a.createElement(E.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:a.fileList,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.handleRemove},a.fileList.length>=8?null:n)))),u.a.createElement(f.a,{xs:"12",sm:"12",lg:"4",className:"pl-2"},u.a.createElement(h.a,{className:"extract-form"},u.a.createElement(v.a,null,u.a.createElement("strong",null," Extracted Data "),u.a.createElement(y.a,{type:"primary",style:{backgroundColor:"green",borderColor:"green"},className:"float-right"},"Export")),u.a.createElement(g.a,{className:"eform-scroll"},u.a.createElement(L,null))))))}}]),a}(m.Component);a.default=Object(w.b)((function(e){return{imgUpload:e.imgUpload,dataExtract:e.dataExtract,common:e.common,tplTree:e.tplTree}}),R)(ce)}}]);
//# sourceMappingURL=18.602f20f5.chunk.js.map